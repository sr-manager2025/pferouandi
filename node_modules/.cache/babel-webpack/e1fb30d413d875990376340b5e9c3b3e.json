{"ast":null,"code":"/*!\nFullCalendar v5.7.2\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport './main.css';\nimport { createRef, getStickyHeaderDates, createElement, ViewRoot, SimpleScrollGrid, getStickyFooterScrollbar, renderScrollShim, DateComponent, buildNavLinkData, DayCellContent, Fragment, BaseComponent, createFormatter, StandardEvent, buildSegTimeText, EventRoot, memoize, MoreLinkRoot, getSegMeta, setRef, DayCellRoot, WeekNumberRoot, buildEntryKey, SegHierarchy, intersectRanges, addDays, RefMap, sortEventSegs, isPropsEqual, buildEventRangeKey, BgEvent, renderFill, PositionCache, NowTimer, Slicer, DayHeader, DaySeriesModel, DayTableModel, addWeeks, diffWeeks, DateProfileGenerator, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign, __spreadArray } from 'tslib';\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a Table subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\n\nvar TableView = function (_super) {\n  __extends(TableView, _super);\n\n  function TableView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.headerElRef = createRef();\n    return _this;\n  }\n\n  TableView.prototype.renderSimpleLayout = function (headerRowContent, bodyContent) {\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    var sections = [];\n    var stickyHeaderDates = getStickyHeaderDates(context.options);\n\n    if (headerRowContent) {\n      sections.push({\n        type: 'header',\n        key: 'header',\n        isSticky: stickyHeaderDates,\n        chunk: {\n          elRef: this.headerElRef,\n          tableClassName: 'fc-col-header',\n          rowContent: headerRowContent\n        }\n      });\n    }\n\n    sections.push({\n      type: 'body',\n      key: 'body',\n      liquid: true,\n      chunk: {\n        content: bodyContent\n      }\n    });\n    return createElement(ViewRoot, {\n      viewSpec: context.viewSpec\n    }, function (rootElRef, classNames) {\n      return createElement(\"div\", {\n        ref: rootElRef,\n        className: ['fc-daygrid'].concat(classNames).join(' ')\n      }, createElement(SimpleScrollGrid, {\n        liquid: !props.isHeightAuto && !props.forPrint,\n        collapsibleWidth: props.forPrint,\n        cols: []\n        /* TODO: make optional? */\n        ,\n        sections: sections\n      }));\n    });\n  };\n\n  TableView.prototype.renderHScrollLayout = function (headerRowContent, bodyContent, colCnt, dayMinWidth) {\n    var ScrollGrid = this.context.pluginHooks.scrollGridImpl;\n\n    if (!ScrollGrid) {\n      throw new Error('No ScrollGrid implementation');\n    }\n\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    var stickyHeaderDates = !props.forPrint && getStickyHeaderDates(context.options);\n    var stickyFooterScrollbar = !props.forPrint && getStickyFooterScrollbar(context.options);\n    var sections = [];\n\n    if (headerRowContent) {\n      sections.push({\n        type: 'header',\n        key: 'header',\n        isSticky: stickyHeaderDates,\n        chunks: [{\n          key: 'main',\n          elRef: this.headerElRef,\n          tableClassName: 'fc-col-header',\n          rowContent: headerRowContent\n        }]\n      });\n    }\n\n    sections.push({\n      type: 'body',\n      key: 'body',\n      liquid: true,\n      chunks: [{\n        key: 'main',\n        content: bodyContent\n      }]\n    });\n\n    if (stickyFooterScrollbar) {\n      sections.push({\n        type: 'footer',\n        key: 'footer',\n        isSticky: true,\n        chunks: [{\n          key: 'main',\n          content: renderScrollShim\n        }]\n      });\n    }\n\n    return createElement(ViewRoot, {\n      viewSpec: context.viewSpec\n    }, function (rootElRef, classNames) {\n      return createElement(\"div\", {\n        ref: rootElRef,\n        className: ['fc-daygrid'].concat(classNames).join(' ')\n      }, createElement(ScrollGrid, {\n        liquid: !props.isHeightAuto && !props.forPrint,\n        collapsibleWidth: props.forPrint,\n        colGroups: [{\n          cols: [{\n            span: colCnt,\n            minWidth: dayMinWidth\n          }]\n        }],\n        sections: sections\n      }));\n    });\n  };\n\n  return TableView;\n}(DateComponent);\n\nfunction splitSegsByRow(segs, rowCnt) {\n  var byRow = [];\n\n  for (var i = 0; i < rowCnt; i += 1) {\n    byRow[i] = [];\n  }\n\n  for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n    var seg = segs_1[_i];\n    byRow[seg.row].push(seg);\n  }\n\n  return byRow;\n}\n\nfunction splitSegsByFirstCol(segs, colCnt) {\n  var byCol = [];\n\n  for (var i = 0; i < colCnt; i += 1) {\n    byCol[i] = [];\n  }\n\n  for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n    var seg = segs_2[_i];\n    byCol[seg.firstCol].push(seg);\n  }\n\n  return byCol;\n}\n\nfunction splitInteractionByRow(ui, rowCnt) {\n  var byRow = [];\n\n  if (!ui) {\n    for (var i = 0; i < rowCnt; i += 1) {\n      byRow[i] = null;\n    }\n  } else {\n    for (var i = 0; i < rowCnt; i += 1) {\n      byRow[i] = {\n        affectedInstances: ui.affectedInstances,\n        isEvent: ui.isEvent,\n        segs: []\n      };\n    }\n\n    for (var _i = 0, _a = ui.segs; _i < _a.length; _i++) {\n      var seg = _a[_i];\n      byRow[seg.row].segs.push(seg);\n    }\n  }\n\n  return byRow;\n}\n\nvar TableCellTop = function (_super) {\n  __extends(TableCellTop, _super);\n\n  function TableCellTop() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TableCellTop.prototype.render = function () {\n    var props = this.props;\n    var navLinkAttrs = this.context.options.navLinks ? {\n      'data-navlink': buildNavLinkData(props.date),\n      tabIndex: 0\n    } : {};\n    return createElement(DayCellContent, {\n      date: props.date,\n      dateProfile: props.dateProfile,\n      todayRange: props.todayRange,\n      showDayNumber: props.showDayNumber,\n      extraHookProps: props.extraHookProps,\n      defaultContent: renderTopInner\n    }, function (innerElRef, innerContent) {\n      return (innerContent || props.forceDayTop) && createElement(\"div\", {\n        className: \"fc-daygrid-day-top\",\n        ref: innerElRef\n      }, createElement(\"a\", __assign({\n        className: \"fc-daygrid-day-number\"\n      }, navLinkAttrs), innerContent || createElement(Fragment, null, \"\\xA0\")));\n    });\n  };\n\n  return TableCellTop;\n}(BaseComponent);\n\nfunction renderTopInner(props) {\n  return props.dayNumberText;\n}\n\nvar DEFAULT_TABLE_EVENT_TIME_FORMAT = createFormatter({\n  hour: 'numeric',\n  minute: '2-digit',\n  omitZeroMinute: true,\n  meridiem: 'narrow'\n});\n\nfunction hasListItemDisplay(seg) {\n  var display = seg.eventRange.ui.display;\n  return display === 'list-item' || display === 'auto' && !seg.eventRange.def.allDay && seg.firstCol === seg.lastCol && // can't be multi-day\n  seg.isStart && // \"\n  seg.isEnd // \"\n  ;\n}\n\nvar TableBlockEvent = function (_super) {\n  __extends(TableBlockEvent, _super);\n\n  function TableBlockEvent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TableBlockEvent.prototype.render = function () {\n    var props = this.props;\n    return createElement(StandardEvent, __assign({}, props, {\n      extraClassNames: ['fc-daygrid-event', 'fc-daygrid-block-event', 'fc-h-event'],\n      defaultTimeFormat: DEFAULT_TABLE_EVENT_TIME_FORMAT,\n      defaultDisplayEventEnd: props.defaultDisplayEventEnd,\n      disableResizing: !props.seg.eventRange.def.allDay\n    }));\n  };\n\n  return TableBlockEvent;\n}(BaseComponent);\n\nvar TableListItemEvent = function (_super) {\n  __extends(TableListItemEvent, _super);\n\n  function TableListItemEvent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TableListItemEvent.prototype.render = function () {\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    var timeFormat = context.options.eventTimeFormat || DEFAULT_TABLE_EVENT_TIME_FORMAT;\n    var timeText = buildSegTimeText(props.seg, timeFormat, context, true, props.defaultDisplayEventEnd);\n    return createElement(EventRoot, {\n      seg: props.seg,\n      timeText: timeText,\n      defaultContent: renderInnerContent,\n      isDragging: props.isDragging,\n      isResizing: false,\n      isDateSelecting: false,\n      isSelected: props.isSelected,\n      isPast: props.isPast,\n      isFuture: props.isFuture,\n      isToday: props.isToday\n    }, function (rootElRef, classNames, innerElRef, innerContent) {\n      return (// we don't use styles!\n        createElement(\"a\", __assign({\n          className: ['fc-daygrid-event', 'fc-daygrid-dot-event'].concat(classNames).join(' '),\n          ref: rootElRef\n        }, getSegAnchorAttrs(props.seg)), innerContent)\n      );\n    });\n  };\n\n  return TableListItemEvent;\n}(BaseComponent);\n\nfunction renderInnerContent(innerProps) {\n  return createElement(Fragment, null, createElement(\"div\", {\n    className: \"fc-daygrid-event-dot\",\n    style: {\n      borderColor: innerProps.borderColor || innerProps.backgroundColor\n    }\n  }), innerProps.timeText && createElement(\"div\", {\n    className: \"fc-event-time\"\n  }, innerProps.timeText), createElement(\"div\", {\n    className: \"fc-event-title\"\n  }, innerProps.event.title || createElement(Fragment, null, \"\\xA0\")));\n}\n\nfunction getSegAnchorAttrs(seg) {\n  var url = seg.eventRange.def.url;\n  return url ? {\n    href: url\n  } : {};\n}\n\nvar TableCellMoreLink = function (_super) {\n  __extends(TableCellMoreLink, _super);\n\n  function TableCellMoreLink() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.compileSegs = memoize(compileSegs);\n    return _this;\n  }\n\n  TableCellMoreLink.prototype.render = function () {\n    var props = this.props;\n\n    var _a = this.compileSegs(props.singlePlacements),\n        allSegs = _a.allSegs,\n        invisibleSegs = _a.invisibleSegs;\n\n    return createElement(MoreLinkRoot, {\n      dateProfile: props.dateProfile,\n      todayRange: props.todayRange,\n      allDayDate: props.allDayDate,\n      moreCnt: props.moreCnt,\n      allSegs: allSegs,\n      hiddenSegs: invisibleSegs,\n      alignmentElRef: props.alignmentElRef,\n      alignGridTop: props.alignGridTop,\n      extraDateSpan: props.extraDateSpan,\n      popoverContent: function popoverContent() {\n        var isForcedInvisible = (props.eventDrag ? props.eventDrag.affectedInstances : null) || (props.eventResize ? props.eventResize.affectedInstances : null) || {};\n        return createElement(Fragment, null, allSegs.map(function (seg) {\n          var instanceId = seg.eventRange.instance.instanceId;\n          return createElement(\"div\", {\n            className: \"fc-daygrid-event-harness\",\n            key: instanceId,\n            style: {\n              visibility: isForcedInvisible[instanceId] ? 'hidden' : ''\n            }\n          }, hasListItemDisplay(seg) ? createElement(TableListItemEvent, __assign({\n            seg: seg,\n            isDragging: false,\n            isSelected: instanceId === props.eventSelection,\n            defaultDisplayEventEnd: false\n          }, getSegMeta(seg, props.todayRange))) : createElement(TableBlockEvent, __assign({\n            seg: seg,\n            isDragging: false,\n            isResizing: false,\n            isDateSelecting: false,\n            isSelected: instanceId === props.eventSelection,\n            defaultDisplayEventEnd: false\n          }, getSegMeta(seg, props.todayRange))));\n        }));\n      }\n    }, function (rootElRef, classNames, innerElRef, innerContent, handleClick) {\n      return createElement(\"a\", {\n        ref: rootElRef,\n        className: ['fc-daygrid-more-link'].concat(classNames).join(' '),\n        onClick: handleClick\n      }, innerContent);\n    });\n  };\n\n  return TableCellMoreLink;\n}(BaseComponent);\n\nfunction compileSegs(singlePlacements) {\n  var allSegs = [];\n  var invisibleSegs = [];\n\n  for (var _i = 0, singlePlacements_1 = singlePlacements; _i < singlePlacements_1.length; _i++) {\n    var placement = singlePlacements_1[_i];\n    allSegs.push(placement.seg);\n\n    if (!placement.isVisible) {\n      invisibleSegs.push(placement.seg);\n    }\n  }\n\n  return {\n    allSegs: allSegs,\n    invisibleSegs: invisibleSegs\n  };\n}\n\nvar DEFAULT_WEEK_NUM_FORMAT = createFormatter({\n  week: 'narrow'\n});\n\nvar TableCell = function (_super) {\n  __extends(TableCell, _super);\n\n  function TableCell() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.rootElRef = createRef();\n\n    _this.handleRootEl = function (el) {\n      setRef(_this.rootElRef, el);\n      setRef(_this.props.elRef, el);\n    };\n\n    return _this;\n  }\n\n  TableCell.prototype.render = function () {\n    var _a = this,\n        props = _a.props,\n        context = _a.context,\n        rootElRef = _a.rootElRef;\n\n    var options = context.options;\n    var date = props.date,\n        dateProfile = props.dateProfile;\n    var navLinkAttrs = options.navLinks ? {\n      'data-navlink': buildNavLinkData(date, 'week'),\n      tabIndex: 0\n    } : {};\n    return createElement(DayCellRoot, {\n      date: date,\n      dateProfile: dateProfile,\n      todayRange: props.todayRange,\n      showDayNumber: props.showDayNumber,\n      extraHookProps: props.extraHookProps,\n      elRef: this.handleRootEl\n    }, function (dayElRef, dayClassNames, rootDataAttrs, isDisabled) {\n      return createElement(\"td\", __assign({\n        ref: dayElRef,\n        className: ['fc-daygrid-day'].concat(dayClassNames, props.extraClassNames || []).join(' ')\n      }, rootDataAttrs, props.extraDataAttrs), createElement(\"div\", {\n        className: \"fc-daygrid-day-frame fc-scrollgrid-sync-inner\",\n        ref: props.innerElRef\n        /* different from hook system! RENAME */\n\n      }, props.showWeekNumber && createElement(WeekNumberRoot, {\n        date: date,\n        defaultFormat: DEFAULT_WEEK_NUM_FORMAT\n      }, function (weekElRef, weekClassNames, innerElRef, innerContent) {\n        return createElement(\"a\", __assign({\n          ref: weekElRef,\n          className: ['fc-daygrid-week-number'].concat(weekClassNames).join(' ')\n        }, navLinkAttrs), innerContent);\n      }), !isDisabled && createElement(TableCellTop, {\n        date: date,\n        dateProfile: dateProfile,\n        showDayNumber: props.showDayNumber,\n        forceDayTop: props.forceDayTop,\n        todayRange: props.todayRange,\n        extraHookProps: props.extraHookProps\n      }), createElement(\"div\", {\n        className: \"fc-daygrid-day-events\",\n        ref: props.fgContentElRef\n      }, props.fgContent, createElement(\"div\", {\n        className: \"fc-daygrid-day-bottom\",\n        style: {\n          marginTop: props.moreMarginTop\n        }\n      }, createElement(TableCellMoreLink, {\n        allDayDate: date,\n        singlePlacements: props.singlePlacements,\n        moreCnt: props.moreCnt,\n        alignmentElRef: rootElRef,\n        alignGridTop: !props.showDayNumber,\n        extraDateSpan: props.extraDateSpan,\n        dateProfile: props.dateProfile,\n        eventSelection: props.eventSelection,\n        eventDrag: props.eventDrag,\n        eventResize: props.eventResize,\n        todayRange: props.todayRange\n      }))), createElement(\"div\", {\n        className: \"fc-daygrid-day-bg\"\n      }, props.bgContent)));\n    });\n  };\n\n  return TableCell;\n}(DateComponent);\n\nfunction computeFgSegPlacement(segs, // assumed already sorted\ndayMaxEvents, dayMaxEventRows, strictOrder, eventInstanceHeights, maxContentHeight, cells) {\n  var hierarchy = new DayGridSegHierarchy();\n  hierarchy.allowReslicing = true;\n  hierarchy.strictOrder = strictOrder;\n\n  if (dayMaxEvents === true || dayMaxEventRows === true) {\n    hierarchy.maxCoord = maxContentHeight;\n    hierarchy.hiddenConsumes = true;\n  } else if (typeof dayMaxEvents === 'number') {\n    hierarchy.maxStackCnt = dayMaxEvents;\n  } else if (typeof dayMaxEventRows === 'number') {\n    hierarchy.maxStackCnt = dayMaxEventRows;\n    hierarchy.hiddenConsumes = true;\n  } // create segInputs only for segs with known heights\n\n\n  var segInputs = [];\n  var unknownHeightSegs = [];\n\n  for (var i = 0; i < segs.length; i += 1) {\n    var seg = segs[i];\n    var instanceId = seg.eventRange.instance.instanceId;\n    var eventHeight = eventInstanceHeights[instanceId];\n\n    if (eventHeight != null) {\n      segInputs.push({\n        index: i,\n        spanStart: seg.firstCol,\n        spanEnd: seg.lastCol + 1,\n        thickness: eventHeight\n      });\n    } else {\n      unknownHeightSegs.push(seg);\n    }\n  }\n\n  var hiddenEntries = hierarchy.addSegs(segInputs);\n  var segRects = hierarchy.toRects();\n\n  var _a = placeRects(segRects, segs, cells),\n      singleColPlacements = _a.singleColPlacements,\n      multiColPlacements = _a.multiColPlacements,\n      leftoverMargins = _a.leftoverMargins;\n\n  var moreCnts = [];\n  var moreMarginTops = []; // add segs with unknown heights\n\n  for (var _i = 0, unknownHeightSegs_1 = unknownHeightSegs; _i < unknownHeightSegs_1.length; _i++) {\n    var seg = unknownHeightSegs_1[_i];\n    multiColPlacements[seg.firstCol].push({\n      seg: seg,\n      isVisible: false,\n      isAbsolute: true,\n      absoluteTop: 0,\n      marginTop: 0\n    });\n\n    for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n      singleColPlacements[col].push({\n        seg: resliceSeg(seg, col, col + 1, cells),\n        isVisible: false,\n        isAbsolute: false,\n        absoluteTop: 0,\n        marginTop: 0\n      });\n    }\n  } // add the hidden entries\n\n\n  for (var col = 0; col < cells.length; col += 1) {\n    moreCnts.push(0);\n  }\n\n  for (var _b = 0, hiddenEntries_1 = hiddenEntries; _b < hiddenEntries_1.length; _b++) {\n    var hiddenEntry = hiddenEntries_1[_b];\n    var seg = segs[hiddenEntry.segInput.index];\n    multiColPlacements[hiddenEntry.spanStart].push({\n      seg: seg,\n      isVisible: false,\n      isAbsolute: true,\n      absoluteTop: 0,\n      marginTop: 0\n    });\n\n    for (var col = hiddenEntry.spanStart; col < hiddenEntry.spanEnd; col += 1) {\n      moreCnts[col] += 1;\n      singleColPlacements[col].push({\n        seg: resliceSeg(seg, col, col + 1, cells),\n        isVisible: false,\n        isAbsolute: false,\n        absoluteTop: 0,\n        marginTop: 0\n      });\n    }\n  } // deal with leftover margins\n\n\n  for (var col = 0; col < cells.length; col += 1) {\n    moreMarginTops.push(leftoverMargins[col]);\n  }\n\n  return {\n    singleColPlacements: singleColPlacements,\n    multiColPlacements: multiColPlacements,\n    moreCnts: moreCnts,\n    moreMarginTops: moreMarginTops\n  };\n} // rects ordered by top coord, then left\n\n\nfunction placeRects(allRects, segs, cells) {\n  var rectsByEachCol = groupRectsByEachCol(allRects, cells.length);\n  var singleColPlacements = [];\n  var multiColPlacements = [];\n  var leftoverMargins = [];\n\n  for (var col = 0; col < cells.length; col += 1) {\n    var rects = rectsByEachCol[col]; // compute all static segs in singlePlacements\n\n    var singlePlacements = [];\n    var currentHeight = 0;\n    var currentMarginTop = 0;\n\n    for (var _i = 0, rects_1 = rects; _i < rects_1.length; _i++) {\n      var rect = rects_1[_i];\n      var seg = segs[rect.segInput.index];\n      singlePlacements.push({\n        seg: resliceSeg(seg, col, col + 1, cells),\n        isVisible: true,\n        isAbsolute: false,\n        absoluteTop: 0,\n        marginTop: rect.levelCoord - currentHeight\n      });\n      currentHeight = rect.levelCoord + rect.thickness;\n    } // compute mixed static/absolute segs in multiPlacements\n\n\n    var multiPlacements = [];\n    currentHeight = 0;\n    currentMarginTop = 0;\n\n    for (var _a = 0, rects_2 = rects; _a < rects_2.length; _a++) {\n      var rect = rects_2[_a];\n      var seg = segs[rect.segInput.index];\n      var isAbsolute = rect.spanEnd - rect.spanStart > 1; // multi-column?\n\n      var isFirstCol = rect.spanStart === col;\n      currentMarginTop += rect.levelCoord - currentHeight; // amount of space since bottom of previous seg\n\n      currentHeight = rect.levelCoord + rect.thickness; // height will now be bottom of current seg\n\n      if (isAbsolute) {\n        currentMarginTop += rect.thickness;\n\n        if (isFirstCol) {\n          multiPlacements.push({\n            seg: resliceSeg(seg, rect.spanStart, rect.spanEnd, cells),\n            isVisible: true,\n            isAbsolute: true,\n            absoluteTop: rect.levelCoord,\n            marginTop: 0\n          });\n        }\n      } else if (isFirstCol) {\n        multiPlacements.push({\n          seg: resliceSeg(seg, rect.spanStart, rect.spanEnd, cells),\n          isVisible: true,\n          isAbsolute: false,\n          absoluteTop: 0,\n          marginTop: currentMarginTop // claim the margin\n\n        });\n        currentMarginTop = 0;\n      }\n    }\n\n    singleColPlacements.push(singlePlacements);\n    multiColPlacements.push(multiPlacements);\n    leftoverMargins.push(currentMarginTop);\n  }\n\n  return {\n    singleColPlacements: singleColPlacements,\n    multiColPlacements: multiColPlacements,\n    leftoverMargins: leftoverMargins\n  };\n}\n\nfunction groupRectsByEachCol(rects, colCnt) {\n  var rectsByEachCol = [];\n\n  for (var col = 0; col < colCnt; col += 1) {\n    rectsByEachCol.push([]);\n  }\n\n  for (var _i = 0, rects_3 = rects; _i < rects_3.length; _i++) {\n    var rect = rects_3[_i];\n\n    for (var col = rect.spanStart; col < rect.spanEnd; col += 1) {\n      rectsByEachCol[col].push(rect);\n    }\n  }\n\n  return rectsByEachCol;\n}\n\nfunction resliceSeg(seg, spanStart, spanEnd, cells) {\n  if (seg.firstCol === spanStart && seg.lastCol === spanEnd - 1) {\n    return seg;\n  }\n\n  var eventRange = seg.eventRange;\n  var origRange = eventRange.range;\n  var slicedRange = intersectRanges(origRange, {\n    start: cells[spanStart].date,\n    end: addDays(cells[spanEnd - 1].date, 1)\n  });\n  return __assign(__assign({}, seg), {\n    firstCol: spanStart,\n    lastCol: spanEnd - 1,\n    eventRange: {\n      def: eventRange.def,\n      ui: __assign(__assign({}, eventRange.ui), {\n        durationEditable: false\n      }),\n      instance: eventRange.instance,\n      range: slicedRange\n    },\n    isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(),\n    isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf()\n  });\n}\n\nvar DayGridSegHierarchy = function (_super) {\n  __extends(DayGridSegHierarchy, _super);\n\n  function DayGridSegHierarchy() {\n    var _this = _super !== null && _super.apply(this, arguments) || this; // config\n\n\n    _this.hiddenConsumes = false; // allows us to keep hidden entries in the hierarchy so they take up space\n\n    _this.forceHidden = {};\n    return _this;\n  }\n\n  DayGridSegHierarchy.prototype.addSegs = function (segInputs) {\n    var _this = this;\n\n    var hiddenSegs = _super.prototype.addSegs.call(this, segInputs);\n\n    var entriesByLevel = this.entriesByLevel;\n\n    var excludeHidden = function excludeHidden(entry) {\n      return !_this.forceHidden[buildEntryKey(entry)];\n    }; // remove the forced-hidden segs\n\n\n    for (var level = 0; level < entriesByLevel.length; level += 1) {\n      entriesByLevel[level] = entriesByLevel[level].filter(excludeHidden);\n    }\n\n    return hiddenSegs;\n  };\n\n  DayGridSegHierarchy.prototype.handleInvalidInsertion = function (insertion, entry, hiddenEntries) {\n    var _a = this,\n        entriesByLevel = _a.entriesByLevel,\n        forceHidden = _a.forceHidden;\n\n    var level = insertion.nextLevel - 1;\n\n    if (this.hiddenConsumes && level >= 0) {\n      for (var lateral = insertion.lateralStart; lateral < insertion.lateralEnd; lateral += 1) {\n        var leadingEntry = entriesByLevel[level][lateral];\n\n        if (this.allowReslicing) {\n          var placeholderEntry = __assign(__assign({}, leadingEntry), {\n            spanStart: Math.max(leadingEntry.spanStart, entry.spanStart),\n            spanEnd: Math.min(leadingEntry.spanEnd, entry.spanEnd)\n          });\n\n          var placeholderEntryId = buildEntryKey(placeholderEntry);\n\n          if (!forceHidden[placeholderEntryId]) {\n            forceHidden[placeholderEntryId] = true;\n            entriesByLevel[level][lateral] = placeholderEntry;\n            this.splitEntry(leadingEntry, entry, hiddenEntries); // split up the leadingEntry\n          }\n        } else {\n          var placeholderEntryId = buildEntryKey(leadingEntry);\n\n          if (!forceHidden[placeholderEntryId]) {\n            forceHidden[placeholderEntryId] = true;\n            hiddenEntries.push(leadingEntry);\n          }\n        }\n      }\n    }\n\n    return _super.prototype.handleInvalidInsertion.call(this, insertion, entry, hiddenEntries);\n  };\n\n  return DayGridSegHierarchy;\n}(SegHierarchy);\n\nvar TableRow = function (_super) {\n  __extends(TableRow, _super);\n\n  function TableRow() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.cellElRefs = new RefMap(); // the <td>\n\n    _this.frameElRefs = new RefMap(); // the fc-daygrid-day-frame\n\n    _this.fgElRefs = new RefMap(); // the fc-daygrid-day-events\n\n    _this.segHarnessRefs = new RefMap(); // indexed by \"instanceId:firstCol\"\n\n    _this.rootElRef = createRef();\n    _this.state = {\n      framePositions: null,\n      maxContentHeight: null,\n      eventInstanceHeights: {}\n    };\n    return _this;\n  }\n\n  TableRow.prototype.render = function () {\n    var _this = this;\n\n    var _a = this,\n        props = _a.props,\n        state = _a.state,\n        context = _a.context;\n\n    var options = context.options;\n    var colCnt = props.cells.length;\n    var businessHoursByCol = splitSegsByFirstCol(props.businessHourSegs, colCnt);\n    var bgEventSegsByCol = splitSegsByFirstCol(props.bgEventSegs, colCnt);\n    var highlightSegsByCol = splitSegsByFirstCol(this.getHighlightSegs(), colCnt);\n    var mirrorSegsByCol = splitSegsByFirstCol(this.getMirrorSegs(), colCnt);\n\n    var _b = computeFgSegPlacement(sortEventSegs(props.fgEventSegs, options.eventOrder), props.dayMaxEvents, props.dayMaxEventRows, options.eventOrderStrict, state.eventInstanceHeights, state.maxContentHeight, props.cells),\n        singleColPlacements = _b.singleColPlacements,\n        multiColPlacements = _b.multiColPlacements,\n        moreCnts = _b.moreCnts,\n        moreMarginTops = _b.moreMarginTops;\n\n    var isForcedInvisible = // TODO: messy way to compute this\n    props.eventDrag && props.eventDrag.affectedInstances || props.eventResize && props.eventResize.affectedInstances || {};\n    return createElement(\"tr\", {\n      ref: this.rootElRef\n    }, props.renderIntro && props.renderIntro(), props.cells.map(function (cell, col) {\n      var normalFgNodes = _this.renderFgSegs(col, props.forPrint ? singleColPlacements[col] : multiColPlacements[col], props.todayRange, isForcedInvisible);\n\n      var mirrorFgNodes = _this.renderFgSegs(col, buildMirrorPlacements(mirrorSegsByCol[col], multiColPlacements), props.todayRange, {}, Boolean(props.eventDrag), Boolean(props.eventResize), false);\n\n      return createElement(TableCell, {\n        key: cell.key,\n        elRef: _this.cellElRefs.createRef(cell.key),\n        innerElRef: _this.frameElRefs.createRef(cell.key)\n        /* FF <td> problem, but okay to use for left/right. TODO: rename prop */\n        ,\n        dateProfile: props.dateProfile,\n        date: cell.date,\n        showDayNumber: props.showDayNumbers,\n        showWeekNumber: props.showWeekNumbers && col === 0,\n        forceDayTop: props.showWeekNumbers\n        /* even displaying weeknum for row, not necessarily day */\n        ,\n        todayRange: props.todayRange,\n        eventSelection: props.eventSelection,\n        eventDrag: props.eventDrag,\n        eventResize: props.eventResize,\n        extraHookProps: cell.extraHookProps,\n        extraDataAttrs: cell.extraDataAttrs,\n        extraClassNames: cell.extraClassNames,\n        extraDateSpan: cell.extraDateSpan,\n        moreCnt: moreCnts[col],\n        moreMarginTop: moreMarginTops[col],\n        singlePlacements: singleColPlacements[col],\n        fgContentElRef: _this.fgElRefs.createRef(cell.key),\n        fgContent: // Fragment scopes the keys\n        createElement(Fragment, null, createElement(Fragment, null, normalFgNodes), createElement(Fragment, null, mirrorFgNodes)),\n        bgContent: // Fragment scopes the keys\n        createElement(Fragment, null, _this.renderFillSegs(highlightSegsByCol[col], 'highlight'), _this.renderFillSegs(businessHoursByCol[col], 'non-business'), _this.renderFillSegs(bgEventSegsByCol[col], 'bg-event'))\n      });\n    }));\n  };\n\n  TableRow.prototype.componentDidMount = function () {\n    this.updateSizing(true);\n  };\n\n  TableRow.prototype.componentDidUpdate = function (prevProps, prevState) {\n    var currentProps = this.props;\n    this.updateSizing(!isPropsEqual(prevProps, currentProps));\n  };\n\n  TableRow.prototype.getHighlightSegs = function () {\n    var props = this.props;\n\n    if (props.eventDrag && props.eventDrag.segs.length) {\n      // messy check\n      return props.eventDrag.segs;\n    }\n\n    if (props.eventResize && props.eventResize.segs.length) {\n      // messy check\n      return props.eventResize.segs;\n    }\n\n    return props.dateSelectionSegs;\n  };\n\n  TableRow.prototype.getMirrorSegs = function () {\n    var props = this.props;\n\n    if (props.eventResize && props.eventResize.segs.length) {\n      // messy check\n      return props.eventResize.segs;\n    }\n\n    return [];\n  };\n\n  TableRow.prototype.renderFgSegs = function (col, segPlacements, todayRange, isForcedInvisible, isDragging, isResizing, isDateSelecting) {\n    var context = this.context;\n    var eventSelection = this.props.eventSelection;\n    var framePositions = this.state.framePositions;\n    var defaultDisplayEventEnd = this.props.cells.length === 1; // colCnt === 1\n\n    var isMirror = isDragging || isResizing || isDateSelecting;\n    var nodes = [];\n\n    if (framePositions) {\n      for (var _i = 0, segPlacements_1 = segPlacements; _i < segPlacements_1.length; _i++) {\n        var placement = segPlacements_1[_i];\n        var seg = placement.seg;\n        var instanceId = seg.eventRange.instance.instanceId;\n        var key = instanceId + ':' + col;\n        var isVisible = placement.isVisible && !isForcedInvisible[instanceId];\n        var isAbsolute = placement.isAbsolute;\n        var left = '';\n        var right = '';\n\n        if (isAbsolute) {\n          if (context.isRtl) {\n            right = 0;\n            left = framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol];\n          } else {\n            left = 0;\n            right = framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol];\n          }\n        }\n        /*\n        known bug: events that are force to be list-item but span multiple days still take up space in later columns\n        todo: in print view, for multi-day events, don't display title within non-start/end segs\n        */\n\n\n        nodes.push(createElement(\"div\", {\n          className: 'fc-daygrid-event-harness' + (isAbsolute ? ' fc-daygrid-event-harness-abs' : ''),\n          key: key,\n          ref: isMirror ? null : this.segHarnessRefs.createRef(key),\n          style: {\n            visibility: isVisible ? '' : 'hidden',\n            marginTop: isAbsolute ? '' : placement.marginTop,\n            top: isAbsolute ? placement.absoluteTop : '',\n            left: left,\n            right: right\n          }\n        }, hasListItemDisplay(seg) ? createElement(TableListItemEvent, __assign({\n          seg: seg,\n          isDragging: isDragging,\n          isSelected: instanceId === eventSelection,\n          defaultDisplayEventEnd: defaultDisplayEventEnd\n        }, getSegMeta(seg, todayRange))) : createElement(TableBlockEvent, __assign({\n          seg: seg,\n          isDragging: isDragging,\n          isResizing: isResizing,\n          isDateSelecting: isDateSelecting,\n          isSelected: instanceId === eventSelection,\n          defaultDisplayEventEnd: defaultDisplayEventEnd\n        }, getSegMeta(seg, todayRange)))));\n      }\n    }\n\n    return nodes;\n  };\n\n  TableRow.prototype.renderFillSegs = function (segs, fillType) {\n    var isRtl = this.context.isRtl;\n    var todayRange = this.props.todayRange;\n    var framePositions = this.state.framePositions;\n    var nodes = [];\n\n    if (framePositions) {\n      for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        var leftRightCss = isRtl ? {\n          right: 0,\n          left: framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol]\n        } : {\n          left: 0,\n          right: framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol]\n        };\n        nodes.push(createElement(\"div\", {\n          key: buildEventRangeKey(seg.eventRange),\n          className: \"fc-daygrid-bg-harness\",\n          style: leftRightCss\n        }, fillType === 'bg-event' ? createElement(BgEvent, __assign({\n          seg: seg\n        }, getSegMeta(seg, todayRange))) : renderFill(fillType)));\n      }\n    }\n\n    return createElement.apply(void 0, __spreadArray([Fragment, {}], nodes));\n  };\n\n  TableRow.prototype.updateSizing = function (isExternalSizingChange) {\n    var _a = this,\n        props = _a.props,\n        frameElRefs = _a.frameElRefs;\n\n    if (!props.forPrint && props.clientWidth !== null // positioning ready?\n    ) {\n      if (isExternalSizingChange) {\n        var frameEls = props.cells.map(function (cell) {\n          return frameElRefs.currentMap[cell.key];\n        });\n\n        if (frameEls.length) {\n          var originEl = this.rootElRef.current;\n          this.setState({\n            framePositions: new PositionCache(originEl, frameEls, true, // isHorizontal\n            false)\n          });\n        }\n      }\n\n      var limitByContentHeight = props.dayMaxEvents === true || props.dayMaxEventRows === true;\n      this.setState({\n        eventInstanceHeights: this.queryEventInstanceHeights(),\n        maxContentHeight: limitByContentHeight ? this.computeMaxContentHeight() : null\n      });\n    }\n  };\n\n  TableRow.prototype.queryEventInstanceHeights = function () {\n    var segElMap = this.segHarnessRefs.currentMap;\n    var eventInstanceHeights = {}; // get the max height amongst instance segs\n\n    for (var key in segElMap) {\n      var height = Math.round(segElMap[key].getBoundingClientRect().height);\n      var instanceId = key.split(':')[0]; // deconstruct how renderFgSegs makes the key\n\n      eventInstanceHeights[instanceId] = Math.max(eventInstanceHeights[instanceId] || 0, height);\n    }\n\n    return eventInstanceHeights;\n  };\n\n  TableRow.prototype.computeMaxContentHeight = function () {\n    var firstKey = this.props.cells[0].key;\n    var cellEl = this.cellElRefs.currentMap[firstKey];\n    var fcContainerEl = this.fgElRefs.currentMap[firstKey];\n    return cellEl.getBoundingClientRect().bottom - fcContainerEl.getBoundingClientRect().top;\n  };\n\n  TableRow.prototype.getCellEls = function () {\n    var elMap = this.cellElRefs.currentMap;\n    return this.props.cells.map(function (cell) {\n      return elMap[cell.key];\n    });\n  };\n\n  return TableRow;\n}(DateComponent);\n\nTableRow.addStateEquality({\n  eventInstanceHeights: isPropsEqual\n});\n\nfunction buildMirrorPlacements(mirrorSegs, colPlacements) {\n  if (!mirrorSegs.length) {\n    return [];\n  }\n\n  var topsByInstanceId = buildAbsoluteTopHash(colPlacements); // TODO: cache this at first render?\n\n  return mirrorSegs.map(function (seg) {\n    return {\n      seg: seg,\n      isVisible: true,\n      isAbsolute: true,\n      absoluteTop: topsByInstanceId[seg.eventRange.instance.instanceId],\n      marginTop: 0\n    };\n  });\n}\n\nfunction buildAbsoluteTopHash(colPlacements) {\n  var topsByInstanceId = {};\n\n  for (var _i = 0, colPlacements_1 = colPlacements; _i < colPlacements_1.length; _i++) {\n    var placements = colPlacements_1[_i];\n\n    for (var _a = 0, placements_1 = placements; _a < placements_1.length; _a++) {\n      var placement = placements_1[_a];\n      topsByInstanceId[placement.seg.eventRange.instance.instanceId] = placement.absoluteTop;\n    }\n  }\n\n  return colPlacements;\n}\n\nvar Table = function (_super) {\n  __extends(Table, _super);\n\n  function Table() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.splitBusinessHourSegs = memoize(splitSegsByRow);\n    _this.splitBgEventSegs = memoize(splitSegsByRow);\n    _this.splitFgEventSegs = memoize(splitSegsByRow);\n    _this.splitDateSelectionSegs = memoize(splitSegsByRow);\n    _this.splitEventDrag = memoize(splitInteractionByRow);\n    _this.splitEventResize = memoize(splitInteractionByRow);\n    _this.rowRefs = new RefMap();\n\n    _this.handleRootEl = function (rootEl) {\n      _this.rootEl = rootEl;\n\n      if (rootEl) {\n        _this.context.registerInteractiveComponent(_this, {\n          el: rootEl,\n          isHitComboAllowed: _this.props.isHitComboAllowed\n        });\n      } else {\n        _this.context.unregisterInteractiveComponent(_this);\n      }\n    };\n\n    return _this;\n  }\n\n  Table.prototype.render = function () {\n    var _this = this;\n\n    var props = this.props;\n    var dateProfile = props.dateProfile,\n        dayMaxEventRows = props.dayMaxEventRows,\n        dayMaxEvents = props.dayMaxEvents,\n        expandRows = props.expandRows;\n    var rowCnt = props.cells.length;\n    var businessHourSegsByRow = this.splitBusinessHourSegs(props.businessHourSegs, rowCnt);\n    var bgEventSegsByRow = this.splitBgEventSegs(props.bgEventSegs, rowCnt);\n    var fgEventSegsByRow = this.splitFgEventSegs(props.fgEventSegs, rowCnt);\n    var dateSelectionSegsByRow = this.splitDateSelectionSegs(props.dateSelectionSegs, rowCnt);\n    var eventDragByRow = this.splitEventDrag(props.eventDrag, rowCnt);\n    var eventResizeByRow = this.splitEventResize(props.eventResize, rowCnt);\n    var limitViaBalanced = dayMaxEvents === true || dayMaxEventRows === true; // if rows can't expand to fill fixed height, can't do balanced-height event limit\n    // TODO: best place to normalize these options?\n\n    if (limitViaBalanced && !expandRows) {\n      limitViaBalanced = false;\n      dayMaxEventRows = null;\n      dayMaxEvents = null;\n    }\n\n    var classNames = ['fc-daygrid-body', limitViaBalanced ? 'fc-daygrid-body-balanced' : 'fc-daygrid-body-unbalanced', expandRows ? '' : 'fc-daygrid-body-natural' // will height of one row depend on the others?\n    ];\n    return createElement(\"div\", {\n      className: classNames.join(' '),\n      ref: this.handleRootEl,\n      style: {\n        // these props are important to give this wrapper correct dimensions for interactions\n        // TODO: if we set it here, can we avoid giving to inner tables?\n        width: props.clientWidth,\n        minWidth: props.tableMinWidth\n      }\n    }, createElement(NowTimer, {\n      unit: \"day\"\n    }, function (nowDate, todayRange) {\n      return createElement(Fragment, null, createElement(\"table\", {\n        className: \"fc-scrollgrid-sync-table\",\n        style: {\n          width: props.clientWidth,\n          minWidth: props.tableMinWidth,\n          height: expandRows ? props.clientHeight : ''\n        }\n      }, props.colGroupNode, createElement(\"tbody\", null, props.cells.map(function (cells, row) {\n        return createElement(TableRow, {\n          ref: _this.rowRefs.createRef(row),\n          key: cells.length ? cells[0].date.toISOString()\n          /* best? or put key on cell? or use diff formatter? */\n          : row // in case there are no cells (like when resource view is loading)\n          ,\n          showDayNumbers: rowCnt > 1,\n          showWeekNumbers: props.showWeekNumbers,\n          todayRange: todayRange,\n          dateProfile: dateProfile,\n          cells: cells,\n          renderIntro: props.renderRowIntro,\n          businessHourSegs: businessHourSegsByRow[row],\n          eventSelection: props.eventSelection,\n          bgEventSegs: bgEventSegsByRow[row].filter(isSegAllDay)\n          /* hack */\n          ,\n          fgEventSegs: fgEventSegsByRow[row],\n          dateSelectionSegs: dateSelectionSegsByRow[row],\n          eventDrag: eventDragByRow[row],\n          eventResize: eventResizeByRow[row],\n          dayMaxEvents: dayMaxEvents,\n          dayMaxEventRows: dayMaxEventRows,\n          clientWidth: props.clientWidth,\n          clientHeight: props.clientHeight,\n          forPrint: props.forPrint\n        });\n      }))));\n    }));\n  }; // Hit System\n  // ----------------------------------------------------------------------------------------------------\n\n\n  Table.prototype.prepareHits = function () {\n    this.rowPositions = new PositionCache(this.rootEl, this.rowRefs.collect().map(function (rowObj) {\n      return rowObj.getCellEls()[0];\n    }), // first cell el in each row. TODO: not optimal\n    false, true);\n    this.colPositions = new PositionCache(this.rootEl, this.rowRefs.currentMap[0].getCellEls(), // cell els in first row\n    true, // horizontal\n    false);\n  };\n\n  Table.prototype.queryHit = function (positionLeft, positionTop) {\n    var _a = this,\n        colPositions = _a.colPositions,\n        rowPositions = _a.rowPositions;\n\n    var col = colPositions.leftToIndex(positionLeft);\n    var row = rowPositions.topToIndex(positionTop);\n\n    if (row != null && col != null) {\n      var cell = this.props.cells[row][col];\n      return {\n        dateProfile: this.props.dateProfile,\n        dateSpan: __assign({\n          range: this.getCellRange(row, col),\n          allDay: true\n        }, cell.extraDateSpan),\n        dayEl: this.getCellEl(row, col),\n        rect: {\n          left: colPositions.lefts[col],\n          right: colPositions.rights[col],\n          top: rowPositions.tops[row],\n          bottom: rowPositions.bottoms[row]\n        },\n        layer: 0\n      };\n    }\n\n    return null;\n  };\n\n  Table.prototype.getCellEl = function (row, col) {\n    return this.rowRefs.currentMap[row].getCellEls()[col]; // TODO: not optimal\n  };\n\n  Table.prototype.getCellRange = function (row, col) {\n    var start = this.props.cells[row][col].date;\n    var end = addDays(start, 1);\n    return {\n      start: start,\n      end: end\n    };\n  };\n\n  return Table;\n}(DateComponent);\n\nfunction isSegAllDay(seg) {\n  return seg.eventRange.def.allDay;\n}\n\nvar DayTableSlicer = function (_super) {\n  __extends(DayTableSlicer, _super);\n\n  function DayTableSlicer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.forceDayIfListItem = true;\n    return _this;\n  }\n\n  DayTableSlicer.prototype.sliceRange = function (dateRange, dayTableModel) {\n    return dayTableModel.sliceRange(dateRange);\n  };\n\n  return DayTableSlicer;\n}(Slicer);\n\nvar DayTable = function (_super) {\n  __extends(DayTable, _super);\n\n  function DayTable() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.slicer = new DayTableSlicer();\n    _this.tableRef = createRef();\n    return _this;\n  }\n\n  DayTable.prototype.render = function () {\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    return createElement(Table, __assign({\n      ref: this.tableRef\n    }, this.slicer.sliceProps(props, props.dateProfile, props.nextDayThreshold, context, props.dayTableModel), {\n      dateProfile: props.dateProfile,\n      cells: props.dayTableModel.cells,\n      colGroupNode: props.colGroupNode,\n      tableMinWidth: props.tableMinWidth,\n      renderRowIntro: props.renderRowIntro,\n      dayMaxEvents: props.dayMaxEvents,\n      dayMaxEventRows: props.dayMaxEventRows,\n      showWeekNumbers: props.showWeekNumbers,\n      expandRows: props.expandRows,\n      headerAlignElRef: props.headerAlignElRef,\n      clientWidth: props.clientWidth,\n      clientHeight: props.clientHeight,\n      forPrint: props.forPrint\n    }));\n  };\n\n  return DayTable;\n}(DateComponent);\n\nvar DayTableView = function (_super) {\n  __extends(DayTableView, _super);\n\n  function DayTableView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.buildDayTableModel = memoize(buildDayTableModel);\n    _this.headerRef = createRef();\n    _this.tableRef = createRef();\n    return _this;\n  }\n\n  DayTableView.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.context,\n        options = _a.options,\n        dateProfileGenerator = _a.dateProfileGenerator;\n    var props = this.props;\n    var dayTableModel = this.buildDayTableModel(props.dateProfile, dateProfileGenerator);\n    var headerContent = options.dayHeaders && createElement(DayHeader, {\n      ref: this.headerRef,\n      dateProfile: props.dateProfile,\n      dates: dayTableModel.headerDates,\n      datesRepDistinctDays: dayTableModel.rowCnt === 1\n    });\n\n    var bodyContent = function bodyContent(contentArg) {\n      return createElement(DayTable, {\n        ref: _this.tableRef,\n        dateProfile: props.dateProfile,\n        dayTableModel: dayTableModel,\n        businessHours: props.businessHours,\n        dateSelection: props.dateSelection,\n        eventStore: props.eventStore,\n        eventUiBases: props.eventUiBases,\n        eventSelection: props.eventSelection,\n        eventDrag: props.eventDrag,\n        eventResize: props.eventResize,\n        nextDayThreshold: options.nextDayThreshold,\n        colGroupNode: contentArg.tableColGroupNode,\n        tableMinWidth: contentArg.tableMinWidth,\n        dayMaxEvents: options.dayMaxEvents,\n        dayMaxEventRows: options.dayMaxEventRows,\n        showWeekNumbers: options.weekNumbers,\n        expandRows: !props.isHeightAuto,\n        headerAlignElRef: _this.headerElRef,\n        clientWidth: contentArg.clientWidth,\n        clientHeight: contentArg.clientHeight,\n        forPrint: props.forPrint\n      });\n    };\n\n    return options.dayMinWidth ? this.renderHScrollLayout(headerContent, bodyContent, dayTableModel.colCnt, options.dayMinWidth) : this.renderSimpleLayout(headerContent, bodyContent);\n  };\n\n  return DayTableView;\n}(TableView);\n\nfunction buildDayTableModel(dateProfile, dateProfileGenerator) {\n  var daySeries = new DaySeriesModel(dateProfile.renderRange, dateProfileGenerator);\n  return new DayTableModel(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar TableDateProfileGenerator = function (_super) {\n  __extends(TableDateProfileGenerator, _super);\n\n  function TableDateProfileGenerator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  } // Computes the date range that will be rendered.\n\n\n  TableDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n    var dateEnv = this.props.dateEnv;\n\n    var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n\n    var start = renderRange.start;\n    var end = renderRange.end;\n    var endOfWeek; // year and month views should be aligned with weeks. this is already done for week\n\n    if (/^(year|month)$/.test(currentRangeUnit)) {\n      start = dateEnv.startOfWeek(start); // make end-of-week if not already\n\n      endOfWeek = dateEnv.startOfWeek(end);\n\n      if (endOfWeek.valueOf() !== end.valueOf()) {\n        end = addWeeks(endOfWeek, 1);\n      }\n    } // ensure 6 weeks\n\n\n    if (this.props.monthMode && this.props.fixedWeekCount) {\n      var rowCnt = Math.ceil( // could be partial weeks due to hiddenDays\n      diffWeeks(start, end));\n      end = addWeeks(end, 6 - rowCnt);\n    }\n\n    return {\n      start: start,\n      end: end\n    };\n  };\n\n  return TableDateProfileGenerator;\n}(DateProfileGenerator);\n\nvar main = createPlugin({\n  initialView: 'dayGridMonth',\n  views: {\n    dayGrid: {\n      component: DayTableView,\n      dateProfileGeneratorClass: TableDateProfileGenerator\n    },\n    dayGridDay: {\n      type: 'dayGrid',\n      duration: {\n        days: 1\n      }\n    },\n    dayGridWeek: {\n      type: 'dayGrid',\n      duration: {\n        weeks: 1\n      }\n    },\n    dayGridMonth: {\n      type: 'dayGrid',\n      duration: {\n        months: 1\n      },\n      monthMode: true,\n      fixedWeekCount: true\n    }\n  }\n});\nexport default main;\nexport { DayTableView as DayGridView, DayTable, DayTableSlicer, Table, TableView, buildDayTableModel }; //# sourceMappingURL=main.js.map","map":{"version":3,"sources":["/Users/mac/sr-manager/srmanager-full/node_modules/@fullcalendar/daygrid/main.js"],"names":["createRef","getStickyHeaderDates","createElement","ViewRoot","SimpleScrollGrid","getStickyFooterScrollbar","renderScrollShim","DateComponent","buildNavLinkData","DayCellContent","Fragment","BaseComponent","createFormatter","StandardEvent","buildSegTimeText","EventRoot","memoize","MoreLinkRoot","getSegMeta","setRef","DayCellRoot","WeekNumberRoot","buildEntryKey","SegHierarchy","intersectRanges","addDays","RefMap","sortEventSegs","isPropsEqual","buildEventRangeKey","BgEvent","renderFill","PositionCache","NowTimer","Slicer","DayHeader","DaySeriesModel","DayTableModel","addWeeks","diffWeeks","DateProfileGenerator","createPlugin","__extends","__assign","__spreadArray","TableView","_super","_this","apply","arguments","headerElRef","prototype","renderSimpleLayout","headerRowContent","bodyContent","_a","props","context","sections","stickyHeaderDates","options","push","type","key","isSticky","chunk","elRef","tableClassName","rowContent","liquid","content","viewSpec","rootElRef","classNames","ref","className","concat","join","isHeightAuto","forPrint","collapsibleWidth","cols","renderHScrollLayout","colCnt","dayMinWidth","ScrollGrid","pluginHooks","scrollGridImpl","Error","stickyFooterScrollbar","chunks","colGroups","span","minWidth","splitSegsByRow","segs","rowCnt","byRow","i","_i","segs_1","length","seg","row","splitSegsByFirstCol","byCol","segs_2","firstCol","splitInteractionByRow","ui","affectedInstances","isEvent","TableCellTop","render","navLinkAttrs","navLinks","date","tabIndex","dateProfile","todayRange","showDayNumber","extraHookProps","defaultContent","renderTopInner","innerElRef","innerContent","forceDayTop","dayNumberText","DEFAULT_TABLE_EVENT_TIME_FORMAT","hour","minute","omitZeroMinute","meridiem","hasListItemDisplay","display","eventRange","def","allDay","lastCol","isStart","isEnd","TableBlockEvent","extraClassNames","defaultTimeFormat","defaultDisplayEventEnd","disableResizing","TableListItemEvent","timeFormat","eventTimeFormat","timeText","renderInnerContent","isDragging","isResizing","isDateSelecting","isSelected","isPast","isFuture","isToday","getSegAnchorAttrs","innerProps","style","borderColor","backgroundColor","event","title","url","href","TableCellMoreLink","compileSegs","singlePlacements","allSegs","invisibleSegs","allDayDate","moreCnt","hiddenSegs","alignmentElRef","alignGridTop","extraDateSpan","popoverContent","isForcedInvisible","eventDrag","eventResize","map","instanceId","instance","visibility","eventSelection","handleClick","onClick","singlePlacements_1","placement","isVisible","DEFAULT_WEEK_NUM_FORMAT","week","TableCell","handleRootEl","el","dayElRef","dayClassNames","rootDataAttrs","isDisabled","extraDataAttrs","showWeekNumber","defaultFormat","weekElRef","weekClassNames","fgContentElRef","fgContent","marginTop","moreMarginTop","bgContent","computeFgSegPlacement","dayMaxEvents","dayMaxEventRows","strictOrder","eventInstanceHeights","maxContentHeight","cells","hierarchy","DayGridSegHierarchy","allowReslicing","maxCoord","hiddenConsumes","maxStackCnt","segInputs","unknownHeightSegs","eventHeight","index","spanStart","spanEnd","thickness","hiddenEntries","addSegs","segRects","toRects","placeRects","singleColPlacements","multiColPlacements","leftoverMargins","moreCnts","moreMarginTops","unknownHeightSegs_1","isAbsolute","absoluteTop","col","resliceSeg","_b","hiddenEntries_1","hiddenEntry","segInput","allRects","rectsByEachCol","groupRectsByEachCol","rects","currentHeight","currentMarginTop","rects_1","rect","levelCoord","multiPlacements","rects_2","isFirstCol","rects_3","origRange","range","slicedRange","start","end","durationEditable","valueOf","forceHidden","call","entriesByLevel","excludeHidden","entry","level","filter","handleInvalidInsertion","insertion","nextLevel","lateral","lateralStart","lateralEnd","leadingEntry","placeholderEntry","Math","max","min","placeholderEntryId","splitEntry","TableRow","cellElRefs","frameElRefs","fgElRefs","segHarnessRefs","state","framePositions","businessHoursByCol","businessHourSegs","bgEventSegsByCol","bgEventSegs","highlightSegsByCol","getHighlightSegs","mirrorSegsByCol","getMirrorSegs","fgEventSegs","eventOrder","eventOrderStrict","renderIntro","cell","normalFgNodes","renderFgSegs","mirrorFgNodes","buildMirrorPlacements","Boolean","showDayNumbers","showWeekNumbers","renderFillSegs","componentDidMount","updateSizing","componentDidUpdate","prevProps","prevState","currentProps","dateSelectionSegs","segPlacements","isMirror","nodes","segPlacements_1","left","right","isRtl","lefts","rights","top","fillType","leftRightCss","isExternalSizingChange","clientWidth","frameEls","currentMap","originEl","current","setState","limitByContentHeight","queryEventInstanceHeights","computeMaxContentHeight","segElMap","height","round","getBoundingClientRect","split","firstKey","cellEl","fcContainerEl","bottom","getCellEls","elMap","addStateEquality","mirrorSegs","colPlacements","topsByInstanceId","buildAbsoluteTopHash","colPlacements_1","placements","placements_1","Table","splitBusinessHourSegs","splitBgEventSegs","splitFgEventSegs","splitDateSelectionSegs","splitEventDrag","splitEventResize","rowRefs","rootEl","registerInteractiveComponent","isHitComboAllowed","unregisterInteractiveComponent","expandRows","businessHourSegsByRow","bgEventSegsByRow","fgEventSegsByRow","dateSelectionSegsByRow","eventDragByRow","eventResizeByRow","limitViaBalanced","width","tableMinWidth","unit","nowDate","clientHeight","colGroupNode","toISOString","renderRowIntro","isSegAllDay","prepareHits","rowPositions","collect","rowObj","colPositions","queryHit","positionLeft","positionTop","leftToIndex","topToIndex","dateSpan","getCellRange","dayEl","getCellEl","tops","bottoms","layer","DayTableSlicer","forceDayIfListItem","sliceRange","dateRange","dayTableModel","DayTable","slicer","tableRef","sliceProps","nextDayThreshold","headerAlignElRef","DayTableView","buildDayTableModel","headerRef","dateProfileGenerator","headerContent","dayHeaders","dates","headerDates","datesRepDistinctDays","contentArg","businessHours","dateSelection","eventStore","eventUiBases","tableColGroupNode","weekNumbers","daySeries","renderRange","test","currentRangeUnit","TableDateProfileGenerator","buildRenderRange","currentRange","isRangeAllDay","dateEnv","endOfWeek","startOfWeek","monthMode","fixedWeekCount","ceil","main","initialView","views","dayGrid","component","dateProfileGeneratorClass","dayGridDay","duration","days","dayGridWeek","weeks","dayGridMonth","months","DayGridView"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,OAAO,YAAP;AAEA,SAASA,SAAT,EAAoBC,oBAApB,EAA0CC,aAA1C,EAAyDC,QAAzD,EAAmEC,gBAAnE,EAAqFC,wBAArF,EAA+GC,gBAA/G,EAAiIC,aAAjI,EAAgJC,gBAAhJ,EAAkKC,cAAlK,EAAkLC,QAAlL,EAA4LC,aAA5L,EAA2MC,eAA3M,EAA4NC,aAA5N,EAA2OC,gBAA3O,EAA6PC,SAA7P,EAAwQC,OAAxQ,EAAiRC,YAAjR,EAA+RC,UAA/R,EAA2SC,MAA3S,EAAmTC,WAAnT,EAAgUC,cAAhU,EAAgVC,aAAhV,EAA+VC,YAA/V,EAA6WC,eAA7W,EAA8XC,OAA9X,EAAuYC,MAAvY,EAA+YC,aAA/Y,EAA8ZC,YAA9Z,EAA4aC,kBAA5a,EAAgcC,OAAhc,EAAycC,UAAzc,EAAqdC,aAArd,EAAoeC,QAApe,EAA8eC,MAA9e,EAAsfC,SAAtf,EAAigBC,cAAjgB,EAAihBC,aAAjhB,EAAgiBC,QAAhiB,EAA0iBC,SAA1iB,EAAqjBC,oBAArjB,EAA2kBC,YAA3kB,QAA+lB,sBAA/lB;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,aAA9B,QAAmD,OAAnD;AAEA;AACA;AACA;AACA;;AACA,IAAIC,SAAS,GAAkB,UAAUC,MAAV,EAAkB;AAC7CJ,EAAAA,SAAS,CAACG,SAAD,EAAYC,MAAZ,CAAT;;AACA,WAASD,SAAT,GAAqB;AACjB,QAAIE,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AACAF,IAAAA,KAAK,CAACG,WAAN,GAAoBlD,SAAS,EAA7B;AACA,WAAO+C,KAAP;AACH;;AACDF,EAAAA,SAAS,CAACM,SAAV,CAAoBC,kBAApB,GAAyC,UAAUC,gBAAV,EAA4BC,WAA5B,EAAyC;AAC9E,QAAIC,EAAE,GAAG,IAAT;AAAA,QAAeC,KAAK,GAAGD,EAAE,CAACC,KAA1B;AAAA,QAAiCC,OAAO,GAAGF,EAAE,CAACE,OAA9C;;AACA,QAAIC,QAAQ,GAAG,EAAf;AACA,QAAIC,iBAAiB,GAAG1D,oBAAoB,CAACwD,OAAO,CAACG,OAAT,CAA5C;;AACA,QAAIP,gBAAJ,EAAsB;AAClBK,MAAAA,QAAQ,CAACG,IAAT,CAAc;AACVC,QAAAA,IAAI,EAAE,QADI;AAEVC,QAAAA,GAAG,EAAE,QAFK;AAGVC,QAAAA,QAAQ,EAAEL,iBAHA;AAIVM,QAAAA,KAAK,EAAE;AACHC,UAAAA,KAAK,EAAE,KAAKhB,WADT;AAEHiB,UAAAA,cAAc,EAAE,eAFb;AAGHC,UAAAA,UAAU,EAAEf;AAHT;AAJG,OAAd;AAUH;;AACDK,IAAAA,QAAQ,CAACG,IAAT,CAAc;AACVC,MAAAA,IAAI,EAAE,MADI;AAEVC,MAAAA,GAAG,EAAE,MAFK;AAGVM,MAAAA,MAAM,EAAE,IAHE;AAIVJ,MAAAA,KAAK,EAAE;AAAEK,QAAAA,OAAO,EAAEhB;AAAX;AAJG,KAAd;AAMA,WAAQpD,aAAa,CAACC,QAAD,EAAW;AAAEoE,MAAAA,QAAQ,EAAEd,OAAO,CAACc;AAApB,KAAX,EAA2C,UAAUC,SAAV,EAAqBC,UAArB,EAAiC;AAAE,aAAQvE,aAAa,CAAC,KAAD,EAAQ;AAAEwE,QAAAA,GAAG,EAAEF,SAAP;AAAkBG,QAAAA,SAAS,EAAE,CAAC,YAAD,EAAeC,MAAf,CAAsBH,UAAtB,EAAkCI,IAAlC,CAAuC,GAAvC;AAA7B,OAAR,EACpH3E,aAAa,CAACE,gBAAD,EAAmB;AAAEiE,QAAAA,MAAM,EAAE,CAACb,KAAK,CAACsB,YAAP,IAAuB,CAACtB,KAAK,CAACuB,QAAxC;AAAkDC,QAAAA,gBAAgB,EAAExB,KAAK,CAACuB,QAA1E;AAAoFE,QAAAA,IAAI,EAAE;AAAG;AAA7F;AAAyHvB,QAAAA,QAAQ,EAAEA;AAAnI,OAAnB,CADuG,CAArB;AACoF,KADlK,CAArB;AAEH,GAxBD;;AAyBAb,EAAAA,SAAS,CAACM,SAAV,CAAoB+B,mBAApB,GAA0C,UAAU7B,gBAAV,EAA4BC,WAA5B,EAAyC6B,MAAzC,EAAiDC,WAAjD,EAA8D;AACpG,QAAIC,UAAU,GAAG,KAAK5B,OAAL,CAAa6B,WAAb,CAAyBC,cAA1C;;AACA,QAAI,CAACF,UAAL,EAAiB;AACb,YAAM,IAAIG,KAAJ,CAAU,8BAAV,CAAN;AACH;;AACD,QAAIjC,EAAE,GAAG,IAAT;AAAA,QAAeC,KAAK,GAAGD,EAAE,CAACC,KAA1B;AAAA,QAAiCC,OAAO,GAAGF,EAAE,CAACE,OAA9C;;AACA,QAAIE,iBAAiB,GAAG,CAACH,KAAK,CAACuB,QAAP,IAAmB9E,oBAAoB,CAACwD,OAAO,CAACG,OAAT,CAA/D;AACA,QAAI6B,qBAAqB,GAAG,CAACjC,KAAK,CAACuB,QAAP,IAAmB1E,wBAAwB,CAACoD,OAAO,CAACG,OAAT,CAAvE;AACA,QAAIF,QAAQ,GAAG,EAAf;;AACA,QAAIL,gBAAJ,EAAsB;AAClBK,MAAAA,QAAQ,CAACG,IAAT,CAAc;AACVC,QAAAA,IAAI,EAAE,QADI;AAEVC,QAAAA,GAAG,EAAE,QAFK;AAGVC,QAAAA,QAAQ,EAAEL,iBAHA;AAIV+B,QAAAA,MAAM,EAAE,CAAC;AACD3B,UAAAA,GAAG,EAAE,MADJ;AAEDG,UAAAA,KAAK,EAAE,KAAKhB,WAFX;AAGDiB,UAAAA,cAAc,EAAE,eAHf;AAIDC,UAAAA,UAAU,EAAEf;AAJX,SAAD;AAJE,OAAd;AAWH;;AACDK,IAAAA,QAAQ,CAACG,IAAT,CAAc;AACVC,MAAAA,IAAI,EAAE,MADI;AAEVC,MAAAA,GAAG,EAAE,MAFK;AAGVM,MAAAA,MAAM,EAAE,IAHE;AAIVqB,MAAAA,MAAM,EAAE,CAAC;AACD3B,QAAAA,GAAG,EAAE,MADJ;AAEDO,QAAAA,OAAO,EAAEhB;AAFR,OAAD;AAJE,KAAd;;AASA,QAAImC,qBAAJ,EAA2B;AACvB/B,MAAAA,QAAQ,CAACG,IAAT,CAAc;AACVC,QAAAA,IAAI,EAAE,QADI;AAEVC,QAAAA,GAAG,EAAE,QAFK;AAGVC,QAAAA,QAAQ,EAAE,IAHA;AAIV0B,QAAAA,MAAM,EAAE,CAAC;AACD3B,UAAAA,GAAG,EAAE,MADJ;AAEDO,UAAAA,OAAO,EAAEhE;AAFR,SAAD;AAJE,OAAd;AASH;;AACD,WAAQJ,aAAa,CAACC,QAAD,EAAW;AAAEoE,MAAAA,QAAQ,EAAEd,OAAO,CAACc;AAApB,KAAX,EAA2C,UAAUC,SAAV,EAAqBC,UAArB,EAAiC;AAAE,aAAQvE,aAAa,CAAC,KAAD,EAAQ;AAAEwE,QAAAA,GAAG,EAAEF,SAAP;AAAkBG,QAAAA,SAAS,EAAE,CAAC,YAAD,EAAeC,MAAf,CAAsBH,UAAtB,EAAkCI,IAAlC,CAAuC,GAAvC;AAA7B,OAAR,EACpH3E,aAAa,CAACmF,UAAD,EAAa;AAAEhB,QAAAA,MAAM,EAAE,CAACb,KAAK,CAACsB,YAAP,IAAuB,CAACtB,KAAK,CAACuB,QAAxC;AAAkDC,QAAAA,gBAAgB,EAAExB,KAAK,CAACuB,QAA1E;AAAoFY,QAAAA,SAAS,EAAE,CAAC;AAAEV,UAAAA,IAAI,EAAE,CAAC;AAAEW,YAAAA,IAAI,EAAET,MAAR;AAAgBU,YAAAA,QAAQ,EAAET;AAA1B,WAAD;AAAR,SAAD,CAA/F;AAAsJ1B,QAAAA,QAAQ,EAAEA;AAAhK,OAAb,CADuG,CAArB;AAC2G,KADzL,CAArB;AAEH,GA5CD;;AA6CA,SAAOb,SAAP;AACH,CA9E8B,CA8E7BtC,aA9E6B,CAA/B;;AAgFA,SAASuF,cAAT,CAAwBC,IAAxB,EAA8BC,MAA9B,EAAsC;AAClC,MAAIC,KAAK,GAAG,EAAZ;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAApB,EAA4BE,CAAC,IAAI,CAAjC,EAAoC;AAChCD,IAAAA,KAAK,CAACC,CAAD,CAAL,GAAW,EAAX;AACH;;AACD,OAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,MAAM,GAAGL,IAA1B,EAAgCI,EAAE,GAAGC,MAAM,CAACC,MAA5C,EAAoDF,EAAE,EAAtD,EAA0D;AACtD,QAAIG,GAAG,GAAGF,MAAM,CAACD,EAAD,CAAhB;AACAF,IAAAA,KAAK,CAACK,GAAG,CAACC,GAAL,CAAL,CAAe1C,IAAf,CAAoByC,GAApB;AACH;;AACD,SAAOL,KAAP;AACH;;AACD,SAASO,mBAAT,CAA6BT,IAA7B,EAAmCZ,MAAnC,EAA2C;AACvC,MAAIsB,KAAK,GAAG,EAAZ;;AACA,OAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGf,MAApB,EAA4Be,CAAC,IAAI,CAAjC,EAAoC;AAChCO,IAAAA,KAAK,CAACP,CAAD,CAAL,GAAW,EAAX;AACH;;AACD,OAAK,IAAIC,EAAE,GAAG,CAAT,EAAYO,MAAM,GAAGX,IAA1B,EAAgCI,EAAE,GAAGO,MAAM,CAACL,MAA5C,EAAoDF,EAAE,EAAtD,EAA0D;AACtD,QAAIG,GAAG,GAAGI,MAAM,CAACP,EAAD,CAAhB;AACAM,IAAAA,KAAK,CAACH,GAAG,CAACK,QAAL,CAAL,CAAoB9C,IAApB,CAAyByC,GAAzB;AACH;;AACD,SAAOG,KAAP;AACH;;AACD,SAASG,qBAAT,CAA+BC,EAA/B,EAAmCb,MAAnC,EAA2C;AACvC,MAAIC,KAAK,GAAG,EAAZ;;AACA,MAAI,CAACY,EAAL,EAAS;AACL,SAAK,IAAIX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAApB,EAA4BE,CAAC,IAAI,CAAjC,EAAoC;AAChCD,MAAAA,KAAK,CAACC,CAAD,CAAL,GAAW,IAAX;AACH;AACJ,GAJD,MAKK;AACD,SAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAApB,EAA4BE,CAAC,IAAI,CAAjC,EAAoC;AAChCD,MAAAA,KAAK,CAACC,CAAD,CAAL,GAAW;AACPY,QAAAA,iBAAiB,EAAED,EAAE,CAACC,iBADf;AAEPC,QAAAA,OAAO,EAAEF,EAAE,CAACE,OAFL;AAGPhB,QAAAA,IAAI,EAAE;AAHC,OAAX;AAKH;;AACD,SAAK,IAAII,EAAE,GAAG,CAAT,EAAY5C,EAAE,GAAGsD,EAAE,CAACd,IAAzB,EAA+BI,EAAE,GAAG5C,EAAE,CAAC8C,MAAvC,EAA+CF,EAAE,EAAjD,EAAqD;AACjD,UAAIG,GAAG,GAAG/C,EAAE,CAAC4C,EAAD,CAAZ;AACAF,MAAAA,KAAK,CAACK,GAAG,CAACC,GAAL,CAAL,CAAeR,IAAf,CAAoBlC,IAApB,CAAyByC,GAAzB;AACH;AACJ;;AACD,SAAOL,KAAP;AACH;;AAED,IAAIe,YAAY,GAAkB,UAAUlE,MAAV,EAAkB;AAChDJ,EAAAA,SAAS,CAACsE,YAAD,EAAelE,MAAf,CAAT;;AACA,WAASkE,YAAT,GAAwB;AACpB,WAAOlE,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACD+D,EAAAA,YAAY,CAAC7D,SAAb,CAAuB8D,MAAvB,GAAgC,YAAY;AACxC,QAAIzD,KAAK,GAAG,KAAKA,KAAjB;AACA,QAAI0D,YAAY,GAAG,KAAKzD,OAAL,CAAaG,OAAb,CAAqBuD,QAArB,GACb;AAAE,sBAAgB3G,gBAAgB,CAACgD,KAAK,CAAC4D,IAAP,CAAlC;AAAgDC,MAAAA,QAAQ,EAAE;AAA1D,KADa,GAEb,EAFN;AAGA,WAAQnH,aAAa,CAACO,cAAD,EAAiB;AAAE2G,MAAAA,IAAI,EAAE5D,KAAK,CAAC4D,IAAd;AAAoBE,MAAAA,WAAW,EAAE9D,KAAK,CAAC8D,WAAvC;AAAoDC,MAAAA,UAAU,EAAE/D,KAAK,CAAC+D,UAAtE;AAAkFC,MAAAA,aAAa,EAAEhE,KAAK,CAACgE,aAAvG;AAAsHC,MAAAA,cAAc,EAAEjE,KAAK,CAACiE,cAA5I;AAA4JC,MAAAA,cAAc,EAAEC;AAA5K,KAAjB,EAA+M,UAAUC,UAAV,EAAsBC,YAAtB,EAAoC;AAAE,aAAQ,CAACA,YAAY,IAAIrE,KAAK,CAACsE,WAAvB,KAAwC5H,aAAa,CAAC,KAAD,EAAQ;AAAEyE,QAAAA,SAAS,EAAE,oBAAb;AAAmCD,QAAAA,GAAG,EAAEkD;AAAxC,OAAR,EACnU1H,aAAa,CAAC,GAAD,EAAMyC,QAAQ,CAAC;AAAEgC,QAAAA,SAAS,EAAE;AAAb,OAAD,EAAyCuC,YAAzC,CAAd,EAAsEW,YAAY,IAAI3H,aAAa,CAACQ,QAAD,EAAW,IAAX,EAAiB,MAAjB,CAAnG,CADsT,CAA7D;AACrH,KADhI,CAArB;AAEH,GAPD;;AAQA,SAAOsG,YAAP;AACH,CAdiC,CAchCrG,aAdgC,CAAlC;;AAeA,SAASgH,cAAT,CAAwBnE,KAAxB,EAA+B;AAC3B,SAAOA,KAAK,CAACuE,aAAb;AACH;;AAED,IAAIC,+BAA+B,GAAGpH,eAAe,CAAC;AAClDqH,EAAAA,IAAI,EAAE,SAD4C;AAElDC,EAAAA,MAAM,EAAE,SAF0C;AAGlDC,EAAAA,cAAc,EAAE,IAHkC;AAIlDC,EAAAA,QAAQ,EAAE;AAJwC,CAAD,CAArD;;AAMA,SAASC,kBAAT,CAA4B/B,GAA5B,EAAiC;AAC7B,MAAIgC,OAAO,GAAGhC,GAAG,CAACiC,UAAJ,CAAe1B,EAAf,CAAkByB,OAAhC;AACA,SAAOA,OAAO,KAAK,WAAZ,IAA4BA,OAAO,KAAK,MAAZ,IAC/B,CAAChC,GAAG,CAACiC,UAAJ,CAAeC,GAAf,CAAmBC,MADW,IAE/BnC,GAAG,CAACK,QAAJ,KAAiBL,GAAG,CAACoC,OAFU,IAEC;AAChCpC,EAAAA,GAAG,CAACqC,OAH2B,IAGhB;AACfrC,EAAAA,GAAG,CAACsC,KAJD,CAIO;AAJd;AAMH;;AAED,IAAIC,eAAe,GAAkB,UAAU/F,MAAV,EAAkB;AACnDJ,EAAAA,SAAS,CAACmG,eAAD,EAAkB/F,MAAlB,CAAT;;AACA,WAAS+F,eAAT,GAA2B;AACvB,WAAO/F,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACD4F,EAAAA,eAAe,CAAC1F,SAAhB,CAA0B8D,MAA1B,GAAmC,YAAY;AAC3C,QAAIzD,KAAK,GAAG,KAAKA,KAAjB;AACA,WAAQtD,aAAa,CAACW,aAAD,EAAgB8B,QAAQ,CAAC,EAAD,EAAKa,KAAL,EAAY;AAAEsF,MAAAA,eAAe,EAAE,CAAC,kBAAD,EAAqB,wBAArB,EAA+C,YAA/C,CAAnB;AAAiFC,MAAAA,iBAAiB,EAAEf,+BAApG;AAAqIgB,MAAAA,sBAAsB,EAAExF,KAAK,CAACwF,sBAAnK;AAA2LC,MAAAA,eAAe,EAAE,CAACzF,KAAK,CAAC8C,GAAN,CAAUiC,UAAV,CAAqBC,GAArB,CAAyBC;AAAtO,KAAZ,CAAxB,CAArB;AACH,GAHD;;AAIA,SAAOI,eAAP;AACH,CAVoC,CAUnClI,aAVmC,CAArC;;AAYA,IAAIuI,kBAAkB,GAAkB,UAAUpG,MAAV,EAAkB;AACtDJ,EAAAA,SAAS,CAACwG,kBAAD,EAAqBpG,MAArB,CAAT;;AACA,WAASoG,kBAAT,GAA8B;AAC1B,WAAOpG,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDiG,EAAAA,kBAAkB,CAAC/F,SAAnB,CAA6B8D,MAA7B,GAAsC,YAAY;AAC9C,QAAI1D,EAAE,GAAG,IAAT;AAAA,QAAeC,KAAK,GAAGD,EAAE,CAACC,KAA1B;AAAA,QAAiCC,OAAO,GAAGF,EAAE,CAACE,OAA9C;;AACA,QAAI0F,UAAU,GAAG1F,OAAO,CAACG,OAAR,CAAgBwF,eAAhB,IAAmCpB,+BAApD;AACA,QAAIqB,QAAQ,GAAGvI,gBAAgB,CAAC0C,KAAK,CAAC8C,GAAP,EAAY6C,UAAZ,EAAwB1F,OAAxB,EAAiC,IAAjC,EAAuCD,KAAK,CAACwF,sBAA7C,CAA/B;AACA,WAAQ9I,aAAa,CAACa,SAAD,EAAY;AAAEuF,MAAAA,GAAG,EAAE9C,KAAK,CAAC8C,GAAb;AAAkB+C,MAAAA,QAAQ,EAAEA,QAA5B;AAAsC3B,MAAAA,cAAc,EAAE4B,kBAAtD;AAA0EC,MAAAA,UAAU,EAAE/F,KAAK,CAAC+F,UAA5F;AAAwGC,MAAAA,UAAU,EAAE,KAApH;AAA2HC,MAAAA,eAAe,EAAE,KAA5I;AAAmJC,MAAAA,UAAU,EAAElG,KAAK,CAACkG,UAArK;AAAiLC,MAAAA,MAAM,EAAEnG,KAAK,CAACmG,MAA/L;AAAuMC,MAAAA,QAAQ,EAAEpG,KAAK,CAACoG,QAAvN;AAAiOC,MAAAA,OAAO,EAAErG,KAAK,CAACqG;AAAhP,KAAZ,EAAuQ,UAAUrF,SAAV,EAAqBC,UAArB,EAAiCmD,UAAjC,EAA6CC,YAA7C,EAA2D;AAAE,aAAS;AAClW3H,QAAAA,aAAa,CAAC,GAAD,EAAMyC,QAAQ,CAAC;AAAEgC,UAAAA,SAAS,EAAE,CAAC,kBAAD,EAAqB,sBAArB,EAA6CC,MAA7C,CAAoDH,UAApD,EAAgEI,IAAhE,CAAqE,GAArE,CAAb;AAAwFH,UAAAA,GAAG,EAAEF;AAA7F,SAAD,EAA2GsF,iBAAiB,CAACtG,KAAK,CAAC8C,GAAP,CAA5H,CAAd,EAAwJuB,YAAxJ;AAD4U;AACnK,KADjK,CAArB;AAEH,GAND;;AAOA,SAAOqB,kBAAP;AACH,CAbuC,CAatCvI,aAbsC,CAAxC;;AAcA,SAAS2I,kBAAT,CAA4BS,UAA5B,EAAwC;AACpC,SAAQ7J,aAAa,CAACQ,QAAD,EAAW,IAAX,EACjBR,aAAa,CAAC,KAAD,EAAQ;AAAEyE,IAAAA,SAAS,EAAE,sBAAb;AAAqCqF,IAAAA,KAAK,EAAE;AAAEC,MAAAA,WAAW,EAAEF,UAAU,CAACE,WAAX,IAA0BF,UAAU,CAACG;AAApD;AAA5C,GAAR,CADI,EAEjBH,UAAU,CAACV,QAAX,IAAwBnJ,aAAa,CAAC,KAAD,EAAQ;AAAEyE,IAAAA,SAAS,EAAE;AAAb,GAAR,EAAwCoF,UAAU,CAACV,QAAnD,CAFpB,EAGjBnJ,aAAa,CAAC,KAAD,EAAQ;AAAEyE,IAAAA,SAAS,EAAE;AAAb,GAAR,EAAyCoF,UAAU,CAACI,KAAX,CAAiBC,KAAjB,IAA0BlK,aAAa,CAACQ,QAAD,EAAW,IAAX,EAAiB,MAAjB,CAAhF,CAHI,CAArB;AAIH;;AACD,SAASoJ,iBAAT,CAA2BxD,GAA3B,EAAgC;AAC5B,MAAI+D,GAAG,GAAG/D,GAAG,CAACiC,UAAJ,CAAeC,GAAf,CAAmB6B,GAA7B;AACA,SAAOA,GAAG,GAAG;AAAEC,IAAAA,IAAI,EAAED;AAAR,GAAH,GAAmB,EAA7B;AACH;;AAED,IAAIE,iBAAiB,GAAkB,UAAUzH,MAAV,EAAkB;AACrDJ,EAAAA,SAAS,CAAC6H,iBAAD,EAAoBzH,MAApB,CAAT;;AACA,WAASyH,iBAAT,GAA6B;AACzB,QAAIxH,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AACAF,IAAAA,KAAK,CAACyH,WAAN,GAAoBxJ,OAAO,CAACwJ,WAAD,CAA3B;AACA,WAAOzH,KAAP;AACH;;AACDwH,EAAAA,iBAAiB,CAACpH,SAAlB,CAA4B8D,MAA5B,GAAqC,YAAY;AAC7C,QAAIzD,KAAK,GAAG,KAAKA,KAAjB;;AACA,QAAID,EAAE,GAAG,KAAKiH,WAAL,CAAiBhH,KAAK,CAACiH,gBAAvB,CAAT;AAAA,QAAmDC,OAAO,GAAGnH,EAAE,CAACmH,OAAhE;AAAA,QAAyEC,aAAa,GAAGpH,EAAE,CAACoH,aAA5F;;AACA,WAAQzK,aAAa,CAACe,YAAD,EAAe;AAAEqG,MAAAA,WAAW,EAAE9D,KAAK,CAAC8D,WAArB;AAAkCC,MAAAA,UAAU,EAAE/D,KAAK,CAAC+D,UAApD;AAAgEqD,MAAAA,UAAU,EAAEpH,KAAK,CAACoH,UAAlF;AAA8FC,MAAAA,OAAO,EAAErH,KAAK,CAACqH,OAA7G;AAAsHH,MAAAA,OAAO,EAAEA,OAA/H;AAAwII,MAAAA,UAAU,EAAEH,aAApJ;AAAmKI,MAAAA,cAAc,EAAEvH,KAAK,CAACuH,cAAzL;AAAyMC,MAAAA,YAAY,EAAExH,KAAK,CAACwH,YAA7N;AAA2OC,MAAAA,aAAa,EAAEzH,KAAK,CAACyH,aAAhQ;AAA+QC,MAAAA,cAAc,EAAE,0BAAY;AACvU,YAAIC,iBAAiB,GAAG,CAAC3H,KAAK,CAAC4H,SAAN,GAAkB5H,KAAK,CAAC4H,SAAN,CAAgBtE,iBAAlC,GAAsD,IAAvD,MACnBtD,KAAK,CAAC6H,WAAN,GAAoB7H,KAAK,CAAC6H,WAAN,CAAkBvE,iBAAtC,GAA0D,IADvC,KAEpB,EAFJ;AAGA,eAAQ5G,aAAa,CAACQ,QAAD,EAAW,IAAX,EAAiBgK,OAAO,CAACY,GAAR,CAAY,UAAUhF,GAAV,EAAe;AAC7D,cAAIiF,UAAU,GAAGjF,GAAG,CAACiC,UAAJ,CAAeiD,QAAf,CAAwBD,UAAzC;AACA,iBAAQrL,aAAa,CAAC,KAAD,EAAQ;AAAEyE,YAAAA,SAAS,EAAE,0BAAb;AAAyCZ,YAAAA,GAAG,EAAEwH,UAA9C;AAA0DvB,YAAAA,KAAK,EAAE;AACtFyB,cAAAA,UAAU,EAAEN,iBAAiB,CAACI,UAAD,CAAjB,GAAgC,QAAhC,GAA2C;AAD+B;AAAjE,WAAR,EAEZlD,kBAAkB,CAAC/B,GAAD,CAAlB,GAA2BpG,aAAa,CAACgJ,kBAAD,EAAqBvG,QAAQ,CAAC;AAAE2D,YAAAA,GAAG,EAAEA,GAAP;AAAYiD,YAAAA,UAAU,EAAE,KAAxB;AAA+BG,YAAAA,UAAU,EAAE6B,UAAU,KAAK/H,KAAK,CAACkI,cAAhE;AAAgF1C,YAAAA,sBAAsB,EAAE;AAAxG,WAAD,EAAkH9H,UAAU,CAACoF,GAAD,EAAM9C,KAAK,CAAC+D,UAAZ,CAA5H,CAA7B,CAAxC,GAA+NrH,aAAa,CAAC2I,eAAD,EAAkBlG,QAAQ,CAAC;AAAE2D,YAAAA,GAAG,EAAEA,GAAP;AAAYiD,YAAAA,UAAU,EAAE,KAAxB;AAA+BC,YAAAA,UAAU,EAAE,KAA3C;AAAkDC,YAAAA,eAAe,EAAE,KAAnE;AAA0EC,YAAAA,UAAU,EAAE6B,UAAU,KAAK/H,KAAK,CAACkI,cAA3G;AAA2H1C,YAAAA,sBAAsB,EAAE;AAAnJ,WAAD,EAA6J9H,UAAU,CAACoF,GAAD,EAAM9C,KAAK,CAAC+D,UAAZ,CAAvK,CAA1B,CAFhO,CAArB;AAGH,SALqC,CAAjB,CAArB;AAMH;AAV+B,KAAf,EAUZ,UAAU/C,SAAV,EAAqBC,UAArB,EAAiCmD,UAAjC,EAA6CC,YAA7C,EAA2D8D,WAA3D,EAAwE;AAAE,aAAQzL,aAAa,CAAC,GAAD,EAAM;AAAEwE,QAAAA,GAAG,EAAEF,SAAP;AAAkBG,QAAAA,SAAS,EAAE,CAAC,sBAAD,EAAyBC,MAAzB,CAAgCH,UAAhC,EAA4CI,IAA5C,CAAiD,GAAjD,CAA7B;AAAoF+G,QAAAA,OAAO,EAAED;AAA7F,OAAN,EAAkH9D,YAAlH,CAArB;AAAwJ,KAVtN,CAArB;AAWH,GAdD;;AAeA,SAAO0C,iBAAP;AACH,CAvBsC,CAuBrC5J,aAvBqC,CAAvC;;AAwBA,SAAS6J,WAAT,CAAqBC,gBAArB,EAAuC;AACnC,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,aAAa,GAAG,EAApB;;AACA,OAAK,IAAIxE,EAAE,GAAG,CAAT,EAAY0F,kBAAkB,GAAGpB,gBAAtC,EAAwDtE,EAAE,GAAG0F,kBAAkB,CAACxF,MAAhF,EAAwFF,EAAE,EAA1F,EAA8F;AAC1F,QAAI2F,SAAS,GAAGD,kBAAkB,CAAC1F,EAAD,CAAlC;AACAuE,IAAAA,OAAO,CAAC7G,IAAR,CAAaiI,SAAS,CAACxF,GAAvB;;AACA,QAAI,CAACwF,SAAS,CAACC,SAAf,EAA0B;AACtBpB,MAAAA,aAAa,CAAC9G,IAAd,CAAmBiI,SAAS,CAACxF,GAA7B;AACH;AACJ;;AACD,SAAO;AAAEoE,IAAAA,OAAO,EAAEA,OAAX;AAAoBC,IAAAA,aAAa,EAAEA;AAAnC,GAAP;AACH;;AAED,IAAIqB,uBAAuB,GAAGpL,eAAe,CAAC;AAAEqL,EAAAA,IAAI,EAAE;AAAR,CAAD,CAA7C;;AACA,IAAIC,SAAS,GAAkB,UAAUpJ,MAAV,EAAkB;AAC7CJ,EAAAA,SAAS,CAACwJ,SAAD,EAAYpJ,MAAZ,CAAT;;AACA,WAASoJ,SAAT,GAAqB;AACjB,QAAInJ,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AACAF,IAAAA,KAAK,CAACyB,SAAN,GAAkBxE,SAAS,EAA3B;;AACA+C,IAAAA,KAAK,CAACoJ,YAAN,GAAqB,UAAUC,EAAV,EAAc;AAC/BjL,MAAAA,MAAM,CAAC4B,KAAK,CAACyB,SAAP,EAAkB4H,EAAlB,CAAN;AACAjL,MAAAA,MAAM,CAAC4B,KAAK,CAACS,KAAN,CAAYU,KAAb,EAAoBkI,EAApB,CAAN;AACH,KAHD;;AAIA,WAAOrJ,KAAP;AACH;;AACDmJ,EAAAA,SAAS,CAAC/I,SAAV,CAAoB8D,MAApB,GAA6B,YAAY;AACrC,QAAI1D,EAAE,GAAG,IAAT;AAAA,QAAeC,KAAK,GAAGD,EAAE,CAACC,KAA1B;AAAA,QAAiCC,OAAO,GAAGF,EAAE,CAACE,OAA9C;AAAA,QAAuDe,SAAS,GAAGjB,EAAE,CAACiB,SAAtE;;AACA,QAAIZ,OAAO,GAAGH,OAAO,CAACG,OAAtB;AACA,QAAIwD,IAAI,GAAG5D,KAAK,CAAC4D,IAAjB;AAAA,QAAuBE,WAAW,GAAG9D,KAAK,CAAC8D,WAA3C;AACA,QAAIJ,YAAY,GAAGtD,OAAO,CAACuD,QAAR,GACb;AAAE,sBAAgB3G,gBAAgB,CAAC4G,IAAD,EAAO,MAAP,CAAlC;AAAkDC,MAAAA,QAAQ,EAAE;AAA5D,KADa,GAEb,EAFN;AAGA,WAAQnH,aAAa,CAACkB,WAAD,EAAc;AAAEgG,MAAAA,IAAI,EAAEA,IAAR;AAAcE,MAAAA,WAAW,EAAEA,WAA3B;AAAwCC,MAAAA,UAAU,EAAE/D,KAAK,CAAC+D,UAA1D;AAAsEC,MAAAA,aAAa,EAAEhE,KAAK,CAACgE,aAA3F;AAA0GC,MAAAA,cAAc,EAAEjE,KAAK,CAACiE,cAAhI;AAAgJvD,MAAAA,KAAK,EAAE,KAAKiI;AAA5J,KAAd,EAA0L,UAAUE,QAAV,EAAoBC,aAApB,EAAmCC,aAAnC,EAAkDC,UAAlD,EAA8D;AAAE,aAAQtM,aAAa,CAAC,IAAD,EAAOyC,QAAQ,CAAC;AAAE+B,QAAAA,GAAG,EAAE2H,QAAP;AAAiB1H,QAAAA,SAAS,EAAE,CAAC,gBAAD,EAAmBC,MAAnB,CAA0B0H,aAA1B,EAAyC9I,KAAK,CAACsF,eAAN,IAAyB,EAAlE,EAAsEjE,IAAtE,CAA2E,GAA3E;AAA5B,OAAD,EAAgH0H,aAAhH,EAA+H/I,KAAK,CAACiJ,cAArI,CAAf,EAChSvM,aAAa,CAAC,KAAD,EAAQ;AAAEyE,QAAAA,SAAS,EAAE,+CAAb;AAA8DD,QAAAA,GAAG,EAAElB,KAAK,CAACoE;AAAW;;AAApF,OAAR,EACTpE,KAAK,CAACkJ,cAAN,IAAyBxM,aAAa,CAACmB,cAAD,EAAiB;AAAE+F,QAAAA,IAAI,EAAEA,IAAR;AAAcuF,QAAAA,aAAa,EAAEX;AAA7B,OAAjB,EAAyE,UAAUY,SAAV,EAAqBC,cAArB,EAAqCjF,UAArC,EAAiDC,YAAjD,EAA+D;AAAE,eAAQ3H,aAAa,CAAC,GAAD,EAAMyC,QAAQ,CAAC;AAAE+B,UAAAA,GAAG,EAAEkI,SAAP;AAAkBjI,UAAAA,SAAS,EAAE,CAAC,wBAAD,EAA2BC,MAA3B,CAAkCiI,cAAlC,EAAkDhI,IAAlD,CAAuD,GAAvD;AAA7B,SAAD,EAA6FqC,YAA7F,CAAd,EAA0HW,YAA1H,CAArB;AAAgK,OAA1S,CAD7B,EAET,CAAC2E,UAAD,IAAgBtM,aAAa,CAAC8G,YAAD,EAAe;AAAEI,QAAAA,IAAI,EAAEA,IAAR;AAAcE,QAAAA,WAAW,EAAEA,WAA3B;AAAwCE,QAAAA,aAAa,EAAEhE,KAAK,CAACgE,aAA7D;AAA4EM,QAAAA,WAAW,EAAEtE,KAAK,CAACsE,WAA/F;AAA4GP,QAAAA,UAAU,EAAE/D,KAAK,CAAC+D,UAA9H;AAA0IE,QAAAA,cAAc,EAAEjE,KAAK,CAACiE;AAAhK,OAAf,CAFpB,EAGTvH,aAAa,CAAC,KAAD,EAAQ;AAAEyE,QAAAA,SAAS,EAAE,uBAAb;AAAsCD,QAAAA,GAAG,EAAElB,KAAK,CAACsJ;AAAjD,OAAR,EACTtJ,KAAK,CAACuJ,SADG,EAET7M,aAAa,CAAC,KAAD,EAAQ;AAAEyE,QAAAA,SAAS,EAAE,uBAAb;AAAsCqF,QAAAA,KAAK,EAAE;AAAEgD,UAAAA,SAAS,EAAExJ,KAAK,CAACyJ;AAAnB;AAA7C,OAAR,EACT/M,aAAa,CAACqK,iBAAD,EAAoB;AAAEK,QAAAA,UAAU,EAAExD,IAAd;AAAoBqD,QAAAA,gBAAgB,EAAEjH,KAAK,CAACiH,gBAA5C;AAA8DI,QAAAA,OAAO,EAAErH,KAAK,CAACqH,OAA7E;AAAsFE,QAAAA,cAAc,EAAEvG,SAAtG;AAAiHwG,QAAAA,YAAY,EAAE,CAACxH,KAAK,CAACgE,aAAtI;AAAqJyD,QAAAA,aAAa,EAAEzH,KAAK,CAACyH,aAA1K;AAAyL3D,QAAAA,WAAW,EAAE9D,KAAK,CAAC8D,WAA5M;AAAyNoE,QAAAA,cAAc,EAAElI,KAAK,CAACkI,cAA/O;AAA+PN,QAAAA,SAAS,EAAE5H,KAAK,CAAC4H,SAAhR;AAA2RC,QAAAA,WAAW,EAAE7H,KAAK,CAAC6H,WAA9S;AAA2T9D,QAAAA,UAAU,EAAE/D,KAAK,CAAC+D;AAA7U,OAApB,CADJ,CAFJ,CAHJ,EAOTrH,aAAa,CAAC,KAAD,EAAQ;AAAEyE,QAAAA,SAAS,EAAE;AAAb,OAAR,EAA4CnB,KAAK,CAAC0J,SAAlD,CAPJ,CADmR,CAArB;AAQxL,KARlE,CAArB;AASH,GAhBD;;AAiBA,SAAOhB,SAAP;AACH,CA7B8B,CA6B7B3L,aA7B6B,CAA/B;;AA+BA,SAAS4M,qBAAT,CAA+BpH,IAA/B,EAAqC;AACrCqH,YADA,EACcC,eADd,EAC+BC,WAD/B,EAC4CC,oBAD5C,EACkEC,gBADlE,EACoFC,KADpF,EAC2F;AACvF,MAAIC,SAAS,GAAG,IAAIC,mBAAJ,EAAhB;AACAD,EAAAA,SAAS,CAACE,cAAV,GAA2B,IAA3B;AACAF,EAAAA,SAAS,CAACJ,WAAV,GAAwBA,WAAxB;;AACA,MAAIF,YAAY,KAAK,IAAjB,IAAyBC,eAAe,KAAK,IAAjD,EAAuD;AACnDK,IAAAA,SAAS,CAACG,QAAV,GAAqBL,gBAArB;AACAE,IAAAA,SAAS,CAACI,cAAV,GAA2B,IAA3B;AACH,GAHD,MAIK,IAAI,OAAOV,YAAP,KAAwB,QAA5B,EAAsC;AACvCM,IAAAA,SAAS,CAACK,WAAV,GAAwBX,YAAxB;AACH,GAFI,MAGA,IAAI,OAAOC,eAAP,KAA2B,QAA/B,EAAyC;AAC1CK,IAAAA,SAAS,CAACK,WAAV,GAAwBV,eAAxB;AACAK,IAAAA,SAAS,CAACI,cAAV,GAA2B,IAA3B;AACH,GAdsF,CAevF;;;AACA,MAAIE,SAAS,GAAG,EAAhB;AACA,MAAIC,iBAAiB,GAAG,EAAxB;;AACA,OAAK,IAAI/H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACM,MAAzB,EAAiCH,CAAC,IAAI,CAAtC,EAAyC;AACrC,QAAII,GAAG,GAAGP,IAAI,CAACG,CAAD,CAAd;AACA,QAAIqF,UAAU,GAAGjF,GAAG,CAACiC,UAAJ,CAAeiD,QAAf,CAAwBD,UAAzC;AACA,QAAI2C,WAAW,GAAGX,oBAAoB,CAAChC,UAAD,CAAtC;;AACA,QAAI2C,WAAW,IAAI,IAAnB,EAAyB;AACrBF,MAAAA,SAAS,CAACnK,IAAV,CAAe;AACXsK,QAAAA,KAAK,EAAEjI,CADI;AAEXkI,QAAAA,SAAS,EAAE9H,GAAG,CAACK,QAFJ;AAGX0H,QAAAA,OAAO,EAAE/H,GAAG,CAACoC,OAAJ,GAAc,CAHZ;AAIX4F,QAAAA,SAAS,EAAEJ;AAJA,OAAf;AAMH,KAPD,MAQK;AACDD,MAAAA,iBAAiB,CAACpK,IAAlB,CAAuByC,GAAvB;AACH;AACJ;;AACD,MAAIiI,aAAa,GAAGb,SAAS,CAACc,OAAV,CAAkBR,SAAlB,CAApB;AACA,MAAIS,QAAQ,GAAGf,SAAS,CAACgB,OAAV,EAAf;;AACA,MAAInL,EAAE,GAAGoL,UAAU,CAACF,QAAD,EAAW1I,IAAX,EAAiB0H,KAAjB,CAAnB;AAAA,MAA4CmB,mBAAmB,GAAGrL,EAAE,CAACqL,mBAArE;AAAA,MAA0FC,kBAAkB,GAAGtL,EAAE,CAACsL,kBAAlH;AAAA,MAAsIC,eAAe,GAAGvL,EAAE,CAACuL,eAA3J;;AACA,MAAIC,QAAQ,GAAG,EAAf;AACA,MAAIC,cAAc,GAAG,EAArB,CAtCuF,CAuCvF;;AACA,OAAK,IAAI7I,EAAE,GAAG,CAAT,EAAY8I,mBAAmB,GAAGhB,iBAAvC,EAA0D9H,EAAE,GAAG8I,mBAAmB,CAAC5I,MAAnF,EAA2FF,EAAE,EAA7F,EAAiG;AAC7F,QAAIG,GAAG,GAAG2I,mBAAmB,CAAC9I,EAAD,CAA7B;AACA0I,IAAAA,kBAAkB,CAACvI,GAAG,CAACK,QAAL,CAAlB,CAAiC9C,IAAjC,CAAsC;AAClCyC,MAAAA,GAAG,EAAEA,GAD6B;AAElCyF,MAAAA,SAAS,EAAE,KAFuB;AAGlCmD,MAAAA,UAAU,EAAE,IAHsB;AAIlCC,MAAAA,WAAW,EAAE,CAJqB;AAKlCnC,MAAAA,SAAS,EAAE;AALuB,KAAtC;;AAOA,SAAK,IAAIoC,GAAG,GAAG9I,GAAG,CAACK,QAAnB,EAA6ByI,GAAG,IAAI9I,GAAG,CAACoC,OAAxC,EAAiD0G,GAAG,IAAI,CAAxD,EAA2D;AACvDR,MAAAA,mBAAmB,CAACQ,GAAD,CAAnB,CAAyBvL,IAAzB,CAA8B;AAC1ByC,QAAAA,GAAG,EAAE+I,UAAU,CAAC/I,GAAD,EAAM8I,GAAN,EAAWA,GAAG,GAAG,CAAjB,EAAoB3B,KAApB,CADW;AAE1B1B,QAAAA,SAAS,EAAE,KAFe;AAG1BmD,QAAAA,UAAU,EAAE,KAHc;AAI1BC,QAAAA,WAAW,EAAE,CAJa;AAK1BnC,QAAAA,SAAS,EAAE;AALe,OAA9B;AAOH;AACJ,GA1DsF,CA2DvF;;;AACA,OAAK,IAAIoC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG3B,KAAK,CAACpH,MAA9B,EAAsC+I,GAAG,IAAI,CAA7C,EAAgD;AAC5CL,IAAAA,QAAQ,CAAClL,IAAT,CAAc,CAAd;AACH;;AACD,OAAK,IAAIyL,EAAE,GAAG,CAAT,EAAYC,eAAe,GAAGhB,aAAnC,EAAkDe,EAAE,GAAGC,eAAe,CAAClJ,MAAvE,EAA+EiJ,EAAE,EAAjF,EAAqF;AACjF,QAAIE,WAAW,GAAGD,eAAe,CAACD,EAAD,CAAjC;AACA,QAAIhJ,GAAG,GAAGP,IAAI,CAACyJ,WAAW,CAACC,QAAZ,CAAqBtB,KAAtB,CAAd;AACAU,IAAAA,kBAAkB,CAACW,WAAW,CAACpB,SAAb,CAAlB,CAA0CvK,IAA1C,CAA+C;AAC3CyC,MAAAA,GAAG,EAAEA,GADsC;AAE3CyF,MAAAA,SAAS,EAAE,KAFgC;AAG3CmD,MAAAA,UAAU,EAAE,IAH+B;AAI3CC,MAAAA,WAAW,EAAE,CAJ8B;AAK3CnC,MAAAA,SAAS,EAAE;AALgC,KAA/C;;AAOA,SAAK,IAAIoC,GAAG,GAAGI,WAAW,CAACpB,SAA3B,EAAsCgB,GAAG,GAAGI,WAAW,CAACnB,OAAxD,EAAiEe,GAAG,IAAI,CAAxE,EAA2E;AACvEL,MAAAA,QAAQ,CAACK,GAAD,CAAR,IAAiB,CAAjB;AACAR,MAAAA,mBAAmB,CAACQ,GAAD,CAAnB,CAAyBvL,IAAzB,CAA8B;AAC1ByC,QAAAA,GAAG,EAAE+I,UAAU,CAAC/I,GAAD,EAAM8I,GAAN,EAAWA,GAAG,GAAG,CAAjB,EAAoB3B,KAApB,CADW;AAE1B1B,QAAAA,SAAS,EAAE,KAFe;AAG1BmD,QAAAA,UAAU,EAAE,KAHc;AAI1BC,QAAAA,WAAW,EAAE,CAJa;AAK1BnC,QAAAA,SAAS,EAAE;AALe,OAA9B;AAOH;AACJ,GAnFsF,CAoFvF;;;AACA,OAAK,IAAIoC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG3B,KAAK,CAACpH,MAA9B,EAAsC+I,GAAG,IAAI,CAA7C,EAAgD;AAC5CJ,IAAAA,cAAc,CAACnL,IAAf,CAAoBiL,eAAe,CAACM,GAAD,CAAnC;AACH;;AACD,SAAO;AAAER,IAAAA,mBAAmB,EAAEA,mBAAvB;AAA4CC,IAAAA,kBAAkB,EAAEA,kBAAhE;AAAoFE,IAAAA,QAAQ,EAAEA,QAA9F;AAAwGC,IAAAA,cAAc,EAAEA;AAAxH,GAAP;AACH,C,CACD;;;AACA,SAASL,UAAT,CAAoBe,QAApB,EAA8B3J,IAA9B,EAAoC0H,KAApC,EAA2C;AACvC,MAAIkC,cAAc,GAAGC,mBAAmB,CAACF,QAAD,EAAWjC,KAAK,CAACpH,MAAjB,CAAxC;AACA,MAAIuI,mBAAmB,GAAG,EAA1B;AACA,MAAIC,kBAAkB,GAAG,EAAzB;AACA,MAAIC,eAAe,GAAG,EAAtB;;AACA,OAAK,IAAIM,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAG3B,KAAK,CAACpH,MAA9B,EAAsC+I,GAAG,IAAI,CAA7C,EAAgD;AAC5C,QAAIS,KAAK,GAAGF,cAAc,CAACP,GAAD,CAA1B,CAD4C,CAE5C;;AACA,QAAI3E,gBAAgB,GAAG,EAAvB;AACA,QAAIqF,aAAa,GAAG,CAApB;AACA,QAAIC,gBAAgB,GAAG,CAAvB;;AACA,SAAK,IAAI5J,EAAE,GAAG,CAAT,EAAY6J,OAAO,GAAGH,KAA3B,EAAkC1J,EAAE,GAAG6J,OAAO,CAAC3J,MAA/C,EAAuDF,EAAE,EAAzD,EAA6D;AACzD,UAAI8J,IAAI,GAAGD,OAAO,CAAC7J,EAAD,CAAlB;AACA,UAAIG,GAAG,GAAGP,IAAI,CAACkK,IAAI,CAACR,QAAL,CAActB,KAAf,CAAd;AACA1D,MAAAA,gBAAgB,CAAC5G,IAAjB,CAAsB;AAClByC,QAAAA,GAAG,EAAE+I,UAAU,CAAC/I,GAAD,EAAM8I,GAAN,EAAWA,GAAG,GAAG,CAAjB,EAAoB3B,KAApB,CADG;AAElB1B,QAAAA,SAAS,EAAE,IAFO;AAGlBmD,QAAAA,UAAU,EAAE,KAHM;AAIlBC,QAAAA,WAAW,EAAE,CAJK;AAKlBnC,QAAAA,SAAS,EAAEiD,IAAI,CAACC,UAAL,GAAkBJ;AALX,OAAtB;AAOAA,MAAAA,aAAa,GAAGG,IAAI,CAACC,UAAL,GAAkBD,IAAI,CAAC3B,SAAvC;AACH,KAjB2C,CAkB5C;;;AACA,QAAI6B,eAAe,GAAG,EAAtB;AACAL,IAAAA,aAAa,GAAG,CAAhB;AACAC,IAAAA,gBAAgB,GAAG,CAAnB;;AACA,SAAK,IAAIxM,EAAE,GAAG,CAAT,EAAY6M,OAAO,GAAGP,KAA3B,EAAkCtM,EAAE,GAAG6M,OAAO,CAAC/J,MAA/C,EAAuD9C,EAAE,EAAzD,EAA6D;AACzD,UAAI0M,IAAI,GAAGG,OAAO,CAAC7M,EAAD,CAAlB;AACA,UAAI+C,GAAG,GAAGP,IAAI,CAACkK,IAAI,CAACR,QAAL,CAActB,KAAf,CAAd;AACA,UAAIe,UAAU,GAAGe,IAAI,CAAC5B,OAAL,GAAe4B,IAAI,CAAC7B,SAApB,GAAgC,CAAjD,CAHyD,CAGL;;AACpD,UAAIiC,UAAU,GAAGJ,IAAI,CAAC7B,SAAL,KAAmBgB,GAApC;AACAW,MAAAA,gBAAgB,IAAIE,IAAI,CAACC,UAAL,GAAkBJ,aAAtC,CALyD,CAKJ;;AACrDA,MAAAA,aAAa,GAAGG,IAAI,CAACC,UAAL,GAAkBD,IAAI,CAAC3B,SAAvC,CANyD,CAMP;;AAClD,UAAIY,UAAJ,EAAgB;AACZa,QAAAA,gBAAgB,IAAIE,IAAI,CAAC3B,SAAzB;;AACA,YAAI+B,UAAJ,EAAgB;AACZF,UAAAA,eAAe,CAACtM,IAAhB,CAAqB;AACjByC,YAAAA,GAAG,EAAE+I,UAAU,CAAC/I,GAAD,EAAM2J,IAAI,CAAC7B,SAAX,EAAsB6B,IAAI,CAAC5B,OAA3B,EAAoCZ,KAApC,CADE;AAEjB1B,YAAAA,SAAS,EAAE,IAFM;AAGjBmD,YAAAA,UAAU,EAAE,IAHK;AAIjBC,YAAAA,WAAW,EAAEc,IAAI,CAACC,UAJD;AAKjBlD,YAAAA,SAAS,EAAE;AALM,WAArB;AAOH;AACJ,OAXD,MAYK,IAAIqD,UAAJ,EAAgB;AACjBF,QAAAA,eAAe,CAACtM,IAAhB,CAAqB;AACjByC,UAAAA,GAAG,EAAE+I,UAAU,CAAC/I,GAAD,EAAM2J,IAAI,CAAC7B,SAAX,EAAsB6B,IAAI,CAAC5B,OAA3B,EAAoCZ,KAApC,CADE;AAEjB1B,UAAAA,SAAS,EAAE,IAFM;AAGjBmD,UAAAA,UAAU,EAAE,KAHK;AAIjBC,UAAAA,WAAW,EAAE,CAJI;AAKjBnC,UAAAA,SAAS,EAAE+C,gBALM,CAKY;;AALZ,SAArB;AAOAA,QAAAA,gBAAgB,GAAG,CAAnB;AACH;AACJ;;AACDnB,IAAAA,mBAAmB,CAAC/K,IAApB,CAAyB4G,gBAAzB;AACAoE,IAAAA,kBAAkB,CAAChL,IAAnB,CAAwBsM,eAAxB;AACArB,IAAAA,eAAe,CAACjL,IAAhB,CAAqBkM,gBAArB;AACH;;AACD,SAAO;AAAEnB,IAAAA,mBAAmB,EAAEA,mBAAvB;AAA4CC,IAAAA,kBAAkB,EAAEA,kBAAhE;AAAoFC,IAAAA,eAAe,EAAEA;AAArG,GAAP;AACH;;AACD,SAASc,mBAAT,CAA6BC,KAA7B,EAAoC1K,MAApC,EAA4C;AACxC,MAAIwK,cAAc,GAAG,EAArB;;AACA,OAAK,IAAIP,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGjK,MAAxB,EAAgCiK,GAAG,IAAI,CAAvC,EAA0C;AACtCO,IAAAA,cAAc,CAAC9L,IAAf,CAAoB,EAApB;AACH;;AACD,OAAK,IAAIsC,EAAE,GAAG,CAAT,EAAYmK,OAAO,GAAGT,KAA3B,EAAkC1J,EAAE,GAAGmK,OAAO,CAACjK,MAA/C,EAAuDF,EAAE,EAAzD,EAA6D;AACzD,QAAI8J,IAAI,GAAGK,OAAO,CAACnK,EAAD,CAAlB;;AACA,SAAK,IAAIiJ,GAAG,GAAGa,IAAI,CAAC7B,SAApB,EAA+BgB,GAAG,GAAGa,IAAI,CAAC5B,OAA1C,EAAmDe,GAAG,IAAI,CAA1D,EAA6D;AACzDO,MAAAA,cAAc,CAACP,GAAD,CAAd,CAAoBvL,IAApB,CAAyBoM,IAAzB;AACH;AACJ;;AACD,SAAON,cAAP;AACH;;AACD,SAASN,UAAT,CAAoB/I,GAApB,EAAyB8H,SAAzB,EAAoCC,OAApC,EAA6CZ,KAA7C,EAAoD;AAChD,MAAInH,GAAG,CAACK,QAAJ,KAAiByH,SAAjB,IAA8B9H,GAAG,CAACoC,OAAJ,KAAgB2F,OAAO,GAAG,CAA5D,EAA+D;AAC3D,WAAO/H,GAAP;AACH;;AACD,MAAIiC,UAAU,GAAGjC,GAAG,CAACiC,UAArB;AACA,MAAIgI,SAAS,GAAGhI,UAAU,CAACiI,KAA3B;AACA,MAAIC,WAAW,GAAGjP,eAAe,CAAC+O,SAAD,EAAY;AACzCG,IAAAA,KAAK,EAAEjD,KAAK,CAACW,SAAD,CAAL,CAAiBhH,IADiB;AAEzCuJ,IAAAA,GAAG,EAAElP,OAAO,CAACgM,KAAK,CAACY,OAAO,GAAG,CAAX,CAAL,CAAmBjH,IAApB,EAA0B,CAA1B;AAF6B,GAAZ,CAAjC;AAIA,SAAOzE,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK2D,GAAL,CAAT,EAAoB;AAAEK,IAAAA,QAAQ,EAAEyH,SAAZ;AAAuB1F,IAAAA,OAAO,EAAE2F,OAAO,GAAG,CAA1C;AAA6C9F,IAAAA,UAAU,EAAE;AACpFC,MAAAA,GAAG,EAAED,UAAU,CAACC,GADoE;AAEpF3B,MAAAA,EAAE,EAAElE,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK4F,UAAU,CAAC1B,EAAhB,CAAT,EAA8B;AAAE+J,QAAAA,gBAAgB,EAAE;AAApB,OAA9B,CAFwE;AAGpFpF,MAAAA,QAAQ,EAAEjD,UAAU,CAACiD,QAH+D;AAIpFgF,MAAAA,KAAK,EAAEC;AAJ6E,KAAzD;AAK5B9H,IAAAA,OAAO,EAAErC,GAAG,CAACqC,OAAJ,IAAe8H,WAAW,CAACC,KAAZ,CAAkBG,OAAlB,OAAgCN,SAAS,CAACG,KAAV,CAAgBG,OAAhB,EAL5B;AAKuDjI,IAAAA,KAAK,EAAEtC,GAAG,CAACsC,KAAJ,IAAa6H,WAAW,CAACE,GAAZ,CAAgBE,OAAhB,OAA8BN,SAAS,CAACI,GAAV,CAAcE,OAAd;AALzG,GAApB,CAAf;AAMH;;AACD,IAAIlD,mBAAmB,GAAkB,UAAU7K,MAAV,EAAkB;AACvDJ,EAAAA,SAAS,CAACiL,mBAAD,EAAsB7K,MAAtB,CAAT;;AACA,WAAS6K,mBAAT,GAA+B;AAC3B,QAAI5K,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE,CAD2B,CAE3B;;;AACAF,IAAAA,KAAK,CAAC+K,cAAN,GAAuB,KAAvB,CAH2B,CAI3B;;AACA/K,IAAAA,KAAK,CAAC+N,WAAN,GAAoB,EAApB;AACA,WAAO/N,KAAP;AACH;;AACD4K,EAAAA,mBAAmB,CAACxK,SAApB,CAA8BqL,OAA9B,GAAwC,UAAUR,SAAV,EAAqB;AACzD,QAAIjL,KAAK,GAAG,IAAZ;;AACA,QAAI+H,UAAU,GAAGhI,MAAM,CAACK,SAAP,CAAiBqL,OAAjB,CAAyBuC,IAAzB,CAA8B,IAA9B,EAAoC/C,SAApC,CAAjB;;AACA,QAAIgD,cAAc,GAAG,KAAKA,cAA1B;;AACA,QAAIC,aAAa,GAAG,SAAhBA,aAAgB,CAAUC,KAAV,EAAiB;AAAE,aAAO,CAACnO,KAAK,CAAC+N,WAAN,CAAkBxP,aAAa,CAAC4P,KAAD,CAA/B,CAAR;AAAkD,KAAzF,CAJyD,CAKzD;;;AACA,SAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGH,cAAc,CAAC3K,MAA3C,EAAmD8K,KAAK,IAAI,CAA5D,EAA+D;AAC3DH,MAAAA,cAAc,CAACG,KAAD,CAAd,GAAwBH,cAAc,CAACG,KAAD,CAAd,CAAsBC,MAAtB,CAA6BH,aAA7B,CAAxB;AACH;;AACD,WAAOnG,UAAP;AACH,GAVD;;AAWA6C,EAAAA,mBAAmB,CAACxK,SAApB,CAA8BkO,sBAA9B,GAAuD,UAAUC,SAAV,EAAqBJ,KAArB,EAA4B3C,aAA5B,EAA2C;AAC9F,QAAIhL,EAAE,GAAG,IAAT;AAAA,QAAeyN,cAAc,GAAGzN,EAAE,CAACyN,cAAnC;AAAA,QAAmDF,WAAW,GAAGvN,EAAE,CAACuN,WAApE;;AACA,QAAIK,KAAK,GAAGG,SAAS,CAACC,SAAV,GAAsB,CAAlC;;AACA,QAAI,KAAKzD,cAAL,IAAuBqD,KAAK,IAAI,CAApC,EAAuC;AACnC,WAAK,IAAIK,OAAO,GAAGF,SAAS,CAACG,YAA7B,EAA2CD,OAAO,GAAGF,SAAS,CAACI,UAA/D,EAA2EF,OAAO,IAAI,CAAtF,EAAyF;AACrF,YAAIG,YAAY,GAAGX,cAAc,CAACG,KAAD,CAAd,CAAsBK,OAAtB,CAAnB;;AACA,YAAI,KAAK5D,cAAT,EAAyB;AACrB,cAAIgE,gBAAgB,GAAGjP,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKgP,YAAL,CAAT,EAA6B;AAAEvD,YAAAA,SAAS,EAAEyD,IAAI,CAACC,GAAL,CAASH,YAAY,CAACvD,SAAtB,EAAiC8C,KAAK,CAAC9C,SAAvC,CAAb;AAAgEC,YAAAA,OAAO,EAAEwD,IAAI,CAACE,GAAL,CAASJ,YAAY,CAACtD,OAAtB,EAA+B6C,KAAK,CAAC7C,OAArC;AAAzE,WAA7B,CAA/B;;AACA,cAAI2D,kBAAkB,GAAG1Q,aAAa,CAACsQ,gBAAD,CAAtC;;AACA,cAAI,CAACd,WAAW,CAACkB,kBAAD,CAAhB,EAAsC;AAClClB,YAAAA,WAAW,CAACkB,kBAAD,CAAX,GAAkC,IAAlC;AACAhB,YAAAA,cAAc,CAACG,KAAD,CAAd,CAAsBK,OAAtB,IAAiCI,gBAAjC;AACA,iBAAKK,UAAL,CAAgBN,YAAhB,EAA8BT,KAA9B,EAAqC3C,aAArC,EAHkC,CAGmB;AACxD;AACJ,SARD,MASK;AACD,cAAIyD,kBAAkB,GAAG1Q,aAAa,CAACqQ,YAAD,CAAtC;;AACA,cAAI,CAACb,WAAW,CAACkB,kBAAD,CAAhB,EAAsC;AAClClB,YAAAA,WAAW,CAACkB,kBAAD,CAAX,GAAkC,IAAlC;AACAzD,YAAAA,aAAa,CAAC1K,IAAd,CAAmB8N,YAAnB;AACH;AACJ;AACJ;AACJ;;AACD,WAAO7O,MAAM,CAACK,SAAP,CAAiBkO,sBAAjB,CAAwCN,IAAxC,CAA6C,IAA7C,EAAmDO,SAAnD,EAA8DJ,KAA9D,EAAqE3C,aAArE,CAAP;AACH,GAzBD;;AA0BA,SAAOZ,mBAAP;AACH,CAhDwC,CAgDvCpM,YAhDuC,CAAzC;;AAkDA,IAAI2Q,QAAQ,GAAkB,UAAUpP,MAAV,EAAkB;AAC5CJ,EAAAA,SAAS,CAACwP,QAAD,EAAWpP,MAAX,CAAT;;AACA,WAASoP,QAAT,GAAoB;AAChB,QAAInP,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AACAF,IAAAA,KAAK,CAACoP,UAAN,GAAmB,IAAIzQ,MAAJ,EAAnB,CAFgB,CAEiB;;AACjCqB,IAAAA,KAAK,CAACqP,WAAN,GAAoB,IAAI1Q,MAAJ,EAApB,CAHgB,CAGkB;;AAClCqB,IAAAA,KAAK,CAACsP,QAAN,GAAiB,IAAI3Q,MAAJ,EAAjB,CAJgB,CAIe;;AAC/BqB,IAAAA,KAAK,CAACuP,cAAN,GAAuB,IAAI5Q,MAAJ,EAAvB,CALgB,CAKqB;;AACrCqB,IAAAA,KAAK,CAACyB,SAAN,GAAkBxE,SAAS,EAA3B;AACA+C,IAAAA,KAAK,CAACwP,KAAN,GAAc;AACVC,MAAAA,cAAc,EAAE,IADN;AAEVhF,MAAAA,gBAAgB,EAAE,IAFR;AAGVD,MAAAA,oBAAoB,EAAE;AAHZ,KAAd;AAKA,WAAOxK,KAAP;AACH;;AACDmP,EAAAA,QAAQ,CAAC/O,SAAT,CAAmB8D,MAAnB,GAA4B,YAAY;AACpC,QAAIlE,KAAK,GAAG,IAAZ;;AACA,QAAIQ,EAAE,GAAG,IAAT;AAAA,QAAeC,KAAK,GAAGD,EAAE,CAACC,KAA1B;AAAA,QAAiC+O,KAAK,GAAGhP,EAAE,CAACgP,KAA5C;AAAA,QAAmD9O,OAAO,GAAGF,EAAE,CAACE,OAAhE;;AACA,QAAIG,OAAO,GAAGH,OAAO,CAACG,OAAtB;AACA,QAAIuB,MAAM,GAAG3B,KAAK,CAACiK,KAAN,CAAYpH,MAAzB;AACA,QAAIoM,kBAAkB,GAAGjM,mBAAmB,CAAChD,KAAK,CAACkP,gBAAP,EAAyBvN,MAAzB,CAA5C;AACA,QAAIwN,gBAAgB,GAAGnM,mBAAmB,CAAChD,KAAK,CAACoP,WAAP,EAAoBzN,MAApB,CAA1C;AACA,QAAI0N,kBAAkB,GAAGrM,mBAAmB,CAAC,KAAKsM,gBAAL,EAAD,EAA0B3N,MAA1B,CAA5C;AACA,QAAI4N,eAAe,GAAGvM,mBAAmB,CAAC,KAAKwM,aAAL,EAAD,EAAuB7N,MAAvB,CAAzC;;AACA,QAAImK,EAAE,GAAGnC,qBAAqB,CAACxL,aAAa,CAAC6B,KAAK,CAACyP,WAAP,EAAoBrP,OAAO,CAACsP,UAA5B,CAAd,EAAuD1P,KAAK,CAAC4J,YAA7D,EAA2E5J,KAAK,CAAC6J,eAAjF,EAAkGzJ,OAAO,CAACuP,gBAA1G,EAA4HZ,KAAK,CAAChF,oBAAlI,EAAwJgF,KAAK,CAAC/E,gBAA9J,EAAgLhK,KAAK,CAACiK,KAAtL,CAA9B;AAAA,QAA4NmB,mBAAmB,GAAGU,EAAE,CAACV,mBAArP;AAAA,QAA0QC,kBAAkB,GAAGS,EAAE,CAACT,kBAAlS;AAAA,QAAsTE,QAAQ,GAAGO,EAAE,CAACP,QAApU;AAAA,QAA8UC,cAAc,GAAGM,EAAE,CAACN,cAAlW;;AACA,QAAI7D,iBAAiB,GAAG;AACtB3H,IAAAA,KAAK,CAAC4H,SAAN,IAAmB5H,KAAK,CAAC4H,SAAN,CAAgBtE,iBAApC,IACItD,KAAK,CAAC6H,WAAN,IAAqB7H,KAAK,CAAC6H,WAAN,CAAkBvE,iBAD3C,IAEG,EAHJ;AAIA,WAAQ5G,aAAa,CAAC,IAAD,EAAO;AAAEwE,MAAAA,GAAG,EAAE,KAAKF;AAAZ,KAAP,EACjBhB,KAAK,CAAC4P,WAAN,IAAqB5P,KAAK,CAAC4P,WAAN,EADJ,EAEjB5P,KAAK,CAACiK,KAAN,CAAYnC,GAAZ,CAAgB,UAAU+H,IAAV,EAAgBjE,GAAhB,EAAqB;AACjC,UAAIkE,aAAa,GAAGvQ,KAAK,CAACwQ,YAAN,CAAmBnE,GAAnB,EAAwB5L,KAAK,CAACuB,QAAN,GAAiB6J,mBAAmB,CAACQ,GAAD,CAApC,GAA4CP,kBAAkB,CAACO,GAAD,CAAtF,EAA6F5L,KAAK,CAAC+D,UAAnG,EAA+G4D,iBAA/G,CAApB;;AACA,UAAIqI,aAAa,GAAGzQ,KAAK,CAACwQ,YAAN,CAAmBnE,GAAnB,EAAwBqE,qBAAqB,CAACV,eAAe,CAAC3D,GAAD,CAAhB,EAAuBP,kBAAvB,CAA7C,EAAyFrL,KAAK,CAAC+D,UAA/F,EAA2G,EAA3G,EAA+GmM,OAAO,CAAClQ,KAAK,CAAC4H,SAAP,CAAtH,EAAyIsI,OAAO,CAAClQ,KAAK,CAAC6H,WAAP,CAAhJ,EAAqK,KAArK,CAApB;;AACA,aAAQnL,aAAa,CAACgM,SAAD,EAAY;AAAEnI,QAAAA,GAAG,EAAEsP,IAAI,CAACtP,GAAZ;AAAiBG,QAAAA,KAAK,EAAEnB,KAAK,CAACoP,UAAN,CAAiBnS,SAAjB,CAA2BqT,IAAI,CAACtP,GAAhC,CAAxB;AAA8D6D,QAAAA,UAAU,EAAE7E,KAAK,CAACqP,WAAN,CAAkBpS,SAAlB,CAA4BqT,IAAI,CAACtP,GAAjC;AAAsC;AAAhH;AAA0LuD,QAAAA,WAAW,EAAE9D,KAAK,CAAC8D,WAA7M;AAA0NF,QAAAA,IAAI,EAAEiM,IAAI,CAACjM,IAArO;AAA2OI,QAAAA,aAAa,EAAEhE,KAAK,CAACmQ,cAAhQ;AAAgRjH,QAAAA,cAAc,EAAElJ,KAAK,CAACoQ,eAAN,IAAyBxE,GAAG,KAAK,CAAjU;AAAoUtH,QAAAA,WAAW,EAAEtE,KAAK,CAACoQ;AAAgB;AAAvW;AAAmarM,QAAAA,UAAU,EAAE/D,KAAK,CAAC+D,UAArb;AAAicmE,QAAAA,cAAc,EAAElI,KAAK,CAACkI,cAAvd;AAAueN,QAAAA,SAAS,EAAE5H,KAAK,CAAC4H,SAAxf;AAAmgBC,QAAAA,WAAW,EAAE7H,KAAK,CAAC6H,WAAthB;AAAmiB5D,QAAAA,cAAc,EAAE4L,IAAI,CAAC5L,cAAxjB;AAAwkBgF,QAAAA,cAAc,EAAE4G,IAAI,CAAC5G,cAA7lB;AAA6mB3D,QAAAA,eAAe,EAAEuK,IAAI,CAACvK,eAAnoB;AAAopBmC,QAAAA,aAAa,EAAEoI,IAAI,CAACpI,aAAxqB;AAAurBJ,QAAAA,OAAO,EAAEkE,QAAQ,CAACK,GAAD,CAAxsB;AAA+sBnC,QAAAA,aAAa,EAAE+B,cAAc,CAACI,GAAD,CAA5uB;AAAmvB3E,QAAAA,gBAAgB,EAAEmE,mBAAmB,CAACQ,GAAD,CAAxxB;AAA+xBtC,QAAAA,cAAc,EAAE/J,KAAK,CAACsP,QAAN,CAAerS,SAAf,CAAyBqT,IAAI,CAACtP,GAA9B,CAA/yB;AAAm1BgJ,QAAAA,SAAS,EAAI;AAC73B7M,QAAAA,aAAa,CAACQ,QAAD,EAAW,IAAX,EACTR,aAAa,CAACQ,QAAD,EAAW,IAAX,EAAiB4S,aAAjB,CADJ,EAETpT,aAAa,CAACQ,QAAD,EAAW,IAAX,EAAiB8S,aAAjB,CAFJ,CADgB;AAGuBtG,QAAAA,SAAS,EAAI;AACjEhN,QAAAA,aAAa,CAACQ,QAAD,EAAW,IAAX,EACTqC,KAAK,CAAC8Q,cAAN,CAAqBhB,kBAAkB,CAACzD,GAAD,CAAvC,EAA8C,WAA9C,CADS,EAETrM,KAAK,CAAC8Q,cAAN,CAAqBpB,kBAAkB,CAACrD,GAAD,CAAvC,EAA8C,cAA9C,CAFS,EAGTrM,KAAK,CAAC8Q,cAAN,CAAqBlB,gBAAgB,CAACvD,GAAD,CAArC,EAA4C,UAA5C,CAHS;AAJgB,OAAZ,CAArB;AAQH,KAXD,CAFiB,CAArB;AAcH,GA5BD;;AA6BA8C,EAAAA,QAAQ,CAAC/O,SAAT,CAAmB2Q,iBAAnB,GAAuC,YAAY;AAC/C,SAAKC,YAAL,CAAkB,IAAlB;AACH,GAFD;;AAGA7B,EAAAA,QAAQ,CAAC/O,SAAT,CAAmB6Q,kBAAnB,GAAwC,UAAUC,SAAV,EAAqBC,SAArB,EAAgC;AACpE,QAAIC,YAAY,GAAG,KAAK3Q,KAAxB;AACA,SAAKuQ,YAAL,CAAkB,CAACnS,YAAY,CAACqS,SAAD,EAAYE,YAAZ,CAA/B;AACH,GAHD;;AAIAjC,EAAAA,QAAQ,CAAC/O,SAAT,CAAmB2P,gBAAnB,GAAsC,YAAY;AAC9C,QAAItP,KAAK,GAAG,KAAKA,KAAjB;;AACA,QAAIA,KAAK,CAAC4H,SAAN,IAAmB5H,KAAK,CAAC4H,SAAN,CAAgBrF,IAAhB,CAAqBM,MAA5C,EAAoD;AAAE;AAClD,aAAO7C,KAAK,CAAC4H,SAAN,CAAgBrF,IAAvB;AACH;;AACD,QAAIvC,KAAK,CAAC6H,WAAN,IAAqB7H,KAAK,CAAC6H,WAAN,CAAkBtF,IAAlB,CAAuBM,MAAhD,EAAwD;AAAE;AACtD,aAAO7C,KAAK,CAAC6H,WAAN,CAAkBtF,IAAzB;AACH;;AACD,WAAOvC,KAAK,CAAC4Q,iBAAb;AACH,GATD;;AAUAlC,EAAAA,QAAQ,CAAC/O,SAAT,CAAmB6P,aAAnB,GAAmC,YAAY;AAC3C,QAAIxP,KAAK,GAAG,KAAKA,KAAjB;;AACA,QAAIA,KAAK,CAAC6H,WAAN,IAAqB7H,KAAK,CAAC6H,WAAN,CAAkBtF,IAAlB,CAAuBM,MAAhD,EAAwD;AAAE;AACtD,aAAO7C,KAAK,CAAC6H,WAAN,CAAkBtF,IAAzB;AACH;;AACD,WAAO,EAAP;AACH,GAND;;AAOAmM,EAAAA,QAAQ,CAAC/O,SAAT,CAAmBoQ,YAAnB,GAAkC,UAAUnE,GAAV,EAAeiF,aAAf,EAA8B9M,UAA9B,EAA0C4D,iBAA1C,EAA6D5B,UAA7D,EAAyEC,UAAzE,EAAqFC,eAArF,EAAsG;AACpI,QAAIhG,OAAO,GAAG,KAAKA,OAAnB;AACA,QAAIiI,cAAc,GAAG,KAAKlI,KAAL,CAAWkI,cAAhC;AACA,QAAI8G,cAAc,GAAG,KAAKD,KAAL,CAAWC,cAAhC;AACA,QAAIxJ,sBAAsB,GAAG,KAAKxF,KAAL,CAAWiK,KAAX,CAAiBpH,MAAjB,KAA4B,CAAzD,CAJoI,CAIxE;;AAC5D,QAAIiO,QAAQ,GAAG/K,UAAU,IAAIC,UAAd,IAA4BC,eAA3C;AACA,QAAI8K,KAAK,GAAG,EAAZ;;AACA,QAAI/B,cAAJ,EAAoB;AAChB,WAAK,IAAIrM,EAAE,GAAG,CAAT,EAAYqO,eAAe,GAAGH,aAAnC,EAAkDlO,EAAE,GAAGqO,eAAe,CAACnO,MAAvE,EAA+EF,EAAE,EAAjF,EAAqF;AACjF,YAAI2F,SAAS,GAAG0I,eAAe,CAACrO,EAAD,CAA/B;AACA,YAAIG,GAAG,GAAGwF,SAAS,CAACxF,GAApB;AACA,YAAIiF,UAAU,GAAGjF,GAAG,CAACiC,UAAJ,CAAeiD,QAAf,CAAwBD,UAAzC;AACA,YAAIxH,GAAG,GAAGwH,UAAU,GAAG,GAAb,GAAmB6D,GAA7B;AACA,YAAIrD,SAAS,GAAGD,SAAS,CAACC,SAAV,IAAuB,CAACZ,iBAAiB,CAACI,UAAD,CAAzD;AACA,YAAI2D,UAAU,GAAGpD,SAAS,CAACoD,UAA3B;AACA,YAAIuF,IAAI,GAAG,EAAX;AACA,YAAIC,KAAK,GAAG,EAAZ;;AACA,YAAIxF,UAAJ,EAAgB;AACZ,cAAIzL,OAAO,CAACkR,KAAZ,EAAmB;AACfD,YAAAA,KAAK,GAAG,CAAR;AACAD,YAAAA,IAAI,GAAGjC,cAAc,CAACoC,KAAf,CAAqBtO,GAAG,CAACoC,OAAzB,IAAoC8J,cAAc,CAACoC,KAAf,CAAqBtO,GAAG,CAACK,QAAzB,CAA3C;AACH,WAHD,MAIK;AACD8N,YAAAA,IAAI,GAAG,CAAP;AACAC,YAAAA,KAAK,GAAGlC,cAAc,CAACqC,MAAf,CAAsBvO,GAAG,CAACK,QAA1B,IAAsC6L,cAAc,CAACqC,MAAf,CAAsBvO,GAAG,CAACoC,OAA1B,CAA9C;AACH;AACJ;AACD;AAChB;AACA;AACA;;;AACgB6L,QAAAA,KAAK,CAAC1Q,IAAN,CAAW3D,aAAa,CAAC,KAAD,EAAQ;AAAEyE,UAAAA,SAAS,EAAE,8BAA8BuK,UAAU,GAAG,+BAAH,GAAqC,EAA7E,CAAb;AAA+FnL,UAAAA,GAAG,EAAEA,GAApG;AAAyGW,UAAAA,GAAG,EAAE4P,QAAQ,GAAG,IAAH,GAAU,KAAKhC,cAAL,CAAoBtS,SAApB,CAA8B+D,GAA9B,CAAhI;AAAoKiG,UAAAA,KAAK,EAAE;AACnMyB,YAAAA,UAAU,EAAEM,SAAS,GAAG,EAAH,GAAQ,QADsK;AAEnMiB,YAAAA,SAAS,EAAEkC,UAAU,GAAG,EAAH,GAAQpD,SAAS,CAACkB,SAF4J;AAGnM8H,YAAAA,GAAG,EAAE5F,UAAU,GAAGpD,SAAS,CAACqD,WAAb,GAA2B,EAHyJ;AAInMsF,YAAAA,IAAI,EAAEA,IAJ6L;AAKnMC,YAAAA,KAAK,EAAEA;AAL4L;AAA3K,SAAR,EAMfrM,kBAAkB,CAAC/B,GAAD,CAAlB,GAA2BpG,aAAa,CAACgJ,kBAAD,EAAqBvG,QAAQ,CAAC;AAAE2D,UAAAA,GAAG,EAAEA,GAAP;AAAYiD,UAAAA,UAAU,EAAEA,UAAxB;AAAoCG,UAAAA,UAAU,EAAE6B,UAAU,KAAKG,cAA/D;AAA+E1C,UAAAA,sBAAsB,EAAEA;AAAvG,SAAD,EAAkI9H,UAAU,CAACoF,GAAD,EAAMiB,UAAN,CAA5I,CAA7B,CAAxC,GAAyOrH,aAAa,CAAC2I,eAAD,EAAkBlG,QAAQ,CAAC;AAAE2D,UAAAA,GAAG,EAAEA,GAAP;AAAYiD,UAAAA,UAAU,EAAEA,UAAxB;AAAoCC,UAAAA,UAAU,EAAEA,UAAhD;AAA4DC,UAAAA,eAAe,EAAEA,eAA7E;AAA8FC,UAAAA,UAAU,EAAE6B,UAAU,KAAKG,cAAzH;AAAyI1C,UAAAA,sBAAsB,EAAEA;AAAjK,SAAD,EAA4L9H,UAAU,CAACoF,GAAD,EAAMiB,UAAN,CAAtM,CAA1B,CANvO,CAAxB;AAOH;AACJ;;AACD,WAAOgN,KAAP;AACH,GAzCD;;AA0CArC,EAAAA,QAAQ,CAAC/O,SAAT,CAAmB0Q,cAAnB,GAAoC,UAAU9N,IAAV,EAAgBgP,QAAhB,EAA0B;AAC1D,QAAIJ,KAAK,GAAG,KAAKlR,OAAL,CAAakR,KAAzB;AACA,QAAIpN,UAAU,GAAG,KAAK/D,KAAL,CAAW+D,UAA5B;AACA,QAAIiL,cAAc,GAAG,KAAKD,KAAL,CAAWC,cAAhC;AACA,QAAI+B,KAAK,GAAG,EAAZ;;AACA,QAAI/B,cAAJ,EAAoB;AAChB,WAAK,IAAIrM,EAAE,GAAG,CAAT,EAAYC,MAAM,GAAGL,IAA1B,EAAgCI,EAAE,GAAGC,MAAM,CAACC,MAA5C,EAAoDF,EAAE,EAAtD,EAA0D;AACtD,YAAIG,GAAG,GAAGF,MAAM,CAACD,EAAD,CAAhB;AACA,YAAI6O,YAAY,GAAGL,KAAK,GAAG;AACvBD,UAAAA,KAAK,EAAE,CADgB;AAEvBD,UAAAA,IAAI,EAAEjC,cAAc,CAACoC,KAAf,CAAqBtO,GAAG,CAACoC,OAAzB,IAAoC8J,cAAc,CAACoC,KAAf,CAAqBtO,GAAG,CAACK,QAAzB;AAFnB,SAAH,GAGpB;AACA8N,UAAAA,IAAI,EAAE,CADN;AAEAC,UAAAA,KAAK,EAAElC,cAAc,CAACqC,MAAf,CAAsBvO,GAAG,CAACK,QAA1B,IAAsC6L,cAAc,CAACqC,MAAf,CAAsBvO,GAAG,CAACoC,OAA1B;AAF7C,SAHJ;AAOA6L,QAAAA,KAAK,CAAC1Q,IAAN,CAAW3D,aAAa,CAAC,KAAD,EAAQ;AAAE6D,UAAAA,GAAG,EAAElC,kBAAkB,CAACyE,GAAG,CAACiC,UAAL,CAAzB;AAA2C5D,UAAAA,SAAS,EAAE,uBAAtD;AAA+EqF,UAAAA,KAAK,EAAEgL;AAAtF,SAAR,EAA8GD,QAAQ,KAAK,UAAb,GAClI7U,aAAa,CAAC4B,OAAD,EAAUa,QAAQ,CAAC;AAAE2D,UAAAA,GAAG,EAAEA;AAAP,SAAD,EAAepF,UAAU,CAACoF,GAAD,EAAMiB,UAAN,CAAzB,CAAlB,CADqH,GAElIxF,UAAU,CAACgT,QAAD,CAFU,CAAxB;AAGH;AACJ;;AACD,WAAO7U,aAAa,CAAC8C,KAAd,CAAoB,KAAK,CAAzB,EAA4BJ,aAAa,CAAC,CAAClC,QAAD,EAAW,EAAX,CAAD,EAAiB6T,KAAjB,CAAzC,CAAP;AACH,GArBD;;AAsBArC,EAAAA,QAAQ,CAAC/O,SAAT,CAAmB4Q,YAAnB,GAAkC,UAAUkB,sBAAV,EAAkC;AAChE,QAAI1R,EAAE,GAAG,IAAT;AAAA,QAAeC,KAAK,GAAGD,EAAE,CAACC,KAA1B;AAAA,QAAiC4O,WAAW,GAAG7O,EAAE,CAAC6O,WAAlD;;AACA,QAAI,CAAC5O,KAAK,CAACuB,QAAP,IACAvB,KAAK,CAAC0R,WAAN,KAAsB,IAD1B,CAC+B;AAD/B,MAEE;AACE,UAAID,sBAAJ,EAA4B;AACxB,YAAIE,QAAQ,GAAG3R,KAAK,CAACiK,KAAN,CAAYnC,GAAZ,CAAgB,UAAU+H,IAAV,EAAgB;AAAE,iBAAOjB,WAAW,CAACgD,UAAZ,CAAuB/B,IAAI,CAACtP,GAA5B,CAAP;AAA0C,SAA5E,CAAf;;AACA,YAAIoR,QAAQ,CAAC9O,MAAb,EAAqB;AACjB,cAAIgP,QAAQ,GAAG,KAAK7Q,SAAL,CAAe8Q,OAA9B;AACA,eAAKC,QAAL,CAAc;AACV/C,YAAAA,cAAc,EAAE,IAAIxQ,aAAJ,CAAkBqT,QAAlB,EAA4BF,QAA5B,EAAsC,IAAtC,EAA4C;AAC5D,iBADgB;AADN,WAAd;AAIH;AACJ;;AACD,UAAIK,oBAAoB,GAAGhS,KAAK,CAAC4J,YAAN,KAAuB,IAAvB,IAA+B5J,KAAK,CAAC6J,eAAN,KAA0B,IAApF;AACA,WAAKkI,QAAL,CAAc;AACVhI,QAAAA,oBAAoB,EAAE,KAAKkI,yBAAL,EADZ;AAEVjI,QAAAA,gBAAgB,EAAEgI,oBAAoB,GAAG,KAAKE,uBAAL,EAAH,GAAoC;AAFhE,OAAd;AAIH;AACJ,GArBD;;AAsBAxD,EAAAA,QAAQ,CAAC/O,SAAT,CAAmBsS,yBAAnB,GAA+C,YAAY;AACvD,QAAIE,QAAQ,GAAG,KAAKrD,cAAL,CAAoB8C,UAAnC;AACA,QAAI7H,oBAAoB,GAAG,EAA3B,CAFuD,CAGvD;;AACA,SAAK,IAAIxJ,GAAT,IAAgB4R,QAAhB,EAA0B;AACtB,UAAIC,MAAM,GAAG/D,IAAI,CAACgE,KAAL,CAAWF,QAAQ,CAAC5R,GAAD,CAAR,CAAc+R,qBAAd,GAAsCF,MAAjD,CAAb;AACA,UAAIrK,UAAU,GAAGxH,GAAG,CAACgS,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAjB,CAFsB,CAEc;;AACpCxI,MAAAA,oBAAoB,CAAChC,UAAD,CAApB,GAAmCsG,IAAI,CAACC,GAAL,CAASvE,oBAAoB,CAAChC,UAAD,CAApB,IAAoC,CAA7C,EAAgDqK,MAAhD,CAAnC;AACH;;AACD,WAAOrI,oBAAP;AACH,GAVD;;AAWA2E,EAAAA,QAAQ,CAAC/O,SAAT,CAAmBuS,uBAAnB,GAA6C,YAAY;AACrD,QAAIM,QAAQ,GAAG,KAAKxS,KAAL,CAAWiK,KAAX,CAAiB,CAAjB,EAAoB1J,GAAnC;AACA,QAAIkS,MAAM,GAAG,KAAK9D,UAAL,CAAgBiD,UAAhB,CAA2BY,QAA3B,CAAb;AACA,QAAIE,aAAa,GAAG,KAAK7D,QAAL,CAAc+C,UAAd,CAAyBY,QAAzB,CAApB;AACA,WAAOC,MAAM,CAACH,qBAAP,GAA+BK,MAA/B,GAAwCD,aAAa,CAACJ,qBAAd,GAAsChB,GAArF;AACH,GALD;;AAMA5C,EAAAA,QAAQ,CAAC/O,SAAT,CAAmBiT,UAAnB,GAAgC,YAAY;AACxC,QAAIC,KAAK,GAAG,KAAKlE,UAAL,CAAgBiD,UAA5B;AACA,WAAO,KAAK5R,KAAL,CAAWiK,KAAX,CAAiBnC,GAAjB,CAAqB,UAAU+H,IAAV,EAAgB;AAAE,aAAOgD,KAAK,CAAChD,IAAI,CAACtP,GAAN,CAAZ;AAAyB,KAAhE,CAAP;AACH,GAHD;;AAIA,SAAOmO,QAAP;AACH,CAjL6B,CAiL5B3R,aAjL4B,CAA9B;;AAkLA2R,QAAQ,CAACoE,gBAAT,CAA0B;AACtB/I,EAAAA,oBAAoB,EAAE3L;AADA,CAA1B;;AAGA,SAAS6R,qBAAT,CAA+B8C,UAA/B,EAA2CC,aAA3C,EAA0D;AACtD,MAAI,CAACD,UAAU,CAAClQ,MAAhB,EAAwB;AACpB,WAAO,EAAP;AACH;;AACD,MAAIoQ,gBAAgB,GAAGC,oBAAoB,CAACF,aAAD,CAA3C,CAJsD,CAIM;;AAC5D,SAAOD,UAAU,CAACjL,GAAX,CAAe,UAAUhF,GAAV,EAAe;AAAE,WAAQ;AAC3CA,MAAAA,GAAG,EAAEA,GADsC;AAE3CyF,MAAAA,SAAS,EAAE,IAFgC;AAG3CmD,MAAAA,UAAU,EAAE,IAH+B;AAI3CC,MAAAA,WAAW,EAAEsH,gBAAgB,CAACnQ,GAAG,CAACiC,UAAJ,CAAeiD,QAAf,CAAwBD,UAAzB,CAJc;AAK3CyB,MAAAA,SAAS,EAAE;AALgC,KAAR;AAMlC,GANE,CAAP;AAOH;;AACD,SAAS0J,oBAAT,CAA8BF,aAA9B,EAA6C;AACzC,MAAIC,gBAAgB,GAAG,EAAvB;;AACA,OAAK,IAAItQ,EAAE,GAAG,CAAT,EAAYwQ,eAAe,GAAGH,aAAnC,EAAkDrQ,EAAE,GAAGwQ,eAAe,CAACtQ,MAAvE,EAA+EF,EAAE,EAAjF,EAAqF;AACjF,QAAIyQ,UAAU,GAAGD,eAAe,CAACxQ,EAAD,CAAhC;;AACA,SAAK,IAAI5C,EAAE,GAAG,CAAT,EAAYsT,YAAY,GAAGD,UAAhC,EAA4CrT,EAAE,GAAGsT,YAAY,CAACxQ,MAA9D,EAAsE9C,EAAE,EAAxE,EAA4E;AACxE,UAAIuI,SAAS,GAAG+K,YAAY,CAACtT,EAAD,CAA5B;AACAkT,MAAAA,gBAAgB,CAAC3K,SAAS,CAACxF,GAAV,CAAciC,UAAd,CAAyBiD,QAAzB,CAAkCD,UAAnC,CAAhB,GAAiEO,SAAS,CAACqD,WAA3E;AACH;AACJ;;AACD,SAAOqH,aAAP;AACH;;AAED,IAAIM,KAAK,GAAkB,UAAUhU,MAAV,EAAkB;AACzCJ,EAAAA,SAAS,CAACoU,KAAD,EAAQhU,MAAR,CAAT;;AACA,WAASgU,KAAT,GAAiB;AACb,QAAI/T,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AACAF,IAAAA,KAAK,CAACgU,qBAAN,GAA8B/V,OAAO,CAAC8E,cAAD,CAArC;AACA/C,IAAAA,KAAK,CAACiU,gBAAN,GAAyBhW,OAAO,CAAC8E,cAAD,CAAhC;AACA/C,IAAAA,KAAK,CAACkU,gBAAN,GAAyBjW,OAAO,CAAC8E,cAAD,CAAhC;AACA/C,IAAAA,KAAK,CAACmU,sBAAN,GAA+BlW,OAAO,CAAC8E,cAAD,CAAtC;AACA/C,IAAAA,KAAK,CAACoU,cAAN,GAAuBnW,OAAO,CAAC4F,qBAAD,CAA9B;AACA7D,IAAAA,KAAK,CAACqU,gBAAN,GAAyBpW,OAAO,CAAC4F,qBAAD,CAAhC;AACA7D,IAAAA,KAAK,CAACsU,OAAN,GAAgB,IAAI3V,MAAJ,EAAhB;;AACAqB,IAAAA,KAAK,CAACoJ,YAAN,GAAqB,UAAUmL,MAAV,EAAkB;AACnCvU,MAAAA,KAAK,CAACuU,MAAN,GAAeA,MAAf;;AACA,UAAIA,MAAJ,EAAY;AACRvU,QAAAA,KAAK,CAACU,OAAN,CAAc8T,4BAAd,CAA2CxU,KAA3C,EAAkD;AAC9CqJ,UAAAA,EAAE,EAAEkL,MAD0C;AAE9CE,UAAAA,iBAAiB,EAAEzU,KAAK,CAACS,KAAN,CAAYgU;AAFe,SAAlD;AAIH,OALD,MAMK;AACDzU,QAAAA,KAAK,CAACU,OAAN,CAAcgU,8BAAd,CAA6C1U,KAA7C;AACH;AACJ,KAXD;;AAYA,WAAOA,KAAP;AACH;;AACD+T,EAAAA,KAAK,CAAC3T,SAAN,CAAgB8D,MAAhB,GAAyB,YAAY;AACjC,QAAIlE,KAAK,GAAG,IAAZ;;AACA,QAAIS,KAAK,GAAG,KAAKA,KAAjB;AACA,QAAI8D,WAAW,GAAG9D,KAAK,CAAC8D,WAAxB;AAAA,QAAqC+F,eAAe,GAAG7J,KAAK,CAAC6J,eAA7D;AAAA,QAA8ED,YAAY,GAAG5J,KAAK,CAAC4J,YAAnG;AAAA,QAAiHsK,UAAU,GAAGlU,KAAK,CAACkU,UAApI;AACA,QAAI1R,MAAM,GAAGxC,KAAK,CAACiK,KAAN,CAAYpH,MAAzB;AACA,QAAIsR,qBAAqB,GAAG,KAAKZ,qBAAL,CAA2BvT,KAAK,CAACkP,gBAAjC,EAAmD1M,MAAnD,CAA5B;AACA,QAAI4R,gBAAgB,GAAG,KAAKZ,gBAAL,CAAsBxT,KAAK,CAACoP,WAA5B,EAAyC5M,MAAzC,CAAvB;AACA,QAAI6R,gBAAgB,GAAG,KAAKZ,gBAAL,CAAsBzT,KAAK,CAACyP,WAA5B,EAAyCjN,MAAzC,CAAvB;AACA,QAAI8R,sBAAsB,GAAG,KAAKZ,sBAAL,CAA4B1T,KAAK,CAAC4Q,iBAAlC,EAAqDpO,MAArD,CAA7B;AACA,QAAI+R,cAAc,GAAG,KAAKZ,cAAL,CAAoB3T,KAAK,CAAC4H,SAA1B,EAAqCpF,MAArC,CAArB;AACA,QAAIgS,gBAAgB,GAAG,KAAKZ,gBAAL,CAAsB5T,KAAK,CAAC6H,WAA5B,EAAyCrF,MAAzC,CAAvB;AACA,QAAIiS,gBAAgB,GAAG7K,YAAY,KAAK,IAAjB,IAAyBC,eAAe,KAAK,IAApE,CAXiC,CAYjC;AACA;;AACA,QAAI4K,gBAAgB,IAAI,CAACP,UAAzB,EAAqC;AACjCO,MAAAA,gBAAgB,GAAG,KAAnB;AACA5K,MAAAA,eAAe,GAAG,IAAlB;AACAD,MAAAA,YAAY,GAAG,IAAf;AACH;;AACD,QAAI3I,UAAU,GAAG,CACb,iBADa,EAEbwT,gBAAgB,GAAG,0BAAH,GAAgC,4BAFnC,EAGbP,UAAU,GAAG,EAAH,GAAQ,yBAHL,CAGgC;AAHhC,KAAjB;AAKA,WAAQxX,aAAa,CAAC,KAAD,EAAQ;AAAEyE,MAAAA,SAAS,EAAEF,UAAU,CAACI,IAAX,CAAgB,GAAhB,CAAb;AAAmCH,MAAAA,GAAG,EAAE,KAAKyH,YAA7C;AAA2DnC,MAAAA,KAAK,EAAE;AACvF;AACA;AACAkO,QAAAA,KAAK,EAAE1U,KAAK,CAAC0R,WAH0E;AAIvFrP,QAAAA,QAAQ,EAAErC,KAAK,CAAC2U;AAJuE;AAAlE,KAAR,EAMjBjY,aAAa,CAAC+B,QAAD,EAAW;AAAEmW,MAAAA,IAAI,EAAE;AAAR,KAAX,EAA4B,UAAUC,OAAV,EAAmB9Q,UAAnB,EAA+B;AAAE,aAAQrH,aAAa,CAACQ,QAAD,EAAW,IAAX,EAC3FR,aAAa,CAAC,OAAD,EAAU;AAAEyE,QAAAA,SAAS,EAAE,0BAAb;AAAyCqF,QAAAA,KAAK,EAAE;AAC/DkO,UAAAA,KAAK,EAAE1U,KAAK,CAAC0R,WADkD;AAE/DrP,UAAAA,QAAQ,EAAErC,KAAK,CAAC2U,aAF+C;AAG/DvC,UAAAA,MAAM,EAAE8B,UAAU,GAAGlU,KAAK,CAAC8U,YAAT,GAAwB;AAHqB;AAAhD,OAAV,EAKT9U,KAAK,CAAC+U,YALG,EAMTrY,aAAa,CAAC,OAAD,EAAU,IAAV,EAAgBsD,KAAK,CAACiK,KAAN,CAAYnC,GAAZ,CAAgB,UAAUmC,KAAV,EAAiBlH,GAAjB,EAAsB;AAAE,eAAQrG,aAAa,CAACgS,QAAD,EAAW;AAAExN,UAAAA,GAAG,EAAE3B,KAAK,CAACsU,OAAN,CAAcrX,SAAd,CAAwBuG,GAAxB,CAAP;AAAqCxC,UAAAA,GAAG,EAAE0J,KAAK,CAACpH,MAAN,GACrIoH,KAAK,CAAC,CAAD,CAAL,CAASrG,IAAT,CAAcoR,WAAd;AAA4B;AADyG,YAErIjS,GAF2F,CAEvF;AAFuF;AAG/FoN,UAAAA,cAAc,EAAE3N,MAAM,GAAG,CAHsE;AAGnE4N,UAAAA,eAAe,EAAEpQ,KAAK,CAACoQ,eAH4C;AAG3BrM,UAAAA,UAAU,EAAEA,UAHe;AAGHD,UAAAA,WAAW,EAAEA,WAHV;AAGuBmG,UAAAA,KAAK,EAAEA,KAH9B;AAGqC2F,UAAAA,WAAW,EAAE5P,KAAK,CAACiV,cAHxD;AAGwE/F,UAAAA,gBAAgB,EAAEiF,qBAAqB,CAACpR,GAAD,CAH/G;AAGsHmF,UAAAA,cAAc,EAAElI,KAAK,CAACkI,cAH5I;AAG4JkH,UAAAA,WAAW,EAAEgF,gBAAgB,CAACrR,GAAD,CAAhB,CAAsB6K,MAAtB,CAA6BsH,WAA7B;AAA0C;AAHnN;AAG+NzF,UAAAA,WAAW,EAAE4E,gBAAgB,CAACtR,GAAD,CAH5P;AAGmQ6N,UAAAA,iBAAiB,EAAE0D,sBAAsB,CAACvR,GAAD,CAH5S;AAGmT6E,UAAAA,SAAS,EAAE2M,cAAc,CAACxR,GAAD,CAH5U;AAGmV8E,UAAAA,WAAW,EAAE2M,gBAAgB,CAACzR,GAAD,CAHhX;AAGuX6G,UAAAA,YAAY,EAAEA,YAHrY;AAGmZC,UAAAA,eAAe,EAAEA,eAHpa;AAGqb6H,UAAAA,WAAW,EAAE1R,KAAK,CAAC0R,WAHxc;AAGqdoD,UAAAA,YAAY,EAAE9U,KAAK,CAAC8U,YAHze;AAGufvT,UAAAA,QAAQ,EAAEvB,KAAK,CAACuB;AAHvgB,SAAX,CAArB;AAGsjB,OAH9lB,CAAhB,CANJ,CAD8E,CAArB;AAUikB,KAV9nB,CANI,CAArB;AAiBH,GAzCD,CAzByC,CAmEzC;AACA;;;AACA+R,EAAAA,KAAK,CAAC3T,SAAN,CAAgBwV,WAAhB,GAA8B,YAAY;AACtC,SAAKC,YAAL,GAAoB,IAAI5W,aAAJ,CAAkB,KAAKsV,MAAvB,EAA+B,KAAKD,OAAL,CAAawB,OAAb,GAAuBvN,GAAvB,CAA2B,UAAUwN,MAAV,EAAkB;AAAE,aAAOA,MAAM,CAAC1C,UAAP,GAAoB,CAApB,CAAP;AAAgC,KAA/E,CAA/B,EAAiH;AACrI,SADoB,EACb,IADa,CAApB;AAEA,SAAK2C,YAAL,GAAoB,IAAI/W,aAAJ,CAAkB,KAAKsV,MAAvB,EAA+B,KAAKD,OAAL,CAAajC,UAAb,CAAwB,CAAxB,EAA2BgB,UAA3B,EAA/B,EAAwE;AAC5F,QADoB,EACd;AACN,SAFoB,CAApB;AAGH,GAND;;AAOAU,EAAAA,KAAK,CAAC3T,SAAN,CAAgB6V,QAAhB,GAA2B,UAAUC,YAAV,EAAwBC,WAAxB,EAAqC;AAC5D,QAAI3V,EAAE,GAAG,IAAT;AAAA,QAAewV,YAAY,GAAGxV,EAAE,CAACwV,YAAjC;AAAA,QAA+CH,YAAY,GAAGrV,EAAE,CAACqV,YAAjE;;AACA,QAAIxJ,GAAG,GAAG2J,YAAY,CAACI,WAAb,CAAyBF,YAAzB,CAAV;AACA,QAAI1S,GAAG,GAAGqS,YAAY,CAACQ,UAAb,CAAwBF,WAAxB,CAAV;;AACA,QAAI3S,GAAG,IAAI,IAAP,IAAe6I,GAAG,IAAI,IAA1B,EAAgC;AAC5B,UAAIiE,IAAI,GAAG,KAAK7P,KAAL,CAAWiK,KAAX,CAAiBlH,GAAjB,EAAsB6I,GAAtB,CAAX;AACA,aAAO;AACH9H,QAAAA,WAAW,EAAE,KAAK9D,KAAL,CAAW8D,WADrB;AAEH+R,QAAAA,QAAQ,EAAE1W,QAAQ,CAAC;AAAE6N,UAAAA,KAAK,EAAE,KAAK8I,YAAL,CAAkB/S,GAAlB,EAAuB6I,GAAvB,CAAT;AAAsC3G,UAAAA,MAAM,EAAE;AAA9C,SAAD,EAAuD4K,IAAI,CAACpI,aAA5D,CAFf;AAGHsO,QAAAA,KAAK,EAAE,KAAKC,SAAL,CAAejT,GAAf,EAAoB6I,GAApB,CAHJ;AAIHa,QAAAA,IAAI,EAAE;AACFwE,UAAAA,IAAI,EAAEsE,YAAY,CAACnE,KAAb,CAAmBxF,GAAnB,CADJ;AAEFsF,UAAAA,KAAK,EAAEqE,YAAY,CAAClE,MAAb,CAAoBzF,GAApB,CAFL;AAGF0F,UAAAA,GAAG,EAAE8D,YAAY,CAACa,IAAb,CAAkBlT,GAAlB,CAHH;AAIF4P,UAAAA,MAAM,EAAEyC,YAAY,CAACc,OAAb,CAAqBnT,GAArB;AAJN,SAJH;AAUHoT,QAAAA,KAAK,EAAE;AAVJ,OAAP;AAYH;;AACD,WAAO,IAAP;AACH,GApBD;;AAqBA7C,EAAAA,KAAK,CAAC3T,SAAN,CAAgBqW,SAAhB,GAA4B,UAAUjT,GAAV,EAAe6I,GAAf,EAAoB;AAC5C,WAAO,KAAKiI,OAAL,CAAajC,UAAb,CAAwB7O,GAAxB,EAA6B6P,UAA7B,GAA0ChH,GAA1C,CAAP,CAD4C,CACW;AAC1D,GAFD;;AAGA0H,EAAAA,KAAK,CAAC3T,SAAN,CAAgBmW,YAAhB,GAA+B,UAAU/S,GAAV,EAAe6I,GAAf,EAAoB;AAC/C,QAAIsB,KAAK,GAAG,KAAKlN,KAAL,CAAWiK,KAAX,CAAiBlH,GAAjB,EAAsB6I,GAAtB,EAA2BhI,IAAvC;AACA,QAAIuJ,GAAG,GAAGlP,OAAO,CAACiP,KAAD,EAAQ,CAAR,CAAjB;AACA,WAAO;AAAEA,MAAAA,KAAK,EAAEA,KAAT;AAAgBC,MAAAA,GAAG,EAAEA;AAArB,KAAP;AACH,GAJD;;AAKA,SAAOmG,KAAP;AACH,CA1G0B,CA0GzBvW,aA1GyB,CAA3B;;AA2GA,SAASmY,WAAT,CAAqBpS,GAArB,EAA0B;AACtB,SAAOA,GAAG,CAACiC,UAAJ,CAAeC,GAAf,CAAmBC,MAA1B;AACH;;AAED,IAAImR,cAAc,GAAkB,UAAU9W,MAAV,EAAkB;AAClDJ,EAAAA,SAAS,CAACkX,cAAD,EAAiB9W,MAAjB,CAAT;;AACA,WAAS8W,cAAT,GAA0B;AACtB,QAAI7W,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AACAF,IAAAA,KAAK,CAAC8W,kBAAN,GAA2B,IAA3B;AACA,WAAO9W,KAAP;AACH;;AACD6W,EAAAA,cAAc,CAACzW,SAAf,CAAyB2W,UAAzB,GAAsC,UAAUC,SAAV,EAAqBC,aAArB,EAAoC;AACtE,WAAOA,aAAa,CAACF,UAAd,CAAyBC,SAAzB,CAAP;AACH,GAFD;;AAGA,SAAOH,cAAP;AACH,CAXmC,CAWlC1X,MAXkC,CAApC;;AAaA,IAAI+X,QAAQ,GAAkB,UAAUnX,MAAV,EAAkB;AAC5CJ,EAAAA,SAAS,CAACuX,QAAD,EAAWnX,MAAX,CAAT;;AACA,WAASmX,QAAT,GAAoB;AAChB,QAAIlX,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AACAF,IAAAA,KAAK,CAACmX,MAAN,GAAe,IAAIN,cAAJ,EAAf;AACA7W,IAAAA,KAAK,CAACoX,QAAN,GAAiBna,SAAS,EAA1B;AACA,WAAO+C,KAAP;AACH;;AACDkX,EAAAA,QAAQ,CAAC9W,SAAT,CAAmB8D,MAAnB,GAA4B,YAAY;AACpC,QAAI1D,EAAE,GAAG,IAAT;AAAA,QAAeC,KAAK,GAAGD,EAAE,CAACC,KAA1B;AAAA,QAAiCC,OAAO,GAAGF,EAAE,CAACE,OAA9C;;AACA,WAAQvD,aAAa,CAAC4W,KAAD,EAAQnU,QAAQ,CAAC;AAAE+B,MAAAA,GAAG,EAAE,KAAKyV;AAAZ,KAAD,EAAyB,KAAKD,MAAL,CAAYE,UAAZ,CAAuB5W,KAAvB,EAA8BA,KAAK,CAAC8D,WAApC,EAAiD9D,KAAK,CAAC6W,gBAAvD,EAAyE5W,OAAzE,EAAkFD,KAAK,CAACwW,aAAxF,CAAzB,EAAiI;AAAE1S,MAAAA,WAAW,EAAE9D,KAAK,CAAC8D,WAArB;AAAkCmG,MAAAA,KAAK,EAAEjK,KAAK,CAACwW,aAAN,CAAoBvM,KAA7D;AAAoE8K,MAAAA,YAAY,EAAE/U,KAAK,CAAC+U,YAAxF;AAAsGJ,MAAAA,aAAa,EAAE3U,KAAK,CAAC2U,aAA3H;AAA0IM,MAAAA,cAAc,EAAEjV,KAAK,CAACiV,cAAhK;AAAgLrL,MAAAA,YAAY,EAAE5J,KAAK,CAAC4J,YAApM;AAAkNC,MAAAA,eAAe,EAAE7J,KAAK,CAAC6J,eAAzO;AAA0PuG,MAAAA,eAAe,EAAEpQ,KAAK,CAACoQ,eAAjR;AAAkS8D,MAAAA,UAAU,EAAElU,KAAK,CAACkU,UAApT;AAAgU4C,MAAAA,gBAAgB,EAAE9W,KAAK,CAAC8W,gBAAxV;AAA0WpF,MAAAA,WAAW,EAAE1R,KAAK,CAAC0R,WAA7X;AAA0YoD,MAAAA,YAAY,EAAE9U,KAAK,CAAC8U,YAA9Z;AAA4avT,MAAAA,QAAQ,EAAEvB,KAAK,CAACuB;AAA5b,KAAjI,CAAhB,CAArB;AACH,GAHD;;AAIA,SAAOkV,QAAP;AACH,CAb6B,CAa5B1Z,aAb4B,CAA9B;;AAeA,IAAIga,YAAY,GAAkB,UAAUzX,MAAV,EAAkB;AAChDJ,EAAAA,SAAS,CAAC6X,YAAD,EAAezX,MAAf,CAAT;;AACA,WAASyX,YAAT,GAAwB;AACpB,QAAIxX,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AACAF,IAAAA,KAAK,CAACyX,kBAAN,GAA2BxZ,OAAO,CAACwZ,kBAAD,CAAlC;AACAzX,IAAAA,KAAK,CAAC0X,SAAN,GAAkBza,SAAS,EAA3B;AACA+C,IAAAA,KAAK,CAACoX,QAAN,GAAiBna,SAAS,EAA1B;AACA,WAAO+C,KAAP;AACH;;AACDwX,EAAAA,YAAY,CAACpX,SAAb,CAAuB8D,MAAvB,GAAgC,YAAY;AACxC,QAAIlE,KAAK,GAAG,IAAZ;;AACA,QAAIQ,EAAE,GAAG,KAAKE,OAAd;AAAA,QAAuBG,OAAO,GAAGL,EAAE,CAACK,OAApC;AAAA,QAA6C8W,oBAAoB,GAAGnX,EAAE,CAACmX,oBAAvE;AACA,QAAIlX,KAAK,GAAG,KAAKA,KAAjB;AACA,QAAIwW,aAAa,GAAG,KAAKQ,kBAAL,CAAwBhX,KAAK,CAAC8D,WAA9B,EAA2CoT,oBAA3C,CAApB;AACA,QAAIC,aAAa,GAAG/W,OAAO,CAACgX,UAAR,IAAuB1a,aAAa,CAACiC,SAAD,EAAY;AAAEuC,MAAAA,GAAG,EAAE,KAAK+V,SAAZ;AAAuBnT,MAAAA,WAAW,EAAE9D,KAAK,CAAC8D,WAA1C;AAAuDuT,MAAAA,KAAK,EAAEb,aAAa,CAACc,WAA5E;AAAyFC,MAAAA,oBAAoB,EAAEf,aAAa,CAAChU,MAAd,KAAyB;AAAxI,KAAZ,CAAxD;;AACA,QAAI1C,WAAW,GAAG,SAAdA,WAAc,CAAU0X,UAAV,EAAsB;AAAE,aAAQ9a,aAAa,CAAC+Z,QAAD,EAAW;AAAEvV,QAAAA,GAAG,EAAE3B,KAAK,CAACoX,QAAb;AAAuB7S,QAAAA,WAAW,EAAE9D,KAAK,CAAC8D,WAA1C;AAAuD0S,QAAAA,aAAa,EAAEA,aAAtE;AAAqFiB,QAAAA,aAAa,EAAEzX,KAAK,CAACyX,aAA1G;AAAyHC,QAAAA,aAAa,EAAE1X,KAAK,CAAC0X,aAA9I;AAA6JC,QAAAA,UAAU,EAAE3X,KAAK,CAAC2X,UAA/K;AAA2LC,QAAAA,YAAY,EAAE5X,KAAK,CAAC4X,YAA/M;AAA6N1P,QAAAA,cAAc,EAAElI,KAAK,CAACkI,cAAnP;AAAmQN,QAAAA,SAAS,EAAE5H,KAAK,CAAC4H,SAApR;AAA+RC,QAAAA,WAAW,EAAE7H,KAAK,CAAC6H,WAAlT;AAA+TgP,QAAAA,gBAAgB,EAAEzW,OAAO,CAACyW,gBAAzV;AAA2W9B,QAAAA,YAAY,EAAEyC,UAAU,CAACK,iBAApY;AAAuZlD,QAAAA,aAAa,EAAE6C,UAAU,CAAC7C,aAAjb;AAAgc/K,QAAAA,YAAY,EAAExJ,OAAO,CAACwJ,YAAtd;AAAoeC,QAAAA,eAAe,EAAEzJ,OAAO,CAACyJ,eAA7f;AAA8gBuG,QAAAA,eAAe,EAAEhQ,OAAO,CAAC0X,WAAviB;AAAojB5D,QAAAA,UAAU,EAAE,CAAClU,KAAK,CAACsB,YAAvkB;AAAqlBwV,QAAAA,gBAAgB,EAAEvX,KAAK,CAACG,WAA7mB;AAA0nBgS,QAAAA,WAAW,EAAE8F,UAAU,CAAC9F,WAAlpB;AAA+pBoD,QAAAA,YAAY,EAAE0C,UAAU,CAAC1C,YAAxrB;AAAssBvT,QAAAA,QAAQ,EAAEvB,KAAK,CAACuB;AAAttB,OAAX,CAArB;AAAqwB,KAA/yB;;AACA,WAAOnB,OAAO,CAACwB,WAAR,GACD,KAAKF,mBAAL,CAAyByV,aAAzB,EAAwCrX,WAAxC,EAAqD0W,aAAa,CAAC7U,MAAnE,EAA2EvB,OAAO,CAACwB,WAAnF,CADC,GAED,KAAKhC,kBAAL,CAAwBuX,aAAxB,EAAuCrX,WAAvC,CAFN;AAGH,GAVD;;AAWA,SAAOiX,YAAP;AACH,CArBiC,CAqBhC1X,SArBgC,CAAlC;;AAsBA,SAAS2X,kBAAT,CAA4BlT,WAA5B,EAAyCoT,oBAAzC,EAA+D;AAC3D,MAAIa,SAAS,GAAG,IAAInZ,cAAJ,CAAmBkF,WAAW,CAACkU,WAA/B,EAA4Cd,oBAA5C,CAAhB;AACA,SAAO,IAAIrY,aAAJ,CAAkBkZ,SAAlB,EAA6B,kBAAkBE,IAAlB,CAAuBnU,WAAW,CAACoU,gBAAnC,CAA7B,CAAP;AACH;;AAED,IAAIC,yBAAyB,GAAkB,UAAU7Y,MAAV,EAAkB;AAC7DJ,EAAAA,SAAS,CAACiZ,yBAAD,EAA4B7Y,MAA5B,CAAT;;AACA,WAAS6Y,yBAAT,GAAqC;AACjC,WAAO7Y,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACH,GAJ4D,CAK7D;;;AACA0Y,EAAAA,yBAAyB,CAACxY,SAA1B,CAAoCyY,gBAApC,GAAuD,UAAUC,YAAV,EAAwBH,gBAAxB,EAA0CI,aAA1C,EAAyD;AAC5G,QAAIC,OAAO,GAAG,KAAKvY,KAAL,CAAWuY,OAAzB;;AACA,QAAIP,WAAW,GAAG1Y,MAAM,CAACK,SAAP,CAAiByY,gBAAjB,CAAkC7K,IAAlC,CAAuC,IAAvC,EAA6C8K,YAA7C,EAA2DH,gBAA3D,EAA6EI,aAA7E,CAAlB;;AACA,QAAIpL,KAAK,GAAG8K,WAAW,CAAC9K,KAAxB;AACA,QAAIC,GAAG,GAAG6K,WAAW,CAAC7K,GAAtB;AACA,QAAIqL,SAAJ,CAL4G,CAM5G;;AACA,QAAI,iBAAiBP,IAAjB,CAAsBC,gBAAtB,CAAJ,EAA6C;AACzChL,MAAAA,KAAK,GAAGqL,OAAO,CAACE,WAAR,CAAoBvL,KAApB,CAAR,CADyC,CAEzC;;AACAsL,MAAAA,SAAS,GAAGD,OAAO,CAACE,WAAR,CAAoBtL,GAApB,CAAZ;;AACA,UAAIqL,SAAS,CAACnL,OAAV,OAAwBF,GAAG,CAACE,OAAJ,EAA5B,EAA2C;AACvCF,QAAAA,GAAG,GAAGrO,QAAQ,CAAC0Z,SAAD,EAAY,CAAZ,CAAd;AACH;AACJ,KAd2G,CAe5G;;;AACA,QAAI,KAAKxY,KAAL,CAAW0Y,SAAX,IACA,KAAK1Y,KAAL,CAAW2Y,cADf,EAC+B;AAC3B,UAAInW,MAAM,GAAG6L,IAAI,CAACuK,IAAL,EAAU;AACvB7Z,MAAAA,SAAS,CAACmO,KAAD,EAAQC,GAAR,CADI,CAAb;AAEAA,MAAAA,GAAG,GAAGrO,QAAQ,CAACqO,GAAD,EAAM,IAAI3K,MAAV,CAAd;AACH;;AACD,WAAO;AAAE0K,MAAAA,KAAK,EAAEA,KAAT;AAAgBC,MAAAA,GAAG,EAAEA;AAArB,KAAP;AACH,GAvBD;;AAwBA,SAAOgL,yBAAP;AACH,CA/B8C,CA+B7CnZ,oBA/B6C,CAA/C;;AAiCA,IAAI6Z,IAAI,GAAG5Z,YAAY,CAAC;AACpB6Z,EAAAA,WAAW,EAAE,cADO;AAEpBC,EAAAA,KAAK,EAAE;AACHC,IAAAA,OAAO,EAAE;AACLC,MAAAA,SAAS,EAAElC,YADN;AAELmC,MAAAA,yBAAyB,EAAEf;AAFtB,KADN;AAKHgB,IAAAA,UAAU,EAAE;AACR7Y,MAAAA,IAAI,EAAE,SADE;AAER8Y,MAAAA,QAAQ,EAAE;AAAEC,QAAAA,IAAI,EAAE;AAAR;AAFF,KALT;AASHC,IAAAA,WAAW,EAAE;AACThZ,MAAAA,IAAI,EAAE,SADG;AAET8Y,MAAAA,QAAQ,EAAE;AAAEG,QAAAA,KAAK,EAAE;AAAT;AAFD,KATV;AAaHC,IAAAA,YAAY,EAAE;AACVlZ,MAAAA,IAAI,EAAE,SADI;AAEV8Y,MAAAA,QAAQ,EAAE;AAAEK,QAAAA,MAAM,EAAE;AAAV,OAFA;AAGVf,MAAAA,SAAS,EAAE,IAHD;AAIVC,MAAAA,cAAc,EAAE;AAJN;AAbX;AAFa,CAAD,CAAvB;AAwBA,eAAeE,IAAf;AACA,SAAS9B,YAAY,IAAI2C,WAAzB,EAAsCjD,QAAtC,EAAgDL,cAAhD,EAAgE9C,KAAhE,EAAuEjU,SAAvE,EAAkF2X,kBAAlF,G,CACA","sourcesContent":["/*!\nFullCalendar v5.7.2\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport './main.css';\n\nimport { createRef, getStickyHeaderDates, createElement, ViewRoot, SimpleScrollGrid, getStickyFooterScrollbar, renderScrollShim, DateComponent, buildNavLinkData, DayCellContent, Fragment, BaseComponent, createFormatter, StandardEvent, buildSegTimeText, EventRoot, memoize, MoreLinkRoot, getSegMeta, setRef, DayCellRoot, WeekNumberRoot, buildEntryKey, SegHierarchy, intersectRanges, addDays, RefMap, sortEventSegs, isPropsEqual, buildEventRangeKey, BgEvent, renderFill, PositionCache, NowTimer, Slicer, DayHeader, DaySeriesModel, DayTableModel, addWeeks, diffWeeks, DateProfileGenerator, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign, __spreadArray } from 'tslib';\n\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a Table subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\nvar TableView = /** @class */ (function (_super) {\n    __extends(TableView, _super);\n    function TableView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.headerElRef = createRef();\n        return _this;\n    }\n    TableView.prototype.renderSimpleLayout = function (headerRowContent, bodyContent) {\n        var _a = this, props = _a.props, context = _a.context;\n        var sections = [];\n        var stickyHeaderDates = getStickyHeaderDates(context.options);\n        if (headerRowContent) {\n            sections.push({\n                type: 'header',\n                key: 'header',\n                isSticky: stickyHeaderDates,\n                chunk: {\n                    elRef: this.headerElRef,\n                    tableClassName: 'fc-col-header',\n                    rowContent: headerRowContent,\n                },\n            });\n        }\n        sections.push({\n            type: 'body',\n            key: 'body',\n            liquid: true,\n            chunk: { content: bodyContent },\n        });\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec }, function (rootElRef, classNames) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-daygrid'].concat(classNames).join(' ') },\n            createElement(SimpleScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, collapsibleWidth: props.forPrint, cols: [] /* TODO: make optional? */, sections: sections }))); }));\n    };\n    TableView.prototype.renderHScrollLayout = function (headerRowContent, bodyContent, colCnt, dayMinWidth) {\n        var ScrollGrid = this.context.pluginHooks.scrollGridImpl;\n        if (!ScrollGrid) {\n            throw new Error('No ScrollGrid implementation');\n        }\n        var _a = this, props = _a.props, context = _a.context;\n        var stickyHeaderDates = !props.forPrint && getStickyHeaderDates(context.options);\n        var stickyFooterScrollbar = !props.forPrint && getStickyFooterScrollbar(context.options);\n        var sections = [];\n        if (headerRowContent) {\n            sections.push({\n                type: 'header',\n                key: 'header',\n                isSticky: stickyHeaderDates,\n                chunks: [{\n                        key: 'main',\n                        elRef: this.headerElRef,\n                        tableClassName: 'fc-col-header',\n                        rowContent: headerRowContent,\n                    }],\n            });\n        }\n        sections.push({\n            type: 'body',\n            key: 'body',\n            liquid: true,\n            chunks: [{\n                    key: 'main',\n                    content: bodyContent,\n                }],\n        });\n        if (stickyFooterScrollbar) {\n            sections.push({\n                type: 'footer',\n                key: 'footer',\n                isSticky: true,\n                chunks: [{\n                        key: 'main',\n                        content: renderScrollShim,\n                    }],\n            });\n        }\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec }, function (rootElRef, classNames) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-daygrid'].concat(classNames).join(' ') },\n            createElement(ScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, collapsibleWidth: props.forPrint, colGroups: [{ cols: [{ span: colCnt, minWidth: dayMinWidth }] }], sections: sections }))); }));\n    };\n    return TableView;\n}(DateComponent));\n\nfunction splitSegsByRow(segs, rowCnt) {\n    var byRow = [];\n    for (var i = 0; i < rowCnt; i += 1) {\n        byRow[i] = [];\n    }\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        byRow[seg.row].push(seg);\n    }\n    return byRow;\n}\nfunction splitSegsByFirstCol(segs, colCnt) {\n    var byCol = [];\n    for (var i = 0; i < colCnt; i += 1) {\n        byCol[i] = [];\n    }\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n        var seg = segs_2[_i];\n        byCol[seg.firstCol].push(seg);\n    }\n    return byCol;\n}\nfunction splitInteractionByRow(ui, rowCnt) {\n    var byRow = [];\n    if (!ui) {\n        for (var i = 0; i < rowCnt; i += 1) {\n            byRow[i] = null;\n        }\n    }\n    else {\n        for (var i = 0; i < rowCnt; i += 1) {\n            byRow[i] = {\n                affectedInstances: ui.affectedInstances,\n                isEvent: ui.isEvent,\n                segs: [],\n            };\n        }\n        for (var _i = 0, _a = ui.segs; _i < _a.length; _i++) {\n            var seg = _a[_i];\n            byRow[seg.row].segs.push(seg);\n        }\n    }\n    return byRow;\n}\n\nvar TableCellTop = /** @class */ (function (_super) {\n    __extends(TableCellTop, _super);\n    function TableCellTop() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableCellTop.prototype.render = function () {\n        var props = this.props;\n        var navLinkAttrs = this.context.options.navLinks\n            ? { 'data-navlink': buildNavLinkData(props.date), tabIndex: 0 }\n            : {};\n        return (createElement(DayCellContent, { date: props.date, dateProfile: props.dateProfile, todayRange: props.todayRange, showDayNumber: props.showDayNumber, extraHookProps: props.extraHookProps, defaultContent: renderTopInner }, function (innerElRef, innerContent) { return ((innerContent || props.forceDayTop) && (createElement(\"div\", { className: \"fc-daygrid-day-top\", ref: innerElRef },\n            createElement(\"a\", __assign({ className: \"fc-daygrid-day-number\" }, navLinkAttrs), innerContent || createElement(Fragment, null, \"\\u00A0\"))))); }));\n    };\n    return TableCellTop;\n}(BaseComponent));\nfunction renderTopInner(props) {\n    return props.dayNumberText;\n}\n\nvar DEFAULT_TABLE_EVENT_TIME_FORMAT = createFormatter({\n    hour: 'numeric',\n    minute: '2-digit',\n    omitZeroMinute: true,\n    meridiem: 'narrow',\n});\nfunction hasListItemDisplay(seg) {\n    var display = seg.eventRange.ui.display;\n    return display === 'list-item' || (display === 'auto' &&\n        !seg.eventRange.def.allDay &&\n        seg.firstCol === seg.lastCol && // can't be multi-day\n        seg.isStart && // \"\n        seg.isEnd // \"\n    );\n}\n\nvar TableBlockEvent = /** @class */ (function (_super) {\n    __extends(TableBlockEvent, _super);\n    function TableBlockEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableBlockEvent.prototype.render = function () {\n        var props = this.props;\n        return (createElement(StandardEvent, __assign({}, props, { extraClassNames: ['fc-daygrid-event', 'fc-daygrid-block-event', 'fc-h-event'], defaultTimeFormat: DEFAULT_TABLE_EVENT_TIME_FORMAT, defaultDisplayEventEnd: props.defaultDisplayEventEnd, disableResizing: !props.seg.eventRange.def.allDay })));\n    };\n    return TableBlockEvent;\n}(BaseComponent));\n\nvar TableListItemEvent = /** @class */ (function (_super) {\n    __extends(TableListItemEvent, _super);\n    function TableListItemEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableListItemEvent.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var timeFormat = context.options.eventTimeFormat || DEFAULT_TABLE_EVENT_TIME_FORMAT;\n        var timeText = buildSegTimeText(props.seg, timeFormat, context, true, props.defaultDisplayEventEnd);\n        return (createElement(EventRoot, { seg: props.seg, timeText: timeText, defaultContent: renderInnerContent, isDragging: props.isDragging, isResizing: false, isDateSelecting: false, isSelected: props.isSelected, isPast: props.isPast, isFuture: props.isFuture, isToday: props.isToday }, function (rootElRef, classNames, innerElRef, innerContent) { return ( // we don't use styles!\n        createElement(\"a\", __assign({ className: ['fc-daygrid-event', 'fc-daygrid-dot-event'].concat(classNames).join(' '), ref: rootElRef }, getSegAnchorAttrs(props.seg)), innerContent)); }));\n    };\n    return TableListItemEvent;\n}(BaseComponent));\nfunction renderInnerContent(innerProps) {\n    return (createElement(Fragment, null,\n        createElement(\"div\", { className: \"fc-daygrid-event-dot\", style: { borderColor: innerProps.borderColor || innerProps.backgroundColor } }),\n        innerProps.timeText && (createElement(\"div\", { className: \"fc-event-time\" }, innerProps.timeText)),\n        createElement(\"div\", { className: \"fc-event-title\" }, innerProps.event.title || createElement(Fragment, null, \"\\u00A0\"))));\n}\nfunction getSegAnchorAttrs(seg) {\n    var url = seg.eventRange.def.url;\n    return url ? { href: url } : {};\n}\n\nvar TableCellMoreLink = /** @class */ (function (_super) {\n    __extends(TableCellMoreLink, _super);\n    function TableCellMoreLink() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.compileSegs = memoize(compileSegs);\n        return _this;\n    }\n    TableCellMoreLink.prototype.render = function () {\n        var props = this.props;\n        var _a = this.compileSegs(props.singlePlacements), allSegs = _a.allSegs, invisibleSegs = _a.invisibleSegs;\n        return (createElement(MoreLinkRoot, { dateProfile: props.dateProfile, todayRange: props.todayRange, allDayDate: props.allDayDate, moreCnt: props.moreCnt, allSegs: allSegs, hiddenSegs: invisibleSegs, alignmentElRef: props.alignmentElRef, alignGridTop: props.alignGridTop, extraDateSpan: props.extraDateSpan, popoverContent: function () {\n                var isForcedInvisible = (props.eventDrag ? props.eventDrag.affectedInstances : null) ||\n                    (props.eventResize ? props.eventResize.affectedInstances : null) ||\n                    {};\n                return (createElement(Fragment, null, allSegs.map(function (seg) {\n                    var instanceId = seg.eventRange.instance.instanceId;\n                    return (createElement(\"div\", { className: \"fc-daygrid-event-harness\", key: instanceId, style: {\n                            visibility: isForcedInvisible[instanceId] ? 'hidden' : '',\n                        } }, hasListItemDisplay(seg) ? (createElement(TableListItemEvent, __assign({ seg: seg, isDragging: false, isSelected: instanceId === props.eventSelection, defaultDisplayEventEnd: false }, getSegMeta(seg, props.todayRange)))) : (createElement(TableBlockEvent, __assign({ seg: seg, isDragging: false, isResizing: false, isDateSelecting: false, isSelected: instanceId === props.eventSelection, defaultDisplayEventEnd: false }, getSegMeta(seg, props.todayRange))))));\n                })));\n            } }, function (rootElRef, classNames, innerElRef, innerContent, handleClick) { return (createElement(\"a\", { ref: rootElRef, className: ['fc-daygrid-more-link'].concat(classNames).join(' '), onClick: handleClick }, innerContent)); }));\n    };\n    return TableCellMoreLink;\n}(BaseComponent));\nfunction compileSegs(singlePlacements) {\n    var allSegs = [];\n    var invisibleSegs = [];\n    for (var _i = 0, singlePlacements_1 = singlePlacements; _i < singlePlacements_1.length; _i++) {\n        var placement = singlePlacements_1[_i];\n        allSegs.push(placement.seg);\n        if (!placement.isVisible) {\n            invisibleSegs.push(placement.seg);\n        }\n    }\n    return { allSegs: allSegs, invisibleSegs: invisibleSegs };\n}\n\nvar DEFAULT_WEEK_NUM_FORMAT = createFormatter({ week: 'narrow' });\nvar TableCell = /** @class */ (function (_super) {\n    __extends(TableCell, _super);\n    function TableCell() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.rootElRef = createRef();\n        _this.handleRootEl = function (el) {\n            setRef(_this.rootElRef, el);\n            setRef(_this.props.elRef, el);\n        };\n        return _this;\n    }\n    TableCell.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context, rootElRef = _a.rootElRef;\n        var options = context.options;\n        var date = props.date, dateProfile = props.dateProfile;\n        var navLinkAttrs = options.navLinks\n            ? { 'data-navlink': buildNavLinkData(date, 'week'), tabIndex: 0 }\n            : {};\n        return (createElement(DayCellRoot, { date: date, dateProfile: dateProfile, todayRange: props.todayRange, showDayNumber: props.showDayNumber, extraHookProps: props.extraHookProps, elRef: this.handleRootEl }, function (dayElRef, dayClassNames, rootDataAttrs, isDisabled) { return (createElement(\"td\", __assign({ ref: dayElRef, className: ['fc-daygrid-day'].concat(dayClassNames, props.extraClassNames || []).join(' ') }, rootDataAttrs, props.extraDataAttrs),\n            createElement(\"div\", { className: \"fc-daygrid-day-frame fc-scrollgrid-sync-inner\", ref: props.innerElRef /* different from hook system! RENAME */ },\n                props.showWeekNumber && (createElement(WeekNumberRoot, { date: date, defaultFormat: DEFAULT_WEEK_NUM_FORMAT }, function (weekElRef, weekClassNames, innerElRef, innerContent) { return (createElement(\"a\", __assign({ ref: weekElRef, className: ['fc-daygrid-week-number'].concat(weekClassNames).join(' ') }, navLinkAttrs), innerContent)); })),\n                !isDisabled && (createElement(TableCellTop, { date: date, dateProfile: dateProfile, showDayNumber: props.showDayNumber, forceDayTop: props.forceDayTop, todayRange: props.todayRange, extraHookProps: props.extraHookProps })),\n                createElement(\"div\", { className: \"fc-daygrid-day-events\", ref: props.fgContentElRef },\n                    props.fgContent,\n                    createElement(\"div\", { className: \"fc-daygrid-day-bottom\", style: { marginTop: props.moreMarginTop } },\n                        createElement(TableCellMoreLink, { allDayDate: date, singlePlacements: props.singlePlacements, moreCnt: props.moreCnt, alignmentElRef: rootElRef, alignGridTop: !props.showDayNumber, extraDateSpan: props.extraDateSpan, dateProfile: props.dateProfile, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, todayRange: props.todayRange }))),\n                createElement(\"div\", { className: \"fc-daygrid-day-bg\" }, props.bgContent)))); }));\n    };\n    return TableCell;\n}(DateComponent));\n\nfunction computeFgSegPlacement(segs, // assumed already sorted\ndayMaxEvents, dayMaxEventRows, strictOrder, eventInstanceHeights, maxContentHeight, cells) {\n    var hierarchy = new DayGridSegHierarchy();\n    hierarchy.allowReslicing = true;\n    hierarchy.strictOrder = strictOrder;\n    if (dayMaxEvents === true || dayMaxEventRows === true) {\n        hierarchy.maxCoord = maxContentHeight;\n        hierarchy.hiddenConsumes = true;\n    }\n    else if (typeof dayMaxEvents === 'number') {\n        hierarchy.maxStackCnt = dayMaxEvents;\n    }\n    else if (typeof dayMaxEventRows === 'number') {\n        hierarchy.maxStackCnt = dayMaxEventRows;\n        hierarchy.hiddenConsumes = true;\n    }\n    // create segInputs only for segs with known heights\n    var segInputs = [];\n    var unknownHeightSegs = [];\n    for (var i = 0; i < segs.length; i += 1) {\n        var seg = segs[i];\n        var instanceId = seg.eventRange.instance.instanceId;\n        var eventHeight = eventInstanceHeights[instanceId];\n        if (eventHeight != null) {\n            segInputs.push({\n                index: i,\n                spanStart: seg.firstCol,\n                spanEnd: seg.lastCol + 1,\n                thickness: eventHeight,\n            });\n        }\n        else {\n            unknownHeightSegs.push(seg);\n        }\n    }\n    var hiddenEntries = hierarchy.addSegs(segInputs);\n    var segRects = hierarchy.toRects();\n    var _a = placeRects(segRects, segs, cells), singleColPlacements = _a.singleColPlacements, multiColPlacements = _a.multiColPlacements, leftoverMargins = _a.leftoverMargins;\n    var moreCnts = [];\n    var moreMarginTops = [];\n    // add segs with unknown heights\n    for (var _i = 0, unknownHeightSegs_1 = unknownHeightSegs; _i < unknownHeightSegs_1.length; _i++) {\n        var seg = unknownHeightSegs_1[_i];\n        multiColPlacements[seg.firstCol].push({\n            seg: seg,\n            isVisible: false,\n            isAbsolute: true,\n            absoluteTop: 0,\n            marginTop: 0,\n        });\n        for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n            singleColPlacements[col].push({\n                seg: resliceSeg(seg, col, col + 1, cells),\n                isVisible: false,\n                isAbsolute: false,\n                absoluteTop: 0,\n                marginTop: 0,\n            });\n        }\n    }\n    // add the hidden entries\n    for (var col = 0; col < cells.length; col += 1) {\n        moreCnts.push(0);\n    }\n    for (var _b = 0, hiddenEntries_1 = hiddenEntries; _b < hiddenEntries_1.length; _b++) {\n        var hiddenEntry = hiddenEntries_1[_b];\n        var seg = segs[hiddenEntry.segInput.index];\n        multiColPlacements[hiddenEntry.spanStart].push({\n            seg: seg,\n            isVisible: false,\n            isAbsolute: true,\n            absoluteTop: 0,\n            marginTop: 0,\n        });\n        for (var col = hiddenEntry.spanStart; col < hiddenEntry.spanEnd; col += 1) {\n            moreCnts[col] += 1;\n            singleColPlacements[col].push({\n                seg: resliceSeg(seg, col, col + 1, cells),\n                isVisible: false,\n                isAbsolute: false,\n                absoluteTop: 0,\n                marginTop: 0,\n            });\n        }\n    }\n    // deal with leftover margins\n    for (var col = 0; col < cells.length; col += 1) {\n        moreMarginTops.push(leftoverMargins[col]);\n    }\n    return { singleColPlacements: singleColPlacements, multiColPlacements: multiColPlacements, moreCnts: moreCnts, moreMarginTops: moreMarginTops };\n}\n// rects ordered by top coord, then left\nfunction placeRects(allRects, segs, cells) {\n    var rectsByEachCol = groupRectsByEachCol(allRects, cells.length);\n    var singleColPlacements = [];\n    var multiColPlacements = [];\n    var leftoverMargins = [];\n    for (var col = 0; col < cells.length; col += 1) {\n        var rects = rectsByEachCol[col];\n        // compute all static segs in singlePlacements\n        var singlePlacements = [];\n        var currentHeight = 0;\n        var currentMarginTop = 0;\n        for (var _i = 0, rects_1 = rects; _i < rects_1.length; _i++) {\n            var rect = rects_1[_i];\n            var seg = segs[rect.segInput.index];\n            singlePlacements.push({\n                seg: resliceSeg(seg, col, col + 1, cells),\n                isVisible: true,\n                isAbsolute: false,\n                absoluteTop: 0,\n                marginTop: rect.levelCoord - currentHeight,\n            });\n            currentHeight = rect.levelCoord + rect.thickness;\n        }\n        // compute mixed static/absolute segs in multiPlacements\n        var multiPlacements = [];\n        currentHeight = 0;\n        currentMarginTop = 0;\n        for (var _a = 0, rects_2 = rects; _a < rects_2.length; _a++) {\n            var rect = rects_2[_a];\n            var seg = segs[rect.segInput.index];\n            var isAbsolute = rect.spanEnd - rect.spanStart > 1; // multi-column?\n            var isFirstCol = rect.spanStart === col;\n            currentMarginTop += rect.levelCoord - currentHeight; // amount of space since bottom of previous seg\n            currentHeight = rect.levelCoord + rect.thickness; // height will now be bottom of current seg\n            if (isAbsolute) {\n                currentMarginTop += rect.thickness;\n                if (isFirstCol) {\n                    multiPlacements.push({\n                        seg: resliceSeg(seg, rect.spanStart, rect.spanEnd, cells),\n                        isVisible: true,\n                        isAbsolute: true,\n                        absoluteTop: rect.levelCoord,\n                        marginTop: 0,\n                    });\n                }\n            }\n            else if (isFirstCol) {\n                multiPlacements.push({\n                    seg: resliceSeg(seg, rect.spanStart, rect.spanEnd, cells),\n                    isVisible: true,\n                    isAbsolute: false,\n                    absoluteTop: 0,\n                    marginTop: currentMarginTop, // claim the margin\n                });\n                currentMarginTop = 0;\n            }\n        }\n        singleColPlacements.push(singlePlacements);\n        multiColPlacements.push(multiPlacements);\n        leftoverMargins.push(currentMarginTop);\n    }\n    return { singleColPlacements: singleColPlacements, multiColPlacements: multiColPlacements, leftoverMargins: leftoverMargins };\n}\nfunction groupRectsByEachCol(rects, colCnt) {\n    var rectsByEachCol = [];\n    for (var col = 0; col < colCnt; col += 1) {\n        rectsByEachCol.push([]);\n    }\n    for (var _i = 0, rects_3 = rects; _i < rects_3.length; _i++) {\n        var rect = rects_3[_i];\n        for (var col = rect.spanStart; col < rect.spanEnd; col += 1) {\n            rectsByEachCol[col].push(rect);\n        }\n    }\n    return rectsByEachCol;\n}\nfunction resliceSeg(seg, spanStart, spanEnd, cells) {\n    if (seg.firstCol === spanStart && seg.lastCol === spanEnd - 1) {\n        return seg;\n    }\n    var eventRange = seg.eventRange;\n    var origRange = eventRange.range;\n    var slicedRange = intersectRanges(origRange, {\n        start: cells[spanStart].date,\n        end: addDays(cells[spanEnd - 1].date, 1),\n    });\n    return __assign(__assign({}, seg), { firstCol: spanStart, lastCol: spanEnd - 1, eventRange: {\n            def: eventRange.def,\n            ui: __assign(__assign({}, eventRange.ui), { durationEditable: false }),\n            instance: eventRange.instance,\n            range: slicedRange,\n        }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() });\n}\nvar DayGridSegHierarchy = /** @class */ (function (_super) {\n    __extends(DayGridSegHierarchy, _super);\n    function DayGridSegHierarchy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // config\n        _this.hiddenConsumes = false;\n        // allows us to keep hidden entries in the hierarchy so they take up space\n        _this.forceHidden = {};\n        return _this;\n    }\n    DayGridSegHierarchy.prototype.addSegs = function (segInputs) {\n        var _this = this;\n        var hiddenSegs = _super.prototype.addSegs.call(this, segInputs);\n        var entriesByLevel = this.entriesByLevel;\n        var excludeHidden = function (entry) { return !_this.forceHidden[buildEntryKey(entry)]; };\n        // remove the forced-hidden segs\n        for (var level = 0; level < entriesByLevel.length; level += 1) {\n            entriesByLevel[level] = entriesByLevel[level].filter(excludeHidden);\n        }\n        return hiddenSegs;\n    };\n    DayGridSegHierarchy.prototype.handleInvalidInsertion = function (insertion, entry, hiddenEntries) {\n        var _a = this, entriesByLevel = _a.entriesByLevel, forceHidden = _a.forceHidden;\n        var level = insertion.nextLevel - 1;\n        if (this.hiddenConsumes && level >= 0) {\n            for (var lateral = insertion.lateralStart; lateral < insertion.lateralEnd; lateral += 1) {\n                var leadingEntry = entriesByLevel[level][lateral];\n                if (this.allowReslicing) {\n                    var placeholderEntry = __assign(__assign({}, leadingEntry), { spanStart: Math.max(leadingEntry.spanStart, entry.spanStart), spanEnd: Math.min(leadingEntry.spanEnd, entry.spanEnd) });\n                    var placeholderEntryId = buildEntryKey(placeholderEntry);\n                    if (!forceHidden[placeholderEntryId]) {\n                        forceHidden[placeholderEntryId] = true;\n                        entriesByLevel[level][lateral] = placeholderEntry;\n                        this.splitEntry(leadingEntry, entry, hiddenEntries); // split up the leadingEntry\n                    }\n                }\n                else {\n                    var placeholderEntryId = buildEntryKey(leadingEntry);\n                    if (!forceHidden[placeholderEntryId]) {\n                        forceHidden[placeholderEntryId] = true;\n                        hiddenEntries.push(leadingEntry);\n                    }\n                }\n            }\n        }\n        return _super.prototype.handleInvalidInsertion.call(this, insertion, entry, hiddenEntries);\n    };\n    return DayGridSegHierarchy;\n}(SegHierarchy));\n\nvar TableRow = /** @class */ (function (_super) {\n    __extends(TableRow, _super);\n    function TableRow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.cellElRefs = new RefMap(); // the <td>\n        _this.frameElRefs = new RefMap(); // the fc-daygrid-day-frame\n        _this.fgElRefs = new RefMap(); // the fc-daygrid-day-events\n        _this.segHarnessRefs = new RefMap(); // indexed by \"instanceId:firstCol\"\n        _this.rootElRef = createRef();\n        _this.state = {\n            framePositions: null,\n            maxContentHeight: null,\n            eventInstanceHeights: {},\n        };\n        return _this;\n    }\n    TableRow.prototype.render = function () {\n        var _this = this;\n        var _a = this, props = _a.props, state = _a.state, context = _a.context;\n        var options = context.options;\n        var colCnt = props.cells.length;\n        var businessHoursByCol = splitSegsByFirstCol(props.businessHourSegs, colCnt);\n        var bgEventSegsByCol = splitSegsByFirstCol(props.bgEventSegs, colCnt);\n        var highlightSegsByCol = splitSegsByFirstCol(this.getHighlightSegs(), colCnt);\n        var mirrorSegsByCol = splitSegsByFirstCol(this.getMirrorSegs(), colCnt);\n        var _b = computeFgSegPlacement(sortEventSegs(props.fgEventSegs, options.eventOrder), props.dayMaxEvents, props.dayMaxEventRows, options.eventOrderStrict, state.eventInstanceHeights, state.maxContentHeight, props.cells), singleColPlacements = _b.singleColPlacements, multiColPlacements = _b.multiColPlacements, moreCnts = _b.moreCnts, moreMarginTops = _b.moreMarginTops;\n        var isForcedInvisible = // TODO: messy way to compute this\n         (props.eventDrag && props.eventDrag.affectedInstances) ||\n            (props.eventResize && props.eventResize.affectedInstances) ||\n            {};\n        return (createElement(\"tr\", { ref: this.rootElRef },\n            props.renderIntro && props.renderIntro(),\n            props.cells.map(function (cell, col) {\n                var normalFgNodes = _this.renderFgSegs(col, props.forPrint ? singleColPlacements[col] : multiColPlacements[col], props.todayRange, isForcedInvisible);\n                var mirrorFgNodes = _this.renderFgSegs(col, buildMirrorPlacements(mirrorSegsByCol[col], multiColPlacements), props.todayRange, {}, Boolean(props.eventDrag), Boolean(props.eventResize), false);\n                return (createElement(TableCell, { key: cell.key, elRef: _this.cellElRefs.createRef(cell.key), innerElRef: _this.frameElRefs.createRef(cell.key) /* FF <td> problem, but okay to use for left/right. TODO: rename prop */, dateProfile: props.dateProfile, date: cell.date, showDayNumber: props.showDayNumbers, showWeekNumber: props.showWeekNumbers && col === 0, forceDayTop: props.showWeekNumbers /* even displaying weeknum for row, not necessarily day */, todayRange: props.todayRange, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, extraHookProps: cell.extraHookProps, extraDataAttrs: cell.extraDataAttrs, extraClassNames: cell.extraClassNames, extraDateSpan: cell.extraDateSpan, moreCnt: moreCnts[col], moreMarginTop: moreMarginTops[col], singlePlacements: singleColPlacements[col], fgContentElRef: _this.fgElRefs.createRef(cell.key), fgContent: ( // Fragment scopes the keys\n                    createElement(Fragment, null,\n                        createElement(Fragment, null, normalFgNodes),\n                        createElement(Fragment, null, mirrorFgNodes))), bgContent: ( // Fragment scopes the keys\n                    createElement(Fragment, null,\n                        _this.renderFillSegs(highlightSegsByCol[col], 'highlight'),\n                        _this.renderFillSegs(businessHoursByCol[col], 'non-business'),\n                        _this.renderFillSegs(bgEventSegsByCol[col], 'bg-event'))) }));\n            })));\n    };\n    TableRow.prototype.componentDidMount = function () {\n        this.updateSizing(true);\n    };\n    TableRow.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var currentProps = this.props;\n        this.updateSizing(!isPropsEqual(prevProps, currentProps));\n    };\n    TableRow.prototype.getHighlightSegs = function () {\n        var props = this.props;\n        if (props.eventDrag && props.eventDrag.segs.length) { // messy check\n            return props.eventDrag.segs;\n        }\n        if (props.eventResize && props.eventResize.segs.length) { // messy check\n            return props.eventResize.segs;\n        }\n        return props.dateSelectionSegs;\n    };\n    TableRow.prototype.getMirrorSegs = function () {\n        var props = this.props;\n        if (props.eventResize && props.eventResize.segs.length) { // messy check\n            return props.eventResize.segs;\n        }\n        return [];\n    };\n    TableRow.prototype.renderFgSegs = function (col, segPlacements, todayRange, isForcedInvisible, isDragging, isResizing, isDateSelecting) {\n        var context = this.context;\n        var eventSelection = this.props.eventSelection;\n        var framePositions = this.state.framePositions;\n        var defaultDisplayEventEnd = this.props.cells.length === 1; // colCnt === 1\n        var isMirror = isDragging || isResizing || isDateSelecting;\n        var nodes = [];\n        if (framePositions) {\n            for (var _i = 0, segPlacements_1 = segPlacements; _i < segPlacements_1.length; _i++) {\n                var placement = segPlacements_1[_i];\n                var seg = placement.seg;\n                var instanceId = seg.eventRange.instance.instanceId;\n                var key = instanceId + ':' + col;\n                var isVisible = placement.isVisible && !isForcedInvisible[instanceId];\n                var isAbsolute = placement.isAbsolute;\n                var left = '';\n                var right = '';\n                if (isAbsolute) {\n                    if (context.isRtl) {\n                        right = 0;\n                        left = framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol];\n                    }\n                    else {\n                        left = 0;\n                        right = framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol];\n                    }\n                }\n                /*\n                known bug: events that are force to be list-item but span multiple days still take up space in later columns\n                todo: in print view, for multi-day events, don't display title within non-start/end segs\n                */\n                nodes.push(createElement(\"div\", { className: 'fc-daygrid-event-harness' + (isAbsolute ? ' fc-daygrid-event-harness-abs' : ''), key: key, ref: isMirror ? null : this.segHarnessRefs.createRef(key), style: {\n                        visibility: isVisible ? '' : 'hidden',\n                        marginTop: isAbsolute ? '' : placement.marginTop,\n                        top: isAbsolute ? placement.absoluteTop : '',\n                        left: left,\n                        right: right,\n                    } }, hasListItemDisplay(seg) ? (createElement(TableListItemEvent, __assign({ seg: seg, isDragging: isDragging, isSelected: instanceId === eventSelection, defaultDisplayEventEnd: defaultDisplayEventEnd }, getSegMeta(seg, todayRange)))) : (createElement(TableBlockEvent, __assign({ seg: seg, isDragging: isDragging, isResizing: isResizing, isDateSelecting: isDateSelecting, isSelected: instanceId === eventSelection, defaultDisplayEventEnd: defaultDisplayEventEnd }, getSegMeta(seg, todayRange))))));\n            }\n        }\n        return nodes;\n    };\n    TableRow.prototype.renderFillSegs = function (segs, fillType) {\n        var isRtl = this.context.isRtl;\n        var todayRange = this.props.todayRange;\n        var framePositions = this.state.framePositions;\n        var nodes = [];\n        if (framePositions) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                var leftRightCss = isRtl ? {\n                    right: 0,\n                    left: framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol],\n                } : {\n                    left: 0,\n                    right: framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol],\n                };\n                nodes.push(createElement(\"div\", { key: buildEventRangeKey(seg.eventRange), className: \"fc-daygrid-bg-harness\", style: leftRightCss }, fillType === 'bg-event' ?\n                    createElement(BgEvent, __assign({ seg: seg }, getSegMeta(seg, todayRange))) :\n                    renderFill(fillType)));\n            }\n        }\n        return createElement.apply(void 0, __spreadArray([Fragment, {}], nodes));\n    };\n    TableRow.prototype.updateSizing = function (isExternalSizingChange) {\n        var _a = this, props = _a.props, frameElRefs = _a.frameElRefs;\n        if (!props.forPrint &&\n            props.clientWidth !== null // positioning ready?\n        ) {\n            if (isExternalSizingChange) {\n                var frameEls = props.cells.map(function (cell) { return frameElRefs.currentMap[cell.key]; });\n                if (frameEls.length) {\n                    var originEl = this.rootElRef.current;\n                    this.setState({\n                        framePositions: new PositionCache(originEl, frameEls, true, // isHorizontal\n                        false),\n                    });\n                }\n            }\n            var limitByContentHeight = props.dayMaxEvents === true || props.dayMaxEventRows === true;\n            this.setState({\n                eventInstanceHeights: this.queryEventInstanceHeights(),\n                maxContentHeight: limitByContentHeight ? this.computeMaxContentHeight() : null,\n            });\n        }\n    };\n    TableRow.prototype.queryEventInstanceHeights = function () {\n        var segElMap = this.segHarnessRefs.currentMap;\n        var eventInstanceHeights = {};\n        // get the max height amongst instance segs\n        for (var key in segElMap) {\n            var height = Math.round(segElMap[key].getBoundingClientRect().height);\n            var instanceId = key.split(':')[0]; // deconstruct how renderFgSegs makes the key\n            eventInstanceHeights[instanceId] = Math.max(eventInstanceHeights[instanceId] || 0, height);\n        }\n        return eventInstanceHeights;\n    };\n    TableRow.prototype.computeMaxContentHeight = function () {\n        var firstKey = this.props.cells[0].key;\n        var cellEl = this.cellElRefs.currentMap[firstKey];\n        var fcContainerEl = this.fgElRefs.currentMap[firstKey];\n        return cellEl.getBoundingClientRect().bottom - fcContainerEl.getBoundingClientRect().top;\n    };\n    TableRow.prototype.getCellEls = function () {\n        var elMap = this.cellElRefs.currentMap;\n        return this.props.cells.map(function (cell) { return elMap[cell.key]; });\n    };\n    return TableRow;\n}(DateComponent));\nTableRow.addStateEquality({\n    eventInstanceHeights: isPropsEqual,\n});\nfunction buildMirrorPlacements(mirrorSegs, colPlacements) {\n    if (!mirrorSegs.length) {\n        return [];\n    }\n    var topsByInstanceId = buildAbsoluteTopHash(colPlacements); // TODO: cache this at first render?\n    return mirrorSegs.map(function (seg) { return ({\n        seg: seg,\n        isVisible: true,\n        isAbsolute: true,\n        absoluteTop: topsByInstanceId[seg.eventRange.instance.instanceId],\n        marginTop: 0,\n    }); });\n}\nfunction buildAbsoluteTopHash(colPlacements) {\n    var topsByInstanceId = {};\n    for (var _i = 0, colPlacements_1 = colPlacements; _i < colPlacements_1.length; _i++) {\n        var placements = colPlacements_1[_i];\n        for (var _a = 0, placements_1 = placements; _a < placements_1.length; _a++) {\n            var placement = placements_1[_a];\n            topsByInstanceId[placement.seg.eventRange.instance.instanceId] = placement.absoluteTop;\n        }\n    }\n    return colPlacements;\n}\n\nvar Table = /** @class */ (function (_super) {\n    __extends(Table, _super);\n    function Table() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.splitBusinessHourSegs = memoize(splitSegsByRow);\n        _this.splitBgEventSegs = memoize(splitSegsByRow);\n        _this.splitFgEventSegs = memoize(splitSegsByRow);\n        _this.splitDateSelectionSegs = memoize(splitSegsByRow);\n        _this.splitEventDrag = memoize(splitInteractionByRow);\n        _this.splitEventResize = memoize(splitInteractionByRow);\n        _this.rowRefs = new RefMap();\n        _this.handleRootEl = function (rootEl) {\n            _this.rootEl = rootEl;\n            if (rootEl) {\n                _this.context.registerInteractiveComponent(_this, {\n                    el: rootEl,\n                    isHitComboAllowed: _this.props.isHitComboAllowed,\n                });\n            }\n            else {\n                _this.context.unregisterInteractiveComponent(_this);\n            }\n        };\n        return _this;\n    }\n    Table.prototype.render = function () {\n        var _this = this;\n        var props = this.props;\n        var dateProfile = props.dateProfile, dayMaxEventRows = props.dayMaxEventRows, dayMaxEvents = props.dayMaxEvents, expandRows = props.expandRows;\n        var rowCnt = props.cells.length;\n        var businessHourSegsByRow = this.splitBusinessHourSegs(props.businessHourSegs, rowCnt);\n        var bgEventSegsByRow = this.splitBgEventSegs(props.bgEventSegs, rowCnt);\n        var fgEventSegsByRow = this.splitFgEventSegs(props.fgEventSegs, rowCnt);\n        var dateSelectionSegsByRow = this.splitDateSelectionSegs(props.dateSelectionSegs, rowCnt);\n        var eventDragByRow = this.splitEventDrag(props.eventDrag, rowCnt);\n        var eventResizeByRow = this.splitEventResize(props.eventResize, rowCnt);\n        var limitViaBalanced = dayMaxEvents === true || dayMaxEventRows === true;\n        // if rows can't expand to fill fixed height, can't do balanced-height event limit\n        // TODO: best place to normalize these options?\n        if (limitViaBalanced && !expandRows) {\n            limitViaBalanced = false;\n            dayMaxEventRows = null;\n            dayMaxEvents = null;\n        }\n        var classNames = [\n            'fc-daygrid-body',\n            limitViaBalanced ? 'fc-daygrid-body-balanced' : 'fc-daygrid-body-unbalanced',\n            expandRows ? '' : 'fc-daygrid-body-natural', // will height of one row depend on the others?\n        ];\n        return (createElement(\"div\", { className: classNames.join(' '), ref: this.handleRootEl, style: {\n                // these props are important to give this wrapper correct dimensions for interactions\n                // TODO: if we set it here, can we avoid giving to inner tables?\n                width: props.clientWidth,\n                minWidth: props.tableMinWidth,\n            } },\n            createElement(NowTimer, { unit: \"day\" }, function (nowDate, todayRange) { return (createElement(Fragment, null,\n                createElement(\"table\", { className: \"fc-scrollgrid-sync-table\", style: {\n                        width: props.clientWidth,\n                        minWidth: props.tableMinWidth,\n                        height: expandRows ? props.clientHeight : '',\n                    } },\n                    props.colGroupNode,\n                    createElement(\"tbody\", null, props.cells.map(function (cells, row) { return (createElement(TableRow, { ref: _this.rowRefs.createRef(row), key: cells.length\n                            ? cells[0].date.toISOString() /* best? or put key on cell? or use diff formatter? */\n                            : row // in case there are no cells (like when resource view is loading)\n                        , showDayNumbers: rowCnt > 1, showWeekNumbers: props.showWeekNumbers, todayRange: todayRange, dateProfile: dateProfile, cells: cells, renderIntro: props.renderRowIntro, businessHourSegs: businessHourSegsByRow[row], eventSelection: props.eventSelection, bgEventSegs: bgEventSegsByRow[row].filter(isSegAllDay) /* hack */, fgEventSegs: fgEventSegsByRow[row], dateSelectionSegs: dateSelectionSegsByRow[row], eventDrag: eventDragByRow[row], eventResize: eventResizeByRow[row], dayMaxEvents: dayMaxEvents, dayMaxEventRows: dayMaxEventRows, clientWidth: props.clientWidth, clientHeight: props.clientHeight, forPrint: props.forPrint })); }))))); })));\n    };\n    // Hit System\n    // ----------------------------------------------------------------------------------------------------\n    Table.prototype.prepareHits = function () {\n        this.rowPositions = new PositionCache(this.rootEl, this.rowRefs.collect().map(function (rowObj) { return rowObj.getCellEls()[0]; }), // first cell el in each row. TODO: not optimal\n        false, true);\n        this.colPositions = new PositionCache(this.rootEl, this.rowRefs.currentMap[0].getCellEls(), // cell els in first row\n        true, // horizontal\n        false);\n    };\n    Table.prototype.queryHit = function (positionLeft, positionTop) {\n        var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n        var col = colPositions.leftToIndex(positionLeft);\n        var row = rowPositions.topToIndex(positionTop);\n        if (row != null && col != null) {\n            var cell = this.props.cells[row][col];\n            return {\n                dateProfile: this.props.dateProfile,\n                dateSpan: __assign({ range: this.getCellRange(row, col), allDay: true }, cell.extraDateSpan),\n                dayEl: this.getCellEl(row, col),\n                rect: {\n                    left: colPositions.lefts[col],\n                    right: colPositions.rights[col],\n                    top: rowPositions.tops[row],\n                    bottom: rowPositions.bottoms[row],\n                },\n                layer: 0,\n            };\n        }\n        return null;\n    };\n    Table.prototype.getCellEl = function (row, col) {\n        return this.rowRefs.currentMap[row].getCellEls()[col]; // TODO: not optimal\n    };\n    Table.prototype.getCellRange = function (row, col) {\n        var start = this.props.cells[row][col].date;\n        var end = addDays(start, 1);\n        return { start: start, end: end };\n    };\n    return Table;\n}(DateComponent));\nfunction isSegAllDay(seg) {\n    return seg.eventRange.def.allDay;\n}\n\nvar DayTableSlicer = /** @class */ (function (_super) {\n    __extends(DayTableSlicer, _super);\n    function DayTableSlicer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.forceDayIfListItem = true;\n        return _this;\n    }\n    DayTableSlicer.prototype.sliceRange = function (dateRange, dayTableModel) {\n        return dayTableModel.sliceRange(dateRange);\n    };\n    return DayTableSlicer;\n}(Slicer));\n\nvar DayTable = /** @class */ (function (_super) {\n    __extends(DayTable, _super);\n    function DayTable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.slicer = new DayTableSlicer();\n        _this.tableRef = createRef();\n        return _this;\n    }\n    DayTable.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        return (createElement(Table, __assign({ ref: this.tableRef }, this.slicer.sliceProps(props, props.dateProfile, props.nextDayThreshold, context, props.dayTableModel), { dateProfile: props.dateProfile, cells: props.dayTableModel.cells, colGroupNode: props.colGroupNode, tableMinWidth: props.tableMinWidth, renderRowIntro: props.renderRowIntro, dayMaxEvents: props.dayMaxEvents, dayMaxEventRows: props.dayMaxEventRows, showWeekNumbers: props.showWeekNumbers, expandRows: props.expandRows, headerAlignElRef: props.headerAlignElRef, clientWidth: props.clientWidth, clientHeight: props.clientHeight, forPrint: props.forPrint })));\n    };\n    return DayTable;\n}(DateComponent));\n\nvar DayTableView = /** @class */ (function (_super) {\n    __extends(DayTableView, _super);\n    function DayTableView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTableModel = memoize(buildDayTableModel);\n        _this.headerRef = createRef();\n        _this.tableRef = createRef();\n        return _this;\n    }\n    DayTableView.prototype.render = function () {\n        var _this = this;\n        var _a = this.context, options = _a.options, dateProfileGenerator = _a.dateProfileGenerator;\n        var props = this.props;\n        var dayTableModel = this.buildDayTableModel(props.dateProfile, dateProfileGenerator);\n        var headerContent = options.dayHeaders && (createElement(DayHeader, { ref: this.headerRef, dateProfile: props.dateProfile, dates: dayTableModel.headerDates, datesRepDistinctDays: dayTableModel.rowCnt === 1 }));\n        var bodyContent = function (contentArg) { return (createElement(DayTable, { ref: _this.tableRef, dateProfile: props.dateProfile, dayTableModel: dayTableModel, businessHours: props.businessHours, dateSelection: props.dateSelection, eventStore: props.eventStore, eventUiBases: props.eventUiBases, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, nextDayThreshold: options.nextDayThreshold, colGroupNode: contentArg.tableColGroupNode, tableMinWidth: contentArg.tableMinWidth, dayMaxEvents: options.dayMaxEvents, dayMaxEventRows: options.dayMaxEventRows, showWeekNumbers: options.weekNumbers, expandRows: !props.isHeightAuto, headerAlignElRef: _this.headerElRef, clientWidth: contentArg.clientWidth, clientHeight: contentArg.clientHeight, forPrint: props.forPrint })); };\n        return options.dayMinWidth\n            ? this.renderHScrollLayout(headerContent, bodyContent, dayTableModel.colCnt, options.dayMinWidth)\n            : this.renderSimpleLayout(headerContent, bodyContent);\n    };\n    return DayTableView;\n}(TableView));\nfunction buildDayTableModel(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeriesModel(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTableModel(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar TableDateProfileGenerator = /** @class */ (function (_super) {\n    __extends(TableDateProfileGenerator, _super);\n    function TableDateProfileGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Computes the date range that will be rendered.\n    TableDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        var dateEnv = this.props.dateEnv;\n        var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n        var start = renderRange.start;\n        var end = renderRange.end;\n        var endOfWeek;\n        // year and month views should be aligned with weeks. this is already done for week\n        if (/^(year|month)$/.test(currentRangeUnit)) {\n            start = dateEnv.startOfWeek(start);\n            // make end-of-week if not already\n            endOfWeek = dateEnv.startOfWeek(end);\n            if (endOfWeek.valueOf() !== end.valueOf()) {\n                end = addWeeks(endOfWeek, 1);\n            }\n        }\n        // ensure 6 weeks\n        if (this.props.monthMode &&\n            this.props.fixedWeekCount) {\n            var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n            diffWeeks(start, end));\n            end = addWeeks(end, 6 - rowCnt);\n        }\n        return { start: start, end: end };\n    };\n    return TableDateProfileGenerator;\n}(DateProfileGenerator));\n\nvar main = createPlugin({\n    initialView: 'dayGridMonth',\n    views: {\n        dayGrid: {\n            component: DayTableView,\n            dateProfileGeneratorClass: TableDateProfileGenerator,\n        },\n        dayGridDay: {\n            type: 'dayGrid',\n            duration: { days: 1 },\n        },\n        dayGridWeek: {\n            type: 'dayGrid',\n            duration: { weeks: 1 },\n        },\n        dayGridMonth: {\n            type: 'dayGrid',\n            duration: { months: 1 },\n            monthMode: true,\n            fixedWeekCount: true,\n        },\n    },\n});\n\nexport default main;\nexport { DayTableView as DayGridView, DayTable, DayTableSlicer, Table, TableView, buildDayTableModel };\n//# sourceMappingURL=main.js.map\n"]},"metadata":{},"sourceType":"module"}